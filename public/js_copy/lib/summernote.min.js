!function(A){"function"==typeof define&&define.amd?define(["jquery"],A):A(window.jQuery)}(function(As){Array.prototype.reduce||(Array.prototype.reduce=function(E){var C,D=Object(this),A=D.length>>>0,B=0;if(2===arguments.length){C=arguments[1]}else{for(;A>B&&!(B in D);){B++}if(B>=A){throw new TypeError("Reduce of empty array with no initial value")}C=D[B++]}for(;A>B;B++){B in D&&(C=E(C,D[B],B,D))}return C}),"function"!=typeof Array.prototype.filter&&(Array.prototype.filter=function(F){for(var D=Object(this),E=D.length>>>0,B=[],C=arguments.length>=2?arguments[1]:void 0,G=0;E>G;G++){if(G in D){var A=D[G];F.call(C,A,G,D)&&B.push(A)}}return B});var Aq,Ar="function"==typeof define&&define.amd,Av=function(C){var D="Comic Sans MS"===C?"Courier New":"Comic Sans MS",A=As("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),B=A.css("fontFamily",D).width(),E=A.css("fontFamily",C+","+D).width();return A.remove(),B!==E},L={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:navigator.userAgent.indexOf("MSIE")>-1||navigator.userAgent.indexOf("Trident")>-1,isFF:navigator.userAgent.indexOf("Firefox")>-1,jqueryVersion:parseFloat(As.fn.jquery),isSupportAmd:Ar,hasCodeMirror:Ar?require.specified("CodeMirror"):!!window.CodeMirror,isFontInstalled:Av,isW3CRangeSupport:!!document.createRange},At=function(){var H=function(b){return function(c){return b===c}},I=function(d,c){return d===c},a=function(b){return function(d,e){return d[b]===e[b]}},A=function(){return !0},J=function(){return !1},K=function(b){return function(){return !b.apply(b,arguments)}},D=function(d,c){return function(b){return d(b)&&c(b)}},E=function(b){return b},B=0,C=function(d){var c=++B+"";return d?d+c:c},F=function(d){var e=As(document);return{top:d.top+e.scrollTop(),left:d.left+e.scrollLeft(),width:d.right-d.left,height:d.bottom-d.top}},G=function(f){var d={};for(var e in f){f.hasOwnProperty(e)&&(d[f[e]]=e)}return d};return{eq:H,eq2:I,peq2:a,ok:A,fail:J,self:E,not:K,and:D,uniqueId:C,rect2bnd:F,invertObject:G}}(),Au=function(){var K=function(b){return b[0]},a=function(b){return b[b.length-1]},q=function(b){return b.slice(0,b.length-1)},A=function(b){return b.slice(1)},f=function(k,i){for(var j=0,g=k.length;g>j;j++){var h=k[j];if(i(h)){return h}}},E=function(i,g){for(var h=0,e=i.length;e>h;h++){if(!g(i[h])){return !1}}return !0},F=function(d,e){return -1!==As.inArray(e,d)},C=function(d,c){return c=c||At.self,d.reduce(function(e,b){return e+c(b)},0)},D=function(i){for(var g=[],h=-1,e=i.length;++h<e;){g[h]=i[h]}return g},I=function(c,b){if(!c.length){return[]}var e=A(c);return e.reduce(function(h,g){var d=a(h);return b(a(d),g)?d[d.length]=g:h[h.length]=[g],h},[[K(c)]])},J=function(i){for(var g=[],h=0,e=i.length;e>h;h++){i[h]&&g.push(i[h])}return g},G=function(i){for(var g=[],h=0,e=i.length;e>h;h++){F(g,i[h])||g.push(i[h])}return g},H=function(g,d){var e=g.indexOf(d);return -1===e?null:g[e+1]},B=function(g,d){var e=g.indexOf(d);return -1===e?null:g[e-1]};return{head:K,last:a,initial:q,tail:A,prev:B,next:H,find:f,contains:F,all:E,sum:C,from:D,clusterBy:I,compact:J,unique:G}}(),Ak=String.fromCharCode(160),Al="\ufeff",Ai=function(){var Bn=function(A){return A&&As(A).hasClass("note-editable")},Bo=function(A){return A&&As(A).hasClass("note-control-sizing")},Bq=function(B){var C;if(B.hasClass("note-air-editor")){var A=Au.last(B.attr("id").split("-"));return C=function(D){return function(){return As(D+A)}},{editor:function(){return B},holder:function(){return B.data("holder")},editable:function(){return B},popover:C("#note-popover-"),handle:C("#note-handle-"),dialog:C("#note-dialog-")}}return C=function(D){return function(){return B.find(D)}},{editor:function(){return B},holder:function(){return B.data("holder")},dropzone:C(".note-dropzone"),toolbar:C(".note-toolbar"),editable:C(".note-editable"),codable:C(".note-codable"),statusbar:C(".note-statusbar"),popover:C(".note-popover"),handle:C(".note-handle"),dialog:C(".note-dialog")}},Bi=function(B){var C=As(B).closest(".note-editor, .note-air-editor, .note-air-layout");if(!C.length){return null}var A;return A=C.is(".note-editor, .note-air-editor")?C:As("#note-editor-"+Au.last(C.attr("id").split("-"))),Bq(A)},Bl=function(A){return A=A.toUpperCase(),function(B){return B&&B.nodeName.toUpperCase()===A}},Bm=function(A){return A&&3===A.nodeType},Bj=function(A){return A&&/^BR|^IMG|^HR/.test(A.nodeName.toUpperCase())},Bk=function(A){return Bn(A)?!1:A&&/^DIV|^P|^LI|^H[1-7]/.test(A.nodeName.toUpperCase())},Bc=Bl("LI"),Bd=function(A){return Bk(A)&&!Bc(A)},Ba=Bl("TABLE"),Bb=function(A){return !(Bf(A)||Bg(A)||Bk(A)||Ba(A)||Be(A))},Bg=function(A){return A&&/^UL|^OL/.test(A.nodeName.toUpperCase())},Bh=function(A){return A&&/^TD|^TH/.test(A.nodeName.toUpperCase())},Be=Bl("BLOCKQUOTE"),Bf=function(A){return Bh(A)||Be(A)||Bn(A)},A8=Bl("A"),A9=function(A){return Bb(A)&&!!AU(A,Bk)},A7=function(A){return Bb(A)&&!AU(A,Bk)},A2=Bl("BODY"),A0=function(B,A){return B.nextSibling===A||B.previousSibling===A},A1=function(C,A){A=A||At.ok;var B=[];return C.previousSibling&&A(C.previousSibling)&&B.push(C.previousSibling),B.push(C),C.nextSibling&&A(C.nextSibling)&&B.push(C.nextSibling),B},A5=L.isMSIE?"&nbsp;":"<br>",A6=function(A){return Bm(A)?A.nodeValue.length:A.childNodes.length},A3=function(B){var A=A6(B);return 0===A?!0:Ai.isText(B)||1!==A||B.innerHTML!==A5?!1:!0},A4=function(A){Bj(A)||A6(A)||(A.innerHTML=A5)},AU=function(B,A){for(;B;){if(A(B)){return B}if(Bn(B)){break}B=B.parentNode}return null},AV=function(B,A){for(B=B.parentNode;B&&1===A6(B);){if(A(B)){return B}if(Bn(B)){break}B=B.parentNode}return null},AS=function(C,B){B=B||At.fail;var A=[];return AU(C,function(D){return Bn(D)||A.push(D),B(D)}),A},AT=function(C,A){var B=AS(C);return Au.last(B.filter(A))},AY=function(C,D){for(var A=AS(C),B=D;B;B=B.parentNode){if(As.inArray(B,A)>-1){return B}}return null},AZ=function(C,A){A=A||At.fail;for(var B=[];C&&!A(C);){B.push(C),C=C.previousSibling}return B},AW=function(C,A){A=A||At.fail;for(var B=[];C&&!A(C);){B.push(C),C=C.nextSibling}return B},AX=function(D,B){var C=[];return B=B||At.ok,function A(F){D!==F&&B(F)&&C.push(F);for(var G=0,E=F.childNodes.length;E>G;G++){A(F.childNodes[G])}}(D),C},AM=function(C,D){var A=C.parentNode,B=As("<"+D+">")[0];return A.insertBefore(B,C),B.appendChild(C),B},AN=function(D,B){var C=B.nextSibling,A=B.parentNode;return C?A.insertBefore(D,C):A.appendChild(D),D},AK=function(A,B){return As.each(B,function(D,C){A.appendChild(C)}),A},AL=function(A){return 0===A.offset},AQ=function(A){return A.offset===A6(A.node)},AR=function(A){return AL(A)||AQ(A)},AO=function(B,A){for(;B&&B!==A;){if(0!==AH(B)){return !1}B=B.parentNode}return !0},AP=function(B,A){for(;B&&B!==A;){if(AH(B)!==A6(B.parentNode)-1){return !1}B=B.parentNode}return !0},AH=function(B){for(var A=0;B=B.previousSibling;){A+=1}return A},AI=function(A){return !!(A&&A.childNodes&&A.childNodes.length)},AG=function(D,C){var A,B;if(0===D.offset){if(Bn(D.node)){return null}A=D.node.parentNode,B=AH(D.node)}else{AI(D.node)?(A=D.node.childNodes[D.offset-1],B=A6(A)):(A=D.node,B=C?0:D.offset-1)}return{node:A,offset:B}},Az=function(D,C){var A,B;if(A6(D.node)===D.offset){if(Bn(D.node)){return null}A=D.node.parentNode,B=AH(D.node)+1}else{AI(D.node)?(A=D.node.childNodes[D.offset],B=0):(A=D.node,B=C?A6(D.node):D.offset+1)}return{node:A,offset:B}},AJ=function(B,A){return B.node===A.node&&B.offset===A.offset},AA=function(C){if(Bm(C.node)||!AI(C.node)||A3(C.node)){return !0}var A=C.node.childNodes[C.offset-1],B=C.node.childNodes[C.offset];return A&&!Bj(A)||B&&!Bj(B)?!1:!0},Ax=function(B,A){for(;B;){if(A(B)){return B}B=AG(B)}return null},Ay=function(B,A){for(;B;){if(A(B)){return B}B=Az(B)}return null},AD=function(E,C,D,A){for(var B=E;B&&(D(B),!AJ(B,C));){var F=A&&E.node!==B.node&&C.node!==B.node;B=Az(B,F)}},AE=function(B,C){var A=AS(C,At.eq(B));return As.map(A,AH).reverse()},AB=function(E,C){for(var D=E,A=0,B=C.length;B>A;A++){D=D.childNodes.length<=C[A]?D.childNodes[D.childNodes.length-1]:D.childNodes[C[A]]}return D},AC=function(D,B){if(Bm(D.node)){return AL(D)?D.node:AQ(D)?D.node.nextSibling:D.node.splitText(D.offset)}var C=D.node.childNodes[D.offset],A=AN(D.node.cloneNode(!1),D.node);return AK(A,AW(C)),B||(A4(D.node),A4(A)),A},f=function(D,B,C){var A=AS(B.node,At.eq(D));return A.length?1===A.length?AC(B,C):A.reduce(function(G,E){var F=AN(E.cloneNode(!1),E);return G===B.node&&(G=AC(B,C)),AK(F,AW(G)),C||(A4(E),A4(F)),F}):null},g=function(F,D){var E,H,A=D?Bk:Bf,G=AS(F.node,A),B=Au.last(G)||F.node;A(B)?(E=G[G.length-2],H=B):(E=B,H=E.parentNode);var C=E&&f(E,F,D);return{rightNode:C,container:H}},a=function(A){return document.createElement(A)},e=function(A){return document.createTextNode(A)},j=function(E,C){if(E&&E.parentNode){if(E.removeNode){return E.removeNode(C)}var D=E.parentNode;if(!C){var A,B,F=[];for(A=0,B=E.childNodes.length;B>A;A++){F.push(E.childNodes[A])}for(A=0,B=F.length;B>A;A++){D.insertBefore(F[A],E)}}D.removeChild(E)}},Aw=function(C,B){for(;C&&!Bn(C)&&B(C);){var A=C.parentNode;j(C),C=A}},h=function(C,A){if(C.nodeName.toUpperCase()===A.toUpperCase()){return C}var B=a(A);return C.style.cssText&&(B.style.cssText=C.style.cssText),AK(B,Au.from(C.childNodes)),AN(B,C),j(C),B},i=Bl("TEXTAREA"),Bp=function(C,D){var A=i(C[0])?C.val():C.html();if(D){var B=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;A=A.replace(B,function(I,G,H){H=H.toUpperCase();var E=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(H)&&!!G,F=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(H);return I+(E||F?"\n":"")}),A=As.trim(A)}return A},AF=function(C,A){var B=C.val();return A?B.replace(/[\n\r]/g,""):B};return{NBSP_CHAR:Ak,ZERO_WIDTH_NBSP_CHAR:Al,blank:A5,emptyPara:"<p>"+A5+"</p>",makePredByNodeName:Bl,isEditable:Bn,isControlSizing:Bo,buildLayoutInfo:Bq,makeLayoutInfo:Bi,isText:Bm,isVoid:Bj,isPara:Bk,isPurePara:Bd,isInline:Bb,isBodyInline:A7,isBody:A2,isParaInline:A9,isList:Bg,isTable:Ba,isCell:Bh,isBlockquote:Be,isBodyContainer:Bf,isAnchor:A8,isDiv:Bl("DIV"),isLi:Bc,isBR:Bl("BR"),isSpan:Bl("SPAN"),isB:Bl("B"),isU:Bl("U"),isS:Bl("S"),isI:Bl("I"),isImg:Bl("IMG"),isTextarea:i,isEmpty:A3,isEmptyAnchor:At.and(A8,A3),isClosestSibling:A0,withClosestSiblings:A1,nodeLength:A6,isLeftEdgePoint:AL,isRightEdgePoint:AQ,isEdgePoint:AR,isLeftEdgeOf:AO,isRightEdgeOf:AP,prevPoint:AG,nextPoint:Az,isSamePoint:AJ,isVisiblePoint:AA,prevPointUntil:Ax,nextPointUntil:Ay,walkPoint:AD,ancestor:AU,singleChildAncestor:AV,listAncestor:AS,lastAncestor:AT,listNext:AW,listPrev:AZ,listDescendant:AX,commonAncestor:AY,wrap:AM,insertAfter:AN,appendChildNodes:AK,position:AH,hasChildren:AI,makeOffsetPath:AE,fromOffsetPath:AB,splitTree:f,splitPoint:g,create:a,createText:e,remove:j,removeWhile:Aw,replace:h,html:Bp,value:AF}}(),Aj=function(){var B=function(g,J){var K,n,D=g.parentElement(),j=document.body.createTextRange(),F=Au.from(D.childNodes);for(K=0;K<F.length;K++){if(!Ai.isText(F[K])){if(j.moveToElementText(F[K]),j.compareEndPoints("StartToStart",g)>=0){break}n=F[K]}}if(0!==K&&Ai.isText(F[K-1])){var G=document.body.createTextRange(),E=null;G.moveToElementText(n||D),G.collapse(!n),E=n?n.nextSibling:D.firstChild;var H=g.duplicate();H.setEndPoint("StartToStart",G);for(var I=H.text.replace(/[\r\n]/g,"").length;I>E.nodeValue.length&&E.nextSibling;){I-=E.nodeValue.length,E=E.nextSibling}E.nodeValue;J&&E.nextSibling&&Ai.isText(E.nextSibling)&&I===E.nodeValue.length&&(I-=E.nodeValue.length,E=E.nextSibling),D=E,K=I}return{cont:D,offset:K}},C=function(G){var E=function(f,b){var I,J;if(Ai.isText(f)){var H=Ai.listPrev(f,At.not(Ai.isText)),K=Au.last(H).previousSibling;I=K||f.parentNode,b+=Au.sum(Au.tail(H),Ai.nodeLength),J=!K}else{if(I=f.childNodes[b]||f,Ai.isText(I)){return E(I,0)}b=0,J=!1}return{node:I,collapseToStart:J,offset:b}},F=document.body.createTextRange(),D=E(G.node,G.offset);return F.moveToElementText(D.node),F.collapse(D.collapseToStart),F.moveStart("character",D.offset),F},A=function(H,D,E,I){this.sc=H,this.so=D,this.ec=E,this.eo=I;var F=function(){if(L.isW3CRangeSupport){var K=document.createRange();return K.setStart(H,D),K.setEnd(E,I),K}var J=C({node:H,offset:D});return J.setEndPoint("EndToEnd",C({node:E,offset:I})),J};this.getPoints=function(){return{sc:H,so:D,ec:E,eo:I}},this.getStartPoint=function(){return{node:H,offset:D}},this.getEndPoint=function(){return{node:E,offset:I}},this.select=function(){var K=F();if(L.isW3CRangeSupport){var J=document.getSelection();J.rangeCount>0&&J.removeAllRanges(),J.addRange(K)}else{K.select()}},this.normalize=function(){var d=function(b){return Ai.isVisiblePoint(b)||(b=Ai.isLeftEdgePoint(b)?Ai.nextPointUntil(b,Ai.isVisiblePoint):Ai.prevPointUntil(b,Ai.isVisiblePoint)),b},J=d(this.getStartPoint()),K=d(this.getEndPoint());return new A(J.node,J.offset,K.node,K.offset)},this.nodes=function(m,j){m=m||At.ok;var l=j&&j.includeAncestor,n=j&&j.fullyContains,J=this.getStartPoint(),f=this.getEndPoint(),g=[],K=[];return Ai.walkPoint(J,f,function(c){if(!Ai.isEditable(c.node)){var a;n?(Ai.isLeftEdgePoint(c)&&K.push(c.node),Ai.isRightEdgePoint(c)&&Au.contains(K,c.node)&&(a=c.node)):a=l?Ai.ancestor(c.node,m):c.node,a&&m(a)&&g.push(a)}},!0),Au.unique(g)},this.commonAncestor=function(){return Ai.commonAncestor(H,E)},this.expand=function(b){var K=Ai.ancestor(H,b),J=Ai.ancestor(E,b);if(!K&&!J){return new A(H,D,E,I)}var d=this.getPoints();return K&&(d.sc=K,d.so=0),J&&(d.ec=J,d.eo=Ai.nodeLength(J)),new A(d.sc,d.so,d.ec,d.eo)},this.collapse=function(J){return J?new A(H,D,H,D):new A(E,I,E,I)},this.splitText=function(){var K=H===E,J=this.getPoints();return Ai.isText(E)&&!Ai.isEdgePoint(this.getEndPoint())&&E.splitText(I),Ai.isText(H)&&!Ai.isEdgePoint(this.getStartPoint())&&(J.sc=H.splitText(D),J.so=0,K&&(J.ec=J.sc,J.eo=I-D)),new A(J.sc,J.so,J.ec,J.eo)},this.deleteContents=function(){if(this.isCollapsed()){return this}var K=this.splitText(),a=K.nodes(null,{fullyContains:!0}),J=Ai.prevPointUntil(K.getStartPoint(),function(b){return !Au.contains(a,b.node)}),d=[];return As.each(a,function(g,e){var f=e.parentNode;J.node!==f&&1===Ai.nodeLength(f)&&d.push(f),Ai.remove(e,!1)}),As.each(d,function(e,c){Ai.remove(c,!1)}),new A(J.node,J.offset,J.node,J.offset).normalize()};var G=function(J){return function(){var K=Ai.ancestor(H,J);return !!K&&K===Ai.ancestor(E,J)}};this.isOnEditable=G(Ai.isEditable),this.isOnList=G(Ai.isList),this.isOnAnchor=G(Ai.isAnchor),this.isOnCell=G(Ai.isCell),this.isLeftEdgeOf=function(K){if(!Ai.isLeftEdgePoint(this.getStartPoint())){return !1}var J=Ai.ancestor(this.sc,K);return J&&Ai.isLeftEdgeOf(this.sc,J)},this.isCollapsed=function(){return H===E&&D===I},this.wrapBodyInlineWithPara=function(){if(Ai.isBodyContainer(H)&&Ai.isEmpty(H)){return H.innerHTML=Ai.emptyPara,new A(H.firstChild,0,H.firstChild,0)}if(Ai.isParaInline(H)||Ai.isPara(H)){return this.normalize()}var d;if(Ai.isInline(H)){var b=Ai.listAncestor(H,At.not(Ai.isInline));d=Au.last(b),Ai.isInline(d)||(d=b[b.length-2]||H.childNodes[D])}else{d=H.childNodes[D>0?D-1:0]}var K=Ai.listPrev(d,Ai.isParaInline).reverse();if(K=K.concat(Ai.listNext(d.nextSibling,Ai.isParaInline)),K.length){var J=Ai.wrap(Au.head(K),"p");Ai.appendChildNodes(J,Au.tail(K))}return this.normalize()},this.insertNode=function(d){var J=this.wrapBodyInlineWithPara().deleteContents(),K=Ai.splitPoint(J.getStartPoint(),Ai.isInline(d));return K.rightNode?K.rightNode.parentNode.insertBefore(d,K.rightNode):K.container.appendChild(d),d},this.toString=function(){var J=F();return L.isW3CRangeSupport?J.toString():J.text},this.bookmark=function(J){return{s:{path:Ai.makeOffsetPath(J,H),offset:D},e:{path:Ai.makeOffsetPath(J,E),offset:I}}},this.paraBookmark=function(J){return{s:{path:Au.tail(Ai.makeOffsetPath(Au.head(J),H)),offset:D},e:{path:Au.tail(Ai.makeOffsetPath(Au.last(J),E)),offset:I}}},this.getClientRects=function(){var J=F();return J.getClientRects()}};return{create:function(b,K,d,e){if(arguments.length){2===arguments.length&&(d=b,e=K)}else{if(L.isW3CRangeSupport){var E=document.getSelection();if(0===E.rangeCount){return null}if(Ai.isBody(E.anchorNode)){return null}var F=E.getRangeAt(0);b=F.startContainer,K=F.startOffset,d=F.endContainer,e=F.endOffset}else{var D=document.selection.createRange(),I=D.duplicate();I.collapse(!1);var J=D;J.collapse(!0);var G=B(J,!0),H=B(I,!1);Ai.isText(G.node)&&Ai.isLeftEdgePoint(G)&&Ai.isTextNode(H.node)&&Ai.isRightEdgePoint(H)&&H.node.nextSibling===G.node&&(G=H),b=G.cont,K=G.offset,d=H.cont,e=H.offset}}return new A(b,K,d,e)},createFromNode:function(H){var F=H,G=0,D=H,E=Ai.nodeLength(D);return Ai.isVoid(F)&&(G=Ai.listPrev(F).length-1,F=F.parentNode),Ai.isBR(D)?(E=Ai.listPrev(D).length-1,D=D.parentNode):Ai.isVoid(D)&&(E=Ai.listPrev(D).length,D=D.parentNode),this.create(F,G,D,E)},createFromBookmark:function(H,F){var G=Ai.fromOffsetPath(H,F.s.path),E=F.s.offset,I=Ai.fromOffsetPath(H,F.e.path),D=F.e.offset;return new A(G,E,I,D)},createFromParaBookmark:function(H,F){var G=H.s.offset,E=H.e.offset,I=Ai.fromOffsetPath(Au.head(F),H.s.path),D=Ai.fromOffsetPath(Au.last(F),H.e.path);return new A(I,G,D,E)}}}(),Ao={version:"0.6.4",options:{width:null,height:null,minHeight:null,maxHeight:null,focus:!1,tabsize:4,styleWithSpan:!0,disableLinkTarget:!1,disableDragAndDrop:!1,disableResizeEditor:!1,shortcuts:!0,placeholder:!1,prettifyHtml:!0,iconPrefix:"fa fa-",codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},lang:"en-US",direction:null,toolbar:[["style",["style"]],["font",["bold","italic","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture","hr"]],["view",["fullscreen","codeview"]],["help",["help"]]],airMode:!1,airPopover:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]],styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],defaultFontName:"Helvetica Neue",fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontNamesIgnoreCheck:[],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],insertTableMaxSize:{col:10,row:10},maximumImageFileSize:null,oninit:null,onfocus:null,onblur:null,onenter:null,onkeyup:null,onkeydown:null,onImageUpload:null,onImageUploadError:null,onMediaDelete:null,onToolbarClick:null,onsubmit:null,onCreateLink:function(A){return -1!==A.indexOf("@")&&-1===A.indexOf(":")?A="mailto:"+A:-1===A.indexOf("://")&&(A="http://"+A),A},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"showLinkDialog"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"showLinkDialog"}}},lang:{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},history:{undo:"Undo",redo:"Redo"}}}},Ap=function(){var A=function(C){return As.Deferred(function(D){As.extend(new FileReader,{onload:function(F){var E=F.target.result;D.resolve(E)},onerror:function(){D.reject(this)}}).readAsDataURL(C)}).promise()},B=function(C,D){return As.Deferred(function(E){var F=As("<img>");F.one("load",function(){F.off("error abort"),E.resolve(F)}).one("error abort",function(){F.off("load").detach(),E.reject(F)}).css({display:"none"}).appendTo(document.body).attr({src:C,"data-filename":D})}).promise()};return{readFileAsDataURL:A,createImage:B}}(),Am={isEdit:function(A){return Au.contains([8,9,13,32],A)},nameFromCode:{8:"BACKSPACE",9:"TAB",13:"ENTER",32:"SPACE",48:"NUM0",49:"NUM1",50:"NUM2",51:"NUM3",52:"NUM4",53:"NUM5",54:"NUM6",55:"NUM7",56:"NUM8",66:"B",69:"E",73:"I",74:"J",75:"K",76:"L",82:"R",83:"S",85:"U",89:"Y",90:"Z",191:"SLASH",219:"LEFTBRACKET",220:"BACKSLASH",221:"RIGHTBRACKET"}},An=function(E){var C=[],D=-1,A=E[0],B=function(){var G=Aj.create(),H={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:E.html(),bookmark:G?G.bookmark(A):H}},F=function(G){null!==G.contents&&E.html(G.contents),null!==G.bookmark&&Aj.createFromBookmark(A,G.bookmark).select()};this.undo=function(){D>0&&(D--,F(C[D]))},this.redo=function(){C.length-1>D&&(D++,F(C[D]))},this.recordUndo=function(){D++,C.length>D&&(C=C.slice(0,D)),C.push(B())},this.recordUndo()},Ac=function(){var A=function(C,D){if(L.jqueryVersion<1.9){var B={};return As.each(D,function(F,E){B[E]=C.css(E)}),B}return C.css.call(C,D)};this.stylePara=function(B,C){As.each(B.nodes(Ai.isPara,{includeAncestor:!0}),function(E,D){As(D).css(C)})},this.styleNodes=function(G,H){G=G.splitText();var I=H&&H.nodeName||"SPAN",B=!(!H||!H.expandClosestSibling),D=!(!H||!H.onlyPartialContains);if(G.isCollapsed()){return G.insertNode(Ai.create(I))}var E=Ai.makePredByNodeName(I),C=As.map(G.nodes(Ai.isText,{fullyContains:!0}),function(J){return Ai.singleChildAncestor(J,E)||Ai.wrap(J,I)});if(B){if(D){var F=G.nodes();E=At.and(E,function(J){return Au.contains(F,J)})}return As.map(C,function(a){var f=Ai.withClosestSiblings(a,E),J=Au.head(f),K=Au.tail(f);return As.each(K,function(d,c){Ai.appendChildNodes(J,c.childNodes),Ai.remove(c)}),Au.head(f)})}return C},this.current=function(G,J){var B=As(Ai.isText(G.sc)?G.sc.parentNode:G.sc),H=["font-family","font-size","text-align","list-style-type","line-height"],I=A(B,H)||{};if(I["font-size"]=parseInt(I["font-size"],10),I["font-bold"]=document.queryCommandState("bold")?"bold":"normal",I["font-italic"]=document.queryCommandState("italic")?"italic":"normal",I["font-underline"]=document.queryCommandState("underline")?"underline":"normal",I["font-strikethrough"]=document.queryCommandState("strikeThrough")?"strikethrough":"normal",I["font-superscript"]=document.queryCommandState("superscript")?"superscript":"normal",I["font-subscript"]=document.queryCommandState("subscript")?"subscript":"normal",G.isOnList()){var D=["circle","disc","disc-leading-zero","square"],E=As.inArray(I["list-style-type"],D)>-1;I["list-style"]=E?"unordered":"ordered"}else{I["list-style"]="none"}var C=Ai.ancestor(G.sc,Ai.isPara);if(C&&C.style["line-height"]){I["line-height"]=C.style.lineHeight}else{var F=parseInt(I["line-height"],10)/parseInt(I["font-size"],10);I["line-height"]=F.toFixed(1)}return I.image=Ai.isImg(J)&&J,I.anchor=G.isOnAnchor()&&Ai.ancestor(G.sc,Ai.isAnchor),I.ancestors=Ai.listAncestor(G.sc,Ai.isEditable),I.range=G,I}},Ad=function(){this.insertTab=function(D,B,C){var A=Ai.createText(new Array(C+1).join(Ai.NBSP_CHAR));B=B.deleteContents(),B.insertNode(A,!0),B=Aj.create(A,C),B.select()},this.insertParagraph=function(){var C=Aj.create();C=C.deleteContents(),C=C.wrapBodyInlineWithPara();var D,A=Ai.ancestor(C.sc,Ai.isPara);if(A){D=Ai.splitTree(A,C.getStartPoint());var B=Ai.listDescendant(A,Ai.isEmptyAnchor);B=B.concat(Ai.listDescendant(D,Ai.isEmptyAnchor)),As.each(B,function(G,F){Ai.remove(F)})}else{var E=C.sc.childNodes[C.so];D=As(Ai.emptyPara)[0],E?C.sc.insertBefore(D,E):C.sc.appendChild(D)}Aj.create(D,0).normalize().select()}},Aa=function(){this.tab=function(E,C){var D=Ai.ancestor(E.commonAncestor(),Ai.isCell),A=Ai.ancestor(D,Ai.isTable),B=Ai.listDescendant(A,Ai.isCell),F=Au[C?"prev":"next"](B,D);F&&Aj.create(F,0).select()},this.createTable=function(D,E){for(var H,A=[],F=0;D>F;F++){A.push("<td>"+Ai.blank+"</td>")}H=A.join("");for(var G,B=[],C=0;E>C;C++){B.push("<tr>"+H+"</tr>")}return G=B.join(""),As('<table class="table table-bordered">'+G+"</table>")[0]}},Ab=function(){this.insertOrderedList=function(){this.toggleList("OL")},this.insertUnorderedList=function(){this.toggleList("UL")},this.indent=function(){var C=this,D=Aj.create().wrapBodyInlineWithPara(),A=D.nodes(Ai.isPara,{includeAncestor:!0}),B=Au.clusterBy(A,At.peq2("parentNode"));As.each(B,function(G,E){var F=Au.head(E);Ai.isLi(F)?C.wrapList(E,F.parentNode.nodeName):As.each(E,function(H,I){As(I).css("marginLeft",function(K,J){return(parseInt(J,10)||0)+25})})}),D.select()},this.outdent=function(){var C=this,D=Aj.create().wrapBodyInlineWithPara(),A=D.nodes(Ai.isPara,{includeAncestor:!0}),B=Au.clusterBy(A,At.peq2("parentNode"));As.each(B,function(G,E){var F=Au.head(E);Ai.isLi(F)?C.releaseList([E]):As.each(E,function(H,I){As(I).css("marginLeft",function(K,J){return J=parseInt(J,10)||0,J>25?J-25:""})})}),D.select()},this.toggleList=function(F){var G=this,H=Aj.create().wrapBodyInlineWithPara(),A=H.nodes(Ai.isPara,{includeAncestor:!0}),B=H.paraBookmark(A),C=Au.clusterBy(A,At.peq2("parentNode"));if(Au.find(A,Ai.isPurePara)){var D=[];As.each(C,function(J,I){D=D.concat(G.wrapList(I,F))}),A=D}else{var E=H.nodes(Ai.isList,{includeAncestor:!0}).filter(function(I){return !As.nodeName(I,F)});E.length?As.each(E,function(J,I){Ai.replace(I,F)}):A=this.releaseList(C,!0)}Aj.createFromParaBookmark(B,A).select()},this.wrapList=function(E,F){var B=Au.head(E),C=Au.last(E),G=Ai.isList(B.previousSibling)&&B.previousSibling,A=Ai.isList(C.nextSibling)&&C.nextSibling,D=G||Ai.insertAfter(Ai.create(F||"UL"),C);return E=As.map(E,function(H){return Ai.isPurePara(H)?Ai.replace(H,"LI"):H}),Ai.appendChildNodes(D,E),A&&(Ai.appendChildNodes(D,Au.from(A.childNodes)),Ai.remove(A)),E},this.releaseList=function(B,C){var A=[];return As.each(B,function(J,D){var K=Au.head(D),F=Au.last(D),G=C?Ai.lastAncestor(K,Ai.isList):K.parentNode,E=G.childNodes.length>1?Ai.splitTree(G,{node:F.parentNode,offset:Ai.position(F)+1},!0):null,H=Ai.splitTree(G,{node:K.parentNode,offset:Ai.position(K)},!0);D=C?Ai.listDescendant(H,Ai.isLi):Au.from(H.childNodes).filter(Ai.isLi),(C||!Ai.isList(G.parentNode))&&(D=As.map(D,function(b){return Ai.replace(b,"P")})),As.each(Au.from(D).reverse(),function(d,c){Ai.insertAfter(c,G)});var I=Au.compact([G,H,E]);As.each(I,function(e,f){var a=[f].concat(Ai.listDescendant(f,Ai.isList));As.each(a.reverse(),function(d,c){Ai.nodeLength(c)||Ai.remove(c,!0)})}),A=A.concat(D)}),A}},Ag=function(){var H=new Ac,I=new Aa,K=new Ad,J=new Ab;this.createRange=function(b){return b.focus(),Aj.create()},this.saveRange=function(d,c){d.focus(),d.data("range",Aj.create()),c&&Aj.create().collapse().select()},this.saveNode=function(h){for(var f=[],g=0,e=h[0].childNodes.length;e>g;g++){f.push(h[0].childNodes[g])}h.data("childNodes",f)},this.restoreRange=function(d){var c=d.data("range");c&&(c.select(),d.focus())},this.restoreNode=function(h){h.html("");for(var f=h.data("childNodes"),g=0,e=f.length;e>g;g++){h[0].appendChild(f[g])}},this.currentStyle=function(d){var b=Aj.create();return b?b.isOnEditable()&&H.current(b,d):!1};var C=this.triggerOnBeforeChange=function(d){var c=d.data("callbacks").onBeforeChange;c&&c(d.html(),d)},D=this.triggerOnChange=function(d){var c=d.data("callbacks").onChange;c&&c(d.html(),d)};this.undo=function(b){C(b),b.data("NoteHistory").undo(),D(b)},this.redo=function(b){C(b),b.data("NoteHistory").redo(),D(b)};for(var G=this.beforeCommand=function(b){C(b)},E=this.afterCommand=function(b){b.data("NoteHistory").recordUndo(),D(b)},F=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","insertHorizontalRule","fontName"],A=0,B=F.length;B>A;A++){this[F[A]]=function(b){return function(a,d){G(a),document.execCommand(b,!1,d),E(a)}}(F[A])}this.tab=function(f,d){var c=Aj.create();c.isCollapsed()&&c.isOnCell()?I.tab(c):(G(f),K.insertTab(f,c,d.tabsize),E(f))},this.untab=function(){var b=Aj.create();b.isCollapsed()&&b.isOnCell()&&I.tab(b,!0)},this.insertParagraph=function(b){G(b),K.insertParagraph(b),E(b)},this.insertOrderedList=function(b){G(b),J.insertOrderedList(b),E(b)},this.insertUnorderedList=function(b){G(b),J.insertUnorderedList(b),E(b)},this.indent=function(b){G(b),J.indent(b),E(b)},this.outdent=function(b){G(b),J.outdent(b),E(b)},this.insertImage=function(f,d,e){Ap.createImage(d,e).then(function(a){G(f),a.css({display:"",width:Math.min(f.width(),a.width())}),Aj.create().insertNode(a[0]),Aj.createFromNode(a[0]).collapse().select(),E(f)}).fail(function(){var a=f.data("callbacks");a.onImageUploadError&&a.onImageUploadError()})},this.insertNode=function(f,d){G(f);var e=this.createRange(f);e.insertNode(d),Aj.createFromNode(d).collapse().select(),E(f)},this.insertText=function(h,f){G(h);var g=this.createRange(h),e=g.insertNode(Ai.createText(f));Aj.create(e,Ai.nodeLength(e)).select(),E(h)},this.formatBlock=function(d,c){G(d),c=L.isMSIE?"<"+c+">":c,document.execCommand("FormatBlock",!1,c),E(d)},this.formatPara=function(b){G(b),this.formatBlock(b,"P"),E(b)};for(var A=1;6>=A;A++){this["formatH"+A]=function(b){return function(a){this.formatBlock(a,"H"+b)}}(A)}this.fontSize=function(g,a){G(g);var b=this.createRange(g),h=H.styleNodes(b);As.each(h,function(d,e){As(e).css({"font-size":a+"px"})}),E(g)},this.lineHeight=function(d,b){G(d),H.stylePara(Aj.create(),{lineHeight:b}),E(d)},this.unlink=function(f){var d=Aj.create();if(d.isOnAnchor()){var e=Ai.ancestor(d.sc,Ai.isAnchor);d=Aj.createFromNode(e),d.select(),G(f),document.execCommand("unlink"),E(f)}},this.createLink=function(z,Ax,a){var Aw=Ax.url,v=Ax.text,w=Ax.newWindow,n=Ax.range,y=n.toString()!==v;G(z),a.onCreateLink&&(Aw=a.onCreateLink(Aw));var x;if(y){var g=n.insertNode(As("<A>"+v+"</A>")[0]);x=[g]}else{x=H.styleNodes(n,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0})}As.each(x,function(d,e){As(e).attr("href",Aw),w?As(e).attr("target","_blank"):As(e).removeAttr("target")});var k=Aj.createFromNode(Au.head(x)).collapse(!0),l=k.getStartPoint(),b=Aj.createFromNode(Au.last(x)).collapse(),u=b.getEndPoint();Aj.create(l.node,l.offset,u.node,u.offset).select(),E(z)},this.getLinkInfo=function(e){e.focus();var f=Aj.create().expand(Ai.isAnchor),a=As(Au.head(f.nodes(Ai.isAnchor)));return{range:f,text:f.toString(),isNewWindow:a.length?"_blank"===a.attr("target"):!1,url:a.length?a.attr("href"):""}},this.color=function(j,h){var i=JSON.parse(h),f=i.foreColor,g=i.backColor;G(j),f&&document.execCommand("foreColor",!1,f),g&&document.execCommand("backColor",!1,g),E(j)},this.insertTable=function(h,g){var c=g.split("x");G(h);var f=Aj.create();f=f.deleteContents(),f.insertNode(I.createTable(c[0],c[1])),E(h)},this.floatMe=function(f,d,e){G(f),e.css("float",d),E(f)},this.imageShape=function(f,d,e){G(f),e.removeClass("img-rounded img-circle img-thumbnail"),d&&e.addClass(d),E(f)},this.resize=function(f,d,e){G(f),e.css({width:100*d+"%",height:""}),E(f)},this.resizeTo=function(k,i,j){var g;if(j){var h=k.y/k.x,l=i.data("ratio");g={width:l>h?k.x:k.y/l,height:l>h?k.x*l:k.y}}else{g={width:k.x,height:k.y}}i.css(g)},this.removeMedia=function(h,f,g){G(h),g.detach();var e=h.data("callbacks");e&&e.onMediaDelete&&e.onMediaDelete(g,this,h),E(h)},this.focus=function(b){b.focus()}},Ah=function(){this.update=function(J,K){var q=function(d,f){d.find(".dropdown-menu li a").each(function(){var c=As(this).data("value")+""==f+"";this.className=c?"checked":""})},a=function(g,f){var b=J.find(g);b.toggleClass("active",f())};if(K.image){var e=As(K.image);a('button[data-event="imageShape"][data-value="img-rounded"]',function(){return e.hasClass("img-rounded")}),a('button[data-event="imageShape"][data-value="img-circle"]',function(){return e.hasClass("img-circle")}),a('button[data-event="imageShape"][data-value="img-thumbnail"]',function(){return e.hasClass("img-thumbnail")}),a('button[data-event="imageShape"]:not([data-value])',function(){return !e.is(".img-rounded, .img-circle, .img-thumbnail")});var D=e.css("float");a('button[data-event="floatMe"][data-value="left"]',function(){return"left"===D}),a('button[data-event="floatMe"][data-value="right"]',function(){return"right"===D}),a('button[data-event="floatMe"][data-value="none"]',function(){return"left"!==D&&"right"!==D});var E=e.attr("style");return a('button[data-event="resize"][data-value="1"]',function(){return !!/(^|\s)(max-)?width\s*:\s*100%/.test(E)}),a('button[data-event="resize"][data-value="0.5"]',function(){return !!/(^|\s)(max-)?width\s*:\s*50%/.test(E)}),void a('button[data-event="resize"][data-value="0.25"]',function(){return !!/(^|\s)(max-)?width\s*:\s*25%/.test(E)})}var B=J.find(".note-fontname");if(B.length){var C=K["font-family"];if(C){for(var H=C.split(","),I=0,F=H.length;F>I&&(C=H[I].replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,""),!L.isFontInstalled(C));I++){}B.find(".note-current-fontname").text(C),q(B,C)}}var G=J.find(".note-fontsize");G.find(".note-current-fontsize").text(K["font-size"]),q(G,parseFloat(K["font-size"]));var A=J.find(".note-height");q(A,parseFloat(K["line-height"])),a('button[data-event="bold"]',function(){return"bold"===K["font-bold"]}),a('button[data-event="italic"]',function(){return"italic"===K["font-italic"]}),a('button[data-event="underline"]',function(){return"underline"===K["font-underline"]}),a('button[data-event="strikethrough"]',function(){return"strikethrough"===K["font-strikethrough"]}),a('button[data-event="superscript"]',function(){return"superscript"===K["font-superscript"]}),a('button[data-event="subscript"]',function(){return"subscript"===K["font-subscript"]}),a('button[data-event="justifyLeft"]',function(){return"left"===K["text-align"]||"start"===K["text-align"]}),a('button[data-event="justifyCenter"]',function(){return"center"===K["text-align"]}),a('button[data-event="justifyRight"]',function(){return"right"===K["text-align"]}),a('button[data-event="justifyFull"]',function(){return"justify"===K["text-align"]}),a('button[data-event="insertUnorderedList"]',function(){return"unordered"===K["list-style"]}),a('button[data-event="insertOrderedList"]',function(){return"ordered"===K["list-style"]})},this.updateRecentColor=function(E,F,B){var C=As(E).closest(".note-color"),G=C.find(".note-recent-color"),A=JSON.parse(G.attr("data-value"));A[F]=B,G.attr("data-value",JSON.stringify(A));var D="backColor"===F?"background-color":"color";G.find("i").css(D,B)}},Ae=function(){var A=new Ah;this.update=function(B,C){A.update(B,C)},this.updateRecentColor=function(C,D,B){A.updateRecentColor(C,D,B)},this.activate=function(B){B.find("button").not('button[data-event="codeview"]').removeClass("disabled")},this.deactivate=function(B){B.find("button").not('button[data-event="codeview"]').addClass("disabled")},this.updateFullscreen=function(D,B){var C=D.find('button[data-event="fullscreen"]');C.toggleClass("active",B)},this.updateCodeview=function(D,B){var C=D.find('button[data-event="codeview"]');C.toggleClass("active",B),B?this.deactivate(D):this.activate(D)},this.get=function(D,B){var C=Ai.makeLayoutInfo(D).toolbar();return C.find("[data-name="+B+"]")},this.setButtonState=function(E,C,D){D=D===!1?!1:!0;var B=this.get(E,C);B.toggleClass("active",D)}},Af=24,Y=function(){var A=As(document);this.attach=function(D,C){C.disableResizeEditor||D.statusbar().on("mousedown",B)};var B=function(F){F.preventDefault(),F.stopPropagation();var E=Ai.makeLayoutInfo(F.target).editable(),C=E.offset().top-A.scrollTop(),D=Ai.makeLayoutInfo(F.currentTarget||F.target),G=D.editor().data("options");A.on("mousemove",function(I){var H=I.clientY-(C+Af);H=G.minHeight>0?Math.max(H,G.minHeight):H,H=G.maxHeight>0?Math.min(H,G.maxHeight):H,E.height(H)}).one("mouseup",function(){A.off("mousemove")})}},Z=function(){var C=new Ah,D=function(G,H){var E=As(G),F=H?E.offset():E.position(),I=E.outerHeight(!0);return{left:F.left,top:F.top+I}},A=function(F,E){F.css({display:"block",left:E.left,top:E.top})},B=20;this.update=function(J,K,H){C.update(J,K);var I=J.find(".note-link-popover");if(K.anchor){var c=I.find("a"),d=As(K.anchor).attr("href"),a=As(K.anchor).attr("target");c.attr("href",d).html(d),a?c.attr("target","_blank"):c.removeAttr("target"),A(I,D(K.anchor,H))}else{I.hide()}var b=J.find(".note-image-popover");K.image?A(b,D(K.image,H)):b.hide();var F=J.find(".note-air-popover");if(H&&!K.range.isCollapsed()){var G=Au.last(K.range.getClientRects());if(G){var E=At.rect2bnd(G);A(F,{left:Math.max(E.left+E.width/2-B,0),top:E.top+E.height})}}else{F.hide()}},this.updateRecentColor=function(G,E,F){G.updateRecentColor(G,E,F)},this.hide=function(E){E.children().hide()}},X=function(B){var C=As(document),A=function(c){if(Ai.isControlSizing(c.target)){c.preventDefault(),c.stopPropagation();var D=Ai.makeLayoutInfo(c.target),a=D.handle(),b=D.popover(),F=D.editable(),G=D.editor(),E=a.find(".note-control-selection").data("target"),J=As(E),K=J.offset(),H=C.scrollTop(),I=G.data("options").airMode;C.on("mousemove",function(d){B.invoke("editor.resizeTo",{x:d.clientX-K.left,y:d.clientY-(K.top-H)},J,!d.shiftKey),B.invoke("handle.update",a,{image:E},I),B.invoke("popover.update",b,{image:E},I)}).one("mouseup",function(){C.off("mousemove"),B.invoke("editor.afterCommand",F)}),J.data("ratio")||J.data("ratio",J.height()/J.width())}};this.attach=function(D){D.handle().on("mousedown",A)},this.update=function(G,H,K){var D=G.find(".note-control-selection");if(H.image){var I=As(H.image),J=K?I.offset():I.position(),E={w:I.outerWidth(!0),h:I.outerHeight(!0)};D.css({display:"block",left:J.left,top:J.top,width:E.w,height:E.h}).data("target",H.image);var F=E.w+"x"+E.h;D.find(".note-control-selection-info").text(F)}else{D.hide()}},this.hide=function(D){D.children().hide()}},S=function(B){var C=As(window),A=As("html, body");this.toggle=function(I){var F=I.editor(),J=I.toolbar(),D=I.editable(),E=I.codable(),G=function(K){D.css("height",K.h),E.css("height",K.h),E.data("cmeditor")&&E.data("cmeditor").setsize(null,K.h)};F.toggleClass("fullscreen");var H=F.hasClass("fullscreen");H?(D.data("orgheight",D.css("height")),C.on("resize",function(){G({h:C.height()-J.outerHeight()})}).trigger("resize"),A.css("overflow","hidden")):(C.off("resize"),G({h:D.data("orgheight")}),A.css("overflow","visible")),B.invoke("toolbar.updateFullscreen",J,H)}};L.hasCodeMirror&&(L.isSupportAmd?require(["CodeMirror"],function(A){Aq=A}):Aq=window.CodeMirror);var Q=function(A){this.sync=function(B){var C=A.invoke("codeview.isActivated",B);C&&L.hasCodeMirror&&B.codable().data("cmEditor").save()},this.isActivated=function(C){var B=C.editor();return B.hasClass("codeview")},this.toggle=function(B){this.isActivated(B)?this.deactivate(B):this.activate(B)},this.activate=function(H){var K=H.editor(),I=H.toolbar(),J=H.editable(),C=H.codable(),D=H.popover(),B=H.handle(),F=K.data("options");if(C.val(Ai.html(J,F.prettifyHtml)),C.height(J.height()),A.invoke("toolbar.updateCodeview",I,!0),A.invoke("popover.hide",D),A.invoke("handle.hide",B),K.addClass("codeview"),C.focus(),L.hasCodeMirror){var G=Aq.fromTextArea(C[0],F.codemirror);if(F.codemirror.tern){var E=new Aq.TernServer(F.codemirror.tern);G.ternServer=E,G.on("cursorActivity",function(b){E.updateArgHints(b)})}G.setSize(null,J.outerHeight()),C.data("cmEditor",G)}},this.deactivate=function(F){var G=F.editor(),C=F.toolbar(),H=F.editable(),B=F.codable(),D=G.data("options");if(L.hasCodeMirror){var E=B.data("cmEditor");B.val(E.getValue()),E.toTextArea()}H.html(Ai.value(B,D.prettifyHtml)||Ai.emptyPara),H.height(D.height?B.height():"auto"),G.removeClass("codeview"),H.focus(),A.invoke("toolbar.updateCodeview",C,!1)}},R=function(A){var B=As(document);this.attach=function(D,C){C.airMode||C.disableDragAndDrop?B.on("drop",function(E){E.preventDefault()}):this.attachDragAndDropEvent(D,C)},this.attachDragAndDropEvent=function(D,E){var H=As(),C=D.editor(),F=D.dropzone(),G=F.find(".note-dropzone-message");B.on("dragenter",function(J){var I=A.invoke("codeview.isActivated",D),K=C.width()>0&&C.height()>0;I||H.length||!K||(C.addClass("dragover"),F.width(C.width()),F.height(C.height()),G.text(E.langInfo.image.dragImageHere)),H=H.add(J.target)}).on("dragleave",function(I){H=H.not(I.target),H.length||C.removeClass("dragover")}).on("drop",function(){H=As(),C.removeClass("dragover")}),F.on("dragenter",function(){F.addClass("hover"),G.text(E.langInfo.image.dropImage)}).on("dragleave",function(){F.removeClass("hover"),G.text(E.langInfo.image.dragImageHere)}),F.on("drop",function(a){a.preventDefault();var J=a.originalEvent.dataTransfer,K=J.getData("text/html"),b=J.getData("text/plain"),I=Ai.makeLayoutInfo(a.currentTarget||a.target);J&&J.files&&J.files.length?(I.editable().focus(),A.insertImages(I,J.files)):K?As(K).each(function(){I.editable().focus(),A.invoke("editor.insertNode",I.editable(),this)}):b&&(I.editable().focus(),A.invoke("editor.insertText",I.editable(),b))}).on("dragover",!1)}},V=function(A){this.attach=function(C){C.editable().on("paste",B)};var B=function(H){var D=H.originalEvent.clipboardData,E=Ai.makeLayoutInfo(H.currentTarget||H.target),I=E.editable();if(!D||!D.items||!D.items.length){var C=I.data("callbacks");if(!C.onImageUpload){return}return A.invoke("editor.saveNode",I),A.invoke("editor.saveRange",I),I.html(""),void setTimeout(function(){var f=I.find("img");if(f.length&&-1!==f[0].src.indexOf("data:")){for(var n=f[0].src,m=atob(n.split(",")[1]),a=new Uint8Array(m.length),b=0;b<m.length;b++){a[b]=m.charCodeAt(b)}var J=new Blob([a],{type:"image/png"});J.name="clipboard.png",A.invoke("editor.restoreNode",I),A.invoke("editor.restoreRange",I),A.insertImages(E,[J]),A.invoke("editor.afterCommand",I)}else{var K=I.html();A.invoke("editor.restoreNode",I),A.invoke("editor.restoreRange",I);try{As(K).each(function(){I.focus(),A.invoke("editor.insertNode",I,this)})}catch(e){I.focus(),A.invoke("editor.insertText",I,K)}}},0)}var F=Au.head(D.items),G="file"===F.kind&&-1!==F.type.indexOf("image/");G&&A.insertImages(E,[F.getAsFile()]),A.invoke("editor.afterCommand",I)}},W=function(A){var B=function(D,C){D.toggleClass("disabled",!C),D.attr("disabled",!C)};this.showLinkDialog=function(E,C,D){return As.Deferred(function(J){var I=C.find(".note-link-dialog"),K=I.find(".note-link-text"),F=I.find(".note-link-url"),G=I.find(".note-link-btn"),H=I.find("input[type=checkbox]");I.one("shown.bs.modal",function(){K.val(D.text),K.on("input",function(){D.text=K.val()}),D.url||(D.url=D.text,B(G,D.text)),F.on("input",function(){B(G,F.val()),D.text||K.val(F.val())}).val(D.url).trigger("focus").trigger("select"),H.prop("checked",D.newWindow),G.one("click",function(a){a.preventDefault(),J.resolve({range:D.range,url:F.val(),text:K.val(),newWindow:H.is(":checked")}),I.modal("hide")})}).one("hidden.bs.modal",function(){K.off("input"),F.off("input"),G.off("click"),"pending"===J.state()&&J.reject()}).modal("show")}).promise()},this.show=function(H){var G=H.editor(),D=H.dialog(),E=H.editable(),I=H.popover(),C=A.invoke("editor.getLinkInfo",E),F=G.data("options");A.invoke("editor.saveRange",E),this.showLinkDialog(E,D,C).then(function(J){A.invoke("editor.restoreRange",E),A.invoke("editor.createLink",E,J,F),A.invoke("popover.hide",I)}).fail(function(){A.invoke("editor.restoreRange",E)})}},T=function(A){var B=function(D,C){D.toggleClass("disabled",!C),D.attr("disabled",!C)};this.show=function(E){var D=E.dialog(),C=E.editable();A.invoke("editor.saveRange",C),this.showImageDialog(C,D).then(function(F){A.invoke("editor.restoreRange",C),"string"==typeof F?A.invoke("editor.insertImage",C,F):A.insertImages(E,F)}).fail(function(){A.invoke("editor.restoreRange",C)})},this.showImageDialog=function(D,C){return As.Deferred(function(H){var G=C.find(".note-image-dialog"),F=C.find(".note-image-input"),I=C.find(".note-image-url"),E=C.find(".note-image-btn");G.one("shown.bs.modal",function(){F.replaceWith(F.clone().on("change",function(){H.resolve(this.files||this.value),G.modal("hide")}).val("")),E.click(function(J){J.preventDefault(),H.resolve(I.val()),G.modal("hide")}),I.on("keyup paste",function(K){var J;J="paste"===K.type?K.originalEvent.clipboardData.getData("text"):I.val(),B(E,J)}).val("").trigger("focus")}).one("hidden.bs.modal",function(){F.off("change"),I.off("keyup paste"),E.off("click"),"pending"===H.state()&&H.reject()}).modal("show")})}},U=function(A){this.showHelpDialog=function(B,C){return As.Deferred(function(E){var D=C.find(".note-help-dialog");D.one("hidden.bs.modal",function(){E.resolve()}).modal("show")}).promise()},this.show=function(D){var C=D.dialog(),B=D.editable();A.invoke("editor.saveRange",B,!0),this.showHelpDialog(B,C).then(function(){A.invoke("editor.restoreRange",B)})}},O=function(){var G=this.modules={editor:new Ag(this),toolbar:new Ae(this),statusbar:new Y(this),popover:new Z(this),handle:new X(this),fullscreen:new S(this),codeview:new Q(this),dragAndDrop:new R(this),clipboard:new V(this),linkDialog:new W(this),imageDialog:new T(this),helpDialog:new U(this)};this.invoke=function(){var m=Au.head(Au.from(arguments)),k=Au.tail(Au.from(arguments)),l=m.split("."),o=l.length>1,K=o&&Au.head(l),n=o?Au.last(l):Au.head(l),g=this.getModule(K),j=g[n];return j&&j.apply(g,k)},this.getModule=function(K){return this.modules[K]||this.modules.editor},this.insertImages=function(l,a){var b=l.editor(),m=l.editable(),K=l.holder(),j=m.data("callbacks"),k=b.data("options");j.onImageUpload?(j.onImageUpload(a,G.editor,m),B(K,"image.upload")([a])):As.each(a,function(g,f){var e=f.name;k.maximumImageFileSize&&k.maximumImageFileSize<f.size?j.onImageUploadError?(j.onImageUploadError(k.langInfo.image.maximumFileSizeError),B(K,"image.upload.error")(k.langInfo.image.maximumFileSizeError)):alert(k.langInfo.image.maximumFileSizeError):Ap.readFileAsDataURL(f).then(function(c){G.editor.insertImage(m,c,e)}).fail(function(){j.onImageUploadError&&(j.onImageUploadError(),B(K,"image.upload.error")(k.langInfo.image.maximumFileSizeError))})})};var H={showLinkDialog:function(K){G.linkDialog.show(K)},showImageDialog:function(K){G.imageDialog.show(K)},showHelpDialog:function(K){G.helpDialog.show(K)},fullscreen:function(K){G.fullscreen.toggle(K)},codeview:function(K){G.codeview.toggle(K)}},J=function(K){Ai.isImg(K.target)&&K.preventDefault()},I=function(K){setTimeout(function(){var f=Ai.makeLayoutInfo(K.currentTarget||K.target),a=G.editor.currentStyle(K.target);if(a){var b=f.editor().data("options").airMode;b||G.toolbar.update(f.toolbar(),a),G.popover.update(f.popover(),a,b),G.handle.update(f.handle(),a,b)}},0)},D=function(b){var K=Ai.makeLayoutInfo(b.currentTarget||b.target);G.popover.hide(K.popover()),G.handle.hide(K.handle())},E=function(K){var a=As(K.target).closest("[data-event]");a.length&&K.preventDefault()},C=function(u){var K=As(u.target).closest("[data-event]");if(K.length){var f,g=K.attr("data-event"),c=K.attr("data-value"),s=K.attr("data-hide"),t=Ai.makeLayoutInfo(u.target);if(-1!==As.inArray(g,["resize","floatMe","removeMedia","imageShape"])){var j=t.handle().find(".note-control-selection");f=As(j.data("target"))}if(s&&K.parents(".popover").hide(),As.isFunction(As.summernote.pluginEvents[g])){As.summernote.pluginEvents[g](u,G.editor,t,c)}else{if(G.editor[g]){var r=t.editable();r.focus(),G.editor[g](r,c,f),u.preventDefault()}else{H[g]&&(H[g].call(this,t),u.preventDefault())}}if(-1!==As.inArray(g,["backColor","foreColor"])){var a=t.editor().data("options",a),b=a.airMode?G.popover:G.toolbar;b.updateRecentColor(Au.head(K),g,c)}I(u)}},F=18,A=function(o,p){var s,K=As(o.target.parentNode),q=K.next(),r=K.find(".note-dimension-picker-mousecatcher"),m=K.find(".note-dimension-picker-highlighted"),n=K.find(".note-dimension-picker-unhighlighted");if(void 0===o.offsetX){var a=As(o.target).offset();s={x:o.pageX-a.left,y:o.pageY-a.top}}else{s={x:o.offsetX,y:o.offsetY}}var l={c:Math.ceil(s.x/F)||1,r:Math.ceil(s.y/F)||1};m.css({width:l.c+"em",height:l.r+"em"}),r.attr("data-value",l.c+"x"+l.r),3<l.c&&l.c<p.insertTableMaxSize.col&&n.css({width:l.c+1+"em"}),3<l.r&&l.r<p.insertTableMaxSize.row&&n.css({height:l.r+1+"em"}),q.html(l.c+" x "+l.r)},B=function(c,K){return function(){return c.trigger("summernote."+K,arguments)}};this.bindKeyMap=function(a,b){var c=a.editor(),K=a.editable();K.on("keydown",function(d){var e=[];d.metaKey&&e.push("CMD"),d.ctrlKey&&!d.altKey&&e.push("CTRL"),d.shiftKey&&e.push("SHIFT");var g=Am.nameFromCode[d.keyCode];g&&e.push(g);var m=b[e.join("+")];if(m){if(As.summernote.pluginEvents[m]){var f=As.summernote.pluginEvents[m];As.isFunction(f)&&f(d,G.editor,a)}else{G.editor[m]?(G.editor[m](K,c.data("options")),d.preventDefault()):H[m]&&(H[m].call(this,a),d.preventDefault())}}else{Am.isEdit(d.keyCode)&&G.editor.afterCommand(K)}})},this.attach=function(h,g){g.shortcuts&&this.bindKeyMap(h,g.keyMap[L.isMac?"mac":"pc"]),h.editable().on("mousedown",J),h.editable().on("keyup mouseup",I),h.editable().on("scroll",D),G.clipboard.attach(h,g),G.handle.attach(h,g),h.popover().on("click",C),h.popover().on("mousedown",E),G.dragAndDrop.attach(h,g),g.airMode||(h.toolbar().on("click",C),h.toolbar().on("mousedown",E),G.statusbar.attach(h,g));var d=g.airMode?h.popover():h.toolbar(),e=d.find(".note-dimension-picker-mousecatcher");e.css({width:g.insertTableMaxSize.col+"em",height:g.insertTableMaxSize.row+"em"}).on("mousemove",function(c){A(c,g)}),h.editor().data("options",g),L.isMSIE||setTimeout(function(){document.execCommand("styleWithCSS",0,g.styleWithSpan)},0);var f=new An(h.editable());if(h.editable().data("NoteHistory",f),g.onenter&&h.editable().keypress(function(c){c.keyCode===Am.ENTER&&g.onenter(c)}),g.onfocus&&h.editable().focus(g.onfocus),g.onblur&&h.editable().blur(g.onblur),g.onkeyup&&h.editable().keyup(g.onkeyup),g.onkeydown&&h.editable().keydown(g.onkeydown),g.onpaste&&h.editable().on("paste",g.onpaste),g.onToolbarClick&&h.toolbar().click(g.onToolbarClick),g.onChange){var K=function(){G.editor.triggerOnChange(h.editable())};if(L.isMSIE){var b="DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted";h.editable().on(b,K)}else{h.editable().on("input",K)}}h.editable().data("callbacks",{onBeforeChange:g.onBeforeChange,onChange:g.onChange,onAutoSave:g.onAutoSave,onImageUpload:g.onImageUpload,onImageUploadError:g.onImageUploadError,onFileUpload:g.onFileUpload,onFileUploadError:g.onFileUpload,onMediaDelete:g.onMediaDelete}),Ai.isTextarea(Au.head(h.holder()))&&h.holder().closest("form").submit(function(){var a=h.holder().code();h.holder().val(a),g.onsubmit&&g.onsubmit(a)})},this.attachCustomEvent=function(j,l){var a=j.holder(),m=j.editable();if(m.on("mousedown",B(a,"mousedown")),m.on("keyup mouseup",B(a,"update")),m.on("scroll",B(a,"scroll")),m.keypress(function(b){b.keyCode===Am.ENTER&&B(a,"enter").call(this,b)}),m.focus(B(a,"focus")),m.blur(B(a,"blur")),m.keyup(B(a,"keyup")),m.keydown(B(a,"keydown")),m.on("paste",B(a,"paste")),l.airMode||(j.toolbar().click(B(a,"toolbar.click")),j.popover().click(B(a,"popover.click"))),L.isMSIE){var K="DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted";m.on(K,B(a,"change"))}else{m.on("input",B(a,"change"))}Ai.isTextarea(Au.head(a))&&a.closest("form").submit(function(d){var c=a.code();B(a,"submit").call(this,d,c)}),B(a,"init")();for(var e=0,g=As.summernote.plugins.length;g>e;e++){As.isFunction(As.summernote.plugins[e].init)&&As.summernote.plugins[e].init(j)}},this.detach=function(c,K){c.holder().off(),c.editable().off(),c.popover().off(),c.handle().off(),c.dialog().off(),K.airMode||(c.dropzone().off(),c.toolbar().off(),c.statusbar().off())}},P=function(){var z=function(n,l){var m=l.event,q=l.value,i=l.title,o=l.className,p=l.dropdown,k=l.hide;return'<button type="button" class="btn btn-default btn-sm btn-small'+(o?" "+o:"")+(p?" dropdown-toggle":"")+'"'+(p?' data-toggle="dropdown"':"")+(i?' title="'+i+'"':"")+(m?' data-event="'+m+'"':"")+(q?" data-value='"+q+"'":"")+(k?" data-hide='"+k+"'":"")+' tabindex="-1">'+n+(p?' <span class="caret"></span>':"")+"</button>"+(p||"")},Aw=function(h,g){var b='<i class="'+h+'"></i>';return z(b,g)},Ay=function(h,i){var g=As('<div class="'+h+' popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content"></div></div>');return g.find(".popover-content").append(i),g},Ax=function(k,h,i,g){return'<div class="'+k+' modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content">'+(h?'<div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button><h4 class="modal-title">'+h+"</h4></div>":"")+'<form class="note-modal-form"><div class="modal-body">'+i+"</div>"+(g?'<div class="modal-footer">'+g+"</div>":"")+"</form></div></div></div>"},J={picture:function(d,c){return Aw(c.iconPrefix+"picture-o",{event:"showImageDialog",title:d.image.image,hide:!0})},link:function(d,c){return Aw(c.iconPrefix+"link",{event:"showLinkDialog",title:d.link.link,hide:!0})},table:function(h,g){var c='<ul class="note-table dropdown-menu"><div class="note-dimension-picker"><div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div><div class="note-dimension-picker-highlighted"></div><div class="note-dimension-picker-unhighlighted"></div></div><div class="note-dimension-display"> 1 x 1 </div></ul>';return Aw(g.iconPrefix+"table",{title:h.table.table,dropdown:c})},style:function(h,g){var c=g.styleTags.reduce(function(k,l){var i=h.style["p"===l?"normal":l];return k+'<li><a data-event="formatBlock" href="#" data-value="'+l+'">'+("p"===l||"pre"===l?i:"<"+l+">"+i+"</"+l+">")+"</a></li>"},"");return Aw(g.iconPrefix+"magic",{title:h.style.style,dropdown:'<ul class="dropdown-menu">'+c+"</ul>"})},fontname:function(o,n){var k=[],p=n.fontNames.reduce(function(d,c){return L.isFontInstalled(c)||-1!==n.fontNamesIgnoreCheck.indexOf(c)?(k.push(c),d+'<li><a data-event="fontName" href="#" data-value="'+c+'" style="font-family:\''+c+'\'"><i class="'+n.iconPrefix+'check"></i> '+c+"</a></li>"):d},""),b=L.isFontInstalled(n.defaultFontName),l=b?n.defaultFontName:k[0],m='<span class="note-current-fontname">'+l+"</span>";return z(m,{title:o.font.name,dropdown:'<ul class="dropdown-menu">'+p+"</ul>"})},color:function(l,k){var h='<i class="'+k.iconPrefix+'font" style="color:black;background-color:yellow;"></i>',i=z(h,{className:"note-recent-color",title:l.color.recent,event:"color",value:'{"backColor":"yellow"}'}),m='<ul class="dropdown-menu"><li><div class="btn-group"><div class="note-palette-title">'+l.color.background+'</div><div class="note-color-reset" data-event="backColor" data-value="inherit" title="'+l.color.transparent+'">'+l.color.setTransparent+'</div><div class="note-color-palette" data-target-event="backColor"></div></div><div class="btn-group"><div class="note-palette-title">'+l.color.foreground+'</div><div class="note-color-reset" data-event="foreColor" data-value="inherit" title="'+l.color.reset+'">'+l.color.resetToDefault+'</div><div class="note-color-palette" data-target-event="foreColor"></div></div></li></ul>',b=z("",{title:l.color.more,dropdown:m});return i+b},bold:function(d,c){return Aw(c.iconPrefix+"bold",{event:"bold",title:d.font.bold})},italic:function(d,c){return Aw(c.iconPrefix+"italic",{event:"italic",title:d.font.italic})},underline:function(d,c){return Aw(c.iconPrefix+"underline",{event:"underline",title:d.font.underline})},clear:function(d,c){return Aw(c.iconPrefix+"eraser",{event:"removeFormat",title:d.font.clear})},ul:function(d,c){return Aw(c.iconPrefix+"list-ul",{event:"insertUnorderedList",title:d.lists.unordered})},ol:function(d,c){return Aw(c.iconPrefix+"list-ol",{event:"insertOrderedList",title:d.lists.ordered})},paragraph:function(o,n){var r=Aw(n.iconPrefix+"align-left",{title:o.paragraph.left,event:"justifyLeft"}),c=Aw(n.iconPrefix+"align-center",{title:o.paragraph.center,event:"justifyCenter"}),p=Aw(n.iconPrefix+"align-right",{title:o.paragraph.right,event:"justifyRight"}),q=Aw(n.iconPrefix+"align-justify",{title:o.paragraph.justify,event:"justifyFull"}),l=Aw(n.iconPrefix+"outdent",{title:o.paragraph.outdent,event:"outdent"}),m=Aw(n.iconPrefix+"indent",{title:o.paragraph.indent,event:"indent"}),k='<div class="dropdown-menu"><div class="note-align btn-group">'+r+c+p+q+'</div><div class="note-list btn-group">'+m+l+"</div></div>";return Aw(n.iconPrefix+"align-left",{title:o.paragraph.paragraph,dropdown:k})},height:function(h,g){var c=g.lineHeights.reduce(function(d,b){return d+'<li><a data-event="lineHeight" href="#" data-value="'+parseFloat(b)+'"><i class="'+g.iconPrefix+'check"></i> '+b+"</a></li>"},"");return Aw(g.iconPrefix+"text-height",{title:h.font.height,dropdown:'<ul class="dropdown-menu">'+c+"</ul>"})},help:function(d,c){return Aw(c.iconPrefix+"question",{event:"showHelpDialog",title:d.options.help,hide:!0})},fullscreen:function(d,c){return Aw(c.iconPrefix+"arrows-alt",{event:"fullscreen",title:d.options.fullscreen})},codeview:function(d,c){return Aw(c.iconPrefix+"code",{event:"codeview",title:d.options.codeview})},undo:function(d,c){return Aw(c.iconPrefix+"undo",{event:"undo",title:d.history.undo})},redo:function(d,c){return Aw(c.iconPrefix+"repeat",{event:"redo",title:d.history.redo})},hr:function(d,c){return Aw(c.iconPrefix+"minus",{event:"insertHorizontalRule",title:d.hr.insert})}},K=function(d,m){var b=function(){var n=Aw(m.iconPrefix+"edit",{title:d.link.edit,event:"showLinkDialog",hide:!0}),k=Aw(m.iconPrefix+"unlink",{title:d.link.unlink,event:"unlink"}),i='<a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;<div class="note-insert btn-group">'+n+k+"</div>";return Ay("note-link-popover",i)},c=function(){var AD=z('<span class="note-fontsize-10">100%</span>',{title:d.image.resizeFull,event:"resize",value:"1"}),AE=z('<span class="note-fontsize-10">50%</span>',{title:d.image.resizeHalf,event:"resize",value:"0.5"}),v=z('<span class="note-fontsize-10">25%</span>',{title:d.image.resizeQuarter,event:"resize",value:"0.25"}),w=Aw(m.iconPrefix+"align-left",{title:d.image.floatLeft,event:"floatMe",value:"left"}),t=Aw(m.iconPrefix+"align-right",{title:d.image.floatRight,event:"floatMe",value:"right"}),u=Aw(m.iconPrefix+"align-justify",{title:d.image.floatNone,event:"floatMe",value:"none"}),AB=Aw(m.iconPrefix+"square",{title:d.image.shapeRounded,event:"imageShape",value:"img-rounded"}),AC=Aw(m.iconPrefix+"circle-o",{title:d.image.shapeCircle,event:"imageShape",value:"img-circle"}),x=Aw(m.iconPrefix+"picture-o",{title:d.image.shapeThumbnail,event:"imageShape",value:"img-thumbnail"}),y=Aw(m.iconPrefix+"times",{title:d.image.shapeNone,event:"imageShape",value:""}),r=Aw(m.iconPrefix+"trash-o",{title:d.image.remove,event:"removeMedia",value:"none"}),s='<div class="btn-group">'+AD+AE+v+'</div><div class="btn-group">'+w+t+u+'</div><div class="btn-group">'+AB+AC+x+y+'</div><div class="btn-group">'+r+"</div>";return Ay("note-image-popover",s)},l=function(){for(var s=As("<div />"),t=0,u=m.airPopover.length;u>t;t++){for(var p=m.airPopover[t],n=As('<div class="note-'+p[0]+' btn-group">'),o=0,q=p[1].length;q>o;o++){var r=As(J[p[1][o]](d,m));r.attr("data-name",p[1][o]),n.append(r)}s.append(n)}return Ay("note-air-popover",s.children())},h=As('<div class="note-popover" />');return h.append(b()),h.append(c()),m.airMode&&h.append(l()),h},I=function(){return'<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="note-control-sizing note-control-se"></div><div class="note-control-selection-info"></div></div></div>'},f=function(l,i){var k="note-shortcut-col col-xs-6 note-shortcut-",g=[];for(var h in i){i.hasOwnProperty(h)&&g.push('<div class="'+k+'key">'+i[h].kbd+'</div><div class="'+k+'name">'+i[h].text+"</div>")}return'<div class="note-shortcut-row row"><div class="'+k+'title col-xs-offset-6">'+l+'</div></div><div class="note-shortcut-row row">'+g.join('</div><div class="note-shortcut-row row">')+"</div>"},j=function(d){var c=[{kbd:"⌘ + B",text:d.font.bold},{kbd:"⌘ + I",text:d.font.italic},{kbd:"⌘ + U",text:d.font.underline},{kbd:"⌘ + \\",text:d.font.clear}];return f(d.shortcut.textFormatting,c)},a=function(d){var c=[{kbd:"⌘ + Z",text:d.history.undo},{kbd:"⌘ + ⇧ + Z",text:d.history.redo},{kbd:"⌘ + ]",text:d.paragraph.indent},{kbd:"⌘ + [",text:d.paragraph.outdent},{kbd:"⌘ + ENTER",text:d.hr.insert}];return f(d.shortcut.action,c)},e=function(d){var c=[{kbd:"⌘ + ⇧ + L",text:d.paragraph.left},{kbd:"⌘ + ⇧ + E",text:d.paragraph.center},{kbd:"⌘ + ⇧ + R",text:d.paragraph.right},{kbd:"⌘ + ⇧ + J",text:d.paragraph.justify},{kbd:"⌘ + ⇧ + NUM7",text:d.lists.ordered},{kbd:"⌘ + ⇧ + NUM8",text:d.lists.unordered}];return f(d.shortcut.paragraphFormatting,c)},C=function(d){var c=[{kbd:"⌘ + NUM0",text:d.style.normal},{kbd:"⌘ + NUM1",text:d.style.h1},{kbd:"⌘ + NUM2",text:d.style.h2},{kbd:"⌘ + NUM3",text:d.style.h3},{kbd:"⌘ + NUM4",text:d.style.h4},{kbd:"⌘ + NUM5",text:d.style.h5},{kbd:"⌘ + NUM6",text:d.style.h6}];return f(d.shortcut.documentStyle,c)},D=function(l,i){var k=i.extraKeys,g=[];for(var h in k){k.hasOwnProperty(h)&&g.push({kbd:h,text:k[h]})}return f(l.shortcut.extraKeys,g)},A=function(k,h){var i='class="note-shortcut note-shortcut-col col-sm-6 col-xs-12"',g=["<div "+i+">"+a(k,h)+"</div><div "+i+">"+j(k,h)+"</div>","<div "+i+">"+C(k,h)+"</div><div "+i+">"+e(k,h)+"</div>"];return h.extraKeys&&g.push("<div "+i+">"+D(k,h)+"</div>"),'<div class="note-shortcut-row row">'+g.join('</div><div class="note-shortcut-row row">')+"</div>"},B=function(b){return b.replace(/⌘/g,"Ctrl").replace(/⇧/g,"Shift")},G={image:function(n,l){var m="";if(l.maximumImageFileSize){var i=Math.floor(Math.log(l.maximumImageFileSize)/Math.log(1024)),k=1*(l.maximumImageFileSize/Math.pow(1024,i)).toFixed(2)+"  KMGTP"[i]+"B";m="<small>"+n.image.maximumFileSize+" : "+k+"</small>"}var o='<div class="form-group row-fluid note-group-select-from-files"><label>'+n.image.selectFromFiles+'</label><input class="note-image-input" type="file" name="files" accept="image/*" multiple="multiple" />'+m+'</div><div class="form-group row-fluid"><label>'+n.image.url+'</label><input class="note-image-url form-control span12" type="text" /></div>',g='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+n.image.insert+"</button>";return Ax("note-image-dialog",n.image.insert,o,g)},link:function(k,h){var i='<div class="form-group row-fluid"><label>'+k.link.textToDisplay+'</label><input class="note-link-text form-control span12" type="text" /></div><div class="form-group row-fluid"><label>'+k.link.url+'</label><input class="note-link-url form-control span12" type="text" /></div>'+(h.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+k.link.openInNewWindow+"</label></div>"),g='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+k.link.insert+"</button>";return Ax("note-link-dialog",k.link.insert,i,g)},help:function(h,d){var g='<a class="modal-close pull-right" aria-hidden="true" tabindex="-1">'+h.shortcut.close+'</a><div class="title">'+h.shortcut.shortcuts+"</div>"+(L.isMac?A(h,d):B(A(h,d)))+'<p class="text-center"><a href="//summernote.org/" target="_blank">Summernote 0.6.4</a> · <a href="//github.com/summernote/summernote" target="_blank">Project</a> · <a href="//github.com/summernote/summernote/issues" target="_blank">Issues</a></p>';return Ax("note-help-dialog","",g,"")}},H=function(h,i){var g="";return As.each(G,function(c,b){g+=b(h,i)}),'<div class="note-dialog">'+g+"</div>"},E=function(){return'<div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div>'},F=function(b){return L.isMac&&(b=b.replace("CMD","⌘").replace("SHIFT","⇧")),b.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")},Az=function(l,m,i){var k=At.invertObject(m),h=l.find("button");h.each(function(n,o){var g=As(o),p=k[g.data("event")];p&&g.attr("title",function(d,c){return c+" ("+F(p)+")"})}).tooltip({container:"body",trigger:"hover",placement:i||"top"}).on("click",function(){As(this).tooltip("hide")})},AA=function(h,i){var g=i.colors;h.find(".note-color-palette").each(function(){for(var r=As(this),s=r.attr("data-target-event"),d=[],t=0,u=g.length;u>t;t++){for(var o=g[t],p=[],m=0,n=o.length;n>m;m++){var q=o[m];p.push(['<button type="button" class="note-color-btn" style="background-color:',q,';" data-event="',s,'" data-value="',q,'" title="',q,'" data-toggle="button" tabindex="-1"></button>'].join(""))}d.push('<div class="note-color-row">'+p.join("")+"</div>")}r.html(d.join(""))})};this.createLayoutByAirMode=function(r,s){var u=s.langInfo,t=s.keyMap[L.isMac?"mac":"pc"],k=At.uniqueId();r.addClass("note-air-editor note-editable"),r.attr({id:"note-editor-"+k,contentEditable:!0});var i=document.body,p=As(K(u,s));p.addClass("note-air-layout"),p.attr("id","note-popover-"+k),p.appendTo(i),Az(p,t),AA(p,s);var q=As(I());q.addClass("note-air-layout"),q.attr("id","note-handle-"+k),q.appendTo(i);var o=As(H(u,s));o.addClass("note-air-layout"),o.attr("id","note-dialog-"+k),o.find("button.close, a.modal-close").click(function(){As(this).closest(".modal").modal("hide")}),o.appendTo(i)},this.createLayoutByFrame=function(AE,AF){var AI=AF.langInfo,AG=As('<div class="note-editor"></div>');AF.width&&AG.width(AF.width),AF.height>0&&As('<div class="note-statusbar">'+(AF.disableResizeEditor?"":E())+"</div>").prependTo(AG);var AH=!AE.is(":disabled"),AC=As('<div class="note-editable" contentEditable="'+AH+'"></div>').prependTo(AG);AF.height&&AC.height(AF.height),AF.direction&&AC.attr("dir",AF.direction);var AD=AE.attr("placeholder")||AF.placeholder;AD&&AC.attr("data-placeholder",AD),AC.html(Ai.html(AE)),As('<textarea class="note-codable"></textarea>').prependTo(AG);for(var y=As('<div class="note-toolbar btn-toolbar" />'),AB=0,k=AF.toolbar.length;k>AB;AB++){for(var u=AF.toolbar[AB][0],h=AF.toolbar[AB][1],i=As('<div class="note-'+u+' btn-group" />'),x=0,v=h.length;v>x;x++){var AN=J[h[x]];if(As.isFunction(AN)){var AL=As(AN(AI,AF));AL.attr("data-name",h[x]),i.append(AL)}}y.append(i)}y.prependTo(AG);var AJ=AF.keyMap[L.isMac?"mac":"pc"];AA(y,AF),Az(y,AJ,"bottom");var AK=As(K(AI,AF)).prependTo(AG);AA(AK,AF),Az(AK,AJ),As(I()).prependTo(AG);var AM=As(H(AI,AF)).prependTo(AG);AM.find("button.close, a.modal-close").click(function(){As(this).closest(".modal").modal("hide")}),As('<div class="note-dropzone"><div class="note-dropzone-message"></div></div>').prependTo(AG),AG.insertAfter(AE),AE.hide()},this.hasNoteEditor=function(b){return this.noteEditorFromHolder(b).length>0},this.noteEditorFromHolder=function(c){return c.hasClass("note-air-editor")?c:c.next().hasClass("note-editor")?c.next():As()},this.createLayout=function(d,c){c.airMode?this.createLayoutByAirMode(d,c):this.createLayoutByFrame(d,c)},this.layoutInfoFromHolder=function(d){var c=this.noteEditorFromHolder(d);if(c.length){return c.data("holder",d),Ai.buildLayoutInfo(c)}},this.removeLayout=function(h,d,g){g.airMode?(h.removeClass("note-air-editor note-editable").removeAttr("id contentEditable"),d.popover().remove(),d.handle().remove(),d.dialog().remove()):(h.html(d.editable().html()),d.editor().remove(),h.show())},this.getTemplate=function(){return{button:z,iconButton:Aw,dialog:Ax}},this.addButtonInfo=function(d,c){J[d]=c},this.addDialogInfo=function(d,c){G[d]=c}};As.summernote=As.summernote||{},As.extend(As.summernote,Ao);var M=new P,N=new O;As.extend(As.summernote,{renderer:M,eventHandler:N,core:{agent:L,dom:Ai,range:Aj},pluginEvents:{},plugins:[]}),As.summernote.addPlugin=function(A){As.summernote.plugins.push(A),A.buttons&&As.each(A.buttons,function(C,B){M.addButtonInfo(C,B)}),A.dialogs&&As.each(A.dialogs,function(C,B){M.addDialogInfo(C,B)}),A.events&&As.each(A.events,function(B,C){As.summernote.pluginEvents[B]=C}),A.langs&&As.each(A.langs,function(B,C){As.summernote.lang[B]&&As.extend(As.summernote.lang[B],C)}),A.options&&As.extend(As.summernote.options,A.options)},As.fn.extend({summernote:function(){var F=As.type(Au.head(arguments)),G="string"===F,I="object"===F,A=I?Au.head(arguments):{};A=As.extend({},As.summernote.options,A),A.langInfo=As.extend(!0,{},As.summernote.lang["en-US"],As.summernote.lang[A.lang]),this.each(function(K,a){var J=As(a);if(!M.hasNoteEditor(J)){M.createLayout(J,A);var e=M.layoutInfoFromHolder(J);N.attach(e,A),N.attachCustomEvent(e,A)}}),!G&&this.length&&A.oninit&&A.oninit();var H=this.first();if(H.length){var D=M.layoutInfoFromHolder(H);if(G){var E=Au.head(Au.from(arguments)),B=Au.tail(Au.from(arguments)),C=[E,D.editable()].concat(B);return N.invoke.apply(N,C)}A.focus&&D.editable().focus()}return this},code:function(C){if(void 0===C){var D=this.first();if(!D.length){return}var A=M.layoutInfoFromHolder(D),B=A&&A.editable();if(B&&B.length){var E=N.invoke("codeview.isActivated",A);return N.invoke("codeview.sync",A),E?A.codable().val():A.editable().html()}return Ai.isTextarea(D[0])?D.val():D.html()}return this.each(function(H,F){var G=M.layoutInfoFromHolder(As(F)),I=G&&G.editable();I&&I.html(C)}),this},destroy:function(){return this.each(function(C,D){var A=As(D);if(M.hasNoteEditor(A)){var B=M.layoutInfoFromHolder(A),E=B.editor().data("options");N.detach(B,E),M.removeLayout(A,B,E)}}),this}})});