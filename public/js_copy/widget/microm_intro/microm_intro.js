define(["jquery","port"],function(B,A){B(function(){function D(I){I.preventDefault();var H=B(this);return"已赞"==H.text()?void alert("你已经赞过了!!!"):void C({url:A.praise,data:{passage_id:H.attr("data-passage_id"),type_id:H.attr("data-type_id")},callback:function(){console.log(E.text()),"已踩"==E.text()&&E.text("踩"),H.text("已赞"),alert("点赞+1")}})}function F(I){I.preventDefault();var H=B(this);return"已踩"==H.text()?void alert("你已经踩过了!!!"):void C({url:A.thread,data:{passage_id:H.attr("data-passage_id"),type_id:H.attr("data-type_id")},callback:function(){"已赞"==G.text()&&G.text("赞"),H.text("已踩"),alert("踩+1")}})}function C(H){console.log(H.data),B.ajax({url:H.url,method:"POST",dataType:"json",data:H.data,success:function(I){if("object"!=typeof I){try{I=JSON.parse(I)}catch(J){alert("error数据错误!!!")}}I.success?H.callback(I):(console.log(I.err),alert(I.error?I.error:"操作失败!!!!"))},error:function(I){alert("操作失败!!!"),alert(I.responseText)}})}var G=B(".js-praise"),E=B(".js-thread");G.on("click",D),E.on("click",F)})});