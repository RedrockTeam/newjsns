define(["jquery","port"],function(a){a(function(){function b(b){var d=a(this),e=d;b.stopPropagation(),!d.hasClass("js-praise")&&(e=d.parent(".js-praise")),data={type_id:e.attr("data-type_id"),passage_id:e.attr("data-passage_id")},c.call(e,data)}function c(b){var c=a(this);a.ajax({url:"home/comment/collect",method:"POST",dataType:"json",data:b,success:function(a){if("object"!=typeof a)try{a=JSON.parse(a)}catch(b){alert("error数据错误!!!")}a.success?(console.log(a.info),d.call(c,a.info)):a.error&&alert(a.error)},error:function(a){alert("收藏失败!!!"),alert(a.responseText)}})}function d(b){var c=a(this),d=c.find(".js-show_love"),e=c.find(".js-num"),f=!0;if((e.lentgh<1||d.length<1)&&(f=!1),f)var g=e.text().slice(1,c.text().length-1);b?f&&e.text("("+(parseInt(g)+1)+")"):(f&&e.text("("+(parseInt(g)-1)+")"),d.removeClass("s-active"))}a("body").on("click",".js-praise,.js-num,.js-show_love",b)})});