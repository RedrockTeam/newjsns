define(["jquery","port"],function(A){A(function(){function D(G){var F=A(this),E=F;G.stopPropagation(),!F.hasClass("js-praise")&&(E=F.parent(".js-praise")),data={type_id:E.attr("data-type_id"),passage_id:E.attr("data-passage_id")},C.call(E,data)}function C(F){var E=A(this);A.ajax({url:"home/comment/collect",method:"POST",dataType:"json",data:F,success:function(G){if("object"!=typeof G){try{G=JSON.parse(G)}catch(H){alert("error数据错误!!!")}}G.success?B.call(E):alert(G.error?G.error:"收藏失败!!!!")},error:function(G){alert("收藏失败!!!"),alert(G.responseText)}})}function B(){var G=A(this),I=G.find(".js-show_love"),F=G.find(".js-num"),E=!0;if((F.lentgh<1||I.length<1)&&(E=!1),E){var H=F.text().slice(1,G.text().length-1)}I.hasClass("s-active")?(E&&F.text("("+(parseInt(H)-1)+")"),I.removeClass("s-active")):(E&&F.text("("+(parseInt(H)+1)+")"),I.addClass("s-active"))}A("body").on("click",".js-praise,.js-num,.js-show_love",D)})});