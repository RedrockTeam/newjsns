define(["jquery","port"],function(A){A(function(){function D(G){var F=A(this),E=F;G.stopPropagation(),!F.hasClass("js-praise")&&(E=F.parent(".js-praise")),data={type_id:E.attr("data-type_id"),passage_id:E.attr("data-passage_id")},C.call(E,data)}function C(F){var E=A(this);A.ajax({url:"home/comment/collect",method:"POST",dataType:"json",data:F,success:function(G){if("object"!=typeof G){try{G=JSON.parse(G)}catch(H){alert("error数据错误!!!")}}G.success?(console.log(G.info),B.call(E,G.info)):G.error&&alert(G.error)},error:function(G){alert("收藏失败!!!"),alert(G.responseText)}})}function B(I){var G=A(this),J=G.find(".js-show_love"),F=G.find(".js-num"),E=!0;if((F.lentgh<1||J.length<1)&&(E=!1),E){var H=F.text().slice(1,G.text().length-1)}I?E&&F.text("("+(parseInt(H)+1)+")"):(E&&F.text("("+(parseInt(H)-1)+")"),J.removeClass("s-active"))}A("body").on("click",".js-praise,.js-num,.js-show_love",D)})});