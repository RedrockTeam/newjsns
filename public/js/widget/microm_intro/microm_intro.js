define(["jquery","port"],function(a,b){a(function(){function c(c){c.preventDefault();var d=a(this);return"已赞"==d.text()?void alert("你已经赞过了!!!"):void e({url:b.praise,data:{passage_id:d.attr("data-passage_id"),type_id:d.attr("data-type_id")},callback:function(){console.log(g.text()),"已踩"==g.text()&&g.text("踩"),d.text("已赞"),alert("点赞+1")}})}function d(c){c.preventDefault();var d=a(this);return"已踩"==d.text()?void alert("你已经踩过了!!!"):void e({url:b.thread,data:{passage_id:d.attr("data-passage_id"),type_id:d.attr("data-type_id")},callback:function(){"已赞"==f.text()&&f.text("赞"),d.text("已踩"),alert("踩+1")}})}function e(b){console.log(b.data),a.ajax({url:b.url,method:"POST",dataType:"json",data:b.data,success:function(a){if("object"!=typeof a)try{a=JSON.parse(a)}catch(c){alert("error数据错误!!!")}a.success?b.callback(a):(console.log(a.err),alert(a.error?a.error:"操作失败!!!!"))},error:function(a){alert("操作失败!!!"),alert(a.responseText)}})}var f=a(".js-praise"),g=a(".js-thread");f.on("click",c),g.on("click",d)})});