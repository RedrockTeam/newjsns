define(["jquery","port"],function(C,D){C(function(){function H(F){F.preventDefault();var E=C(this);return"已赞"==E.text()?void alert("你已经赞过了!!!"):void J({url:D.praise,data:{passage_id:E.attr("data-passage_id"),type_id:E.attr("data-type_id")},callback:function(){console.log(I.text()),"已踩"==I.text()&&I.text("踩"),E.text("已赞"),alert("点赞+1")}})}function A(F){F.preventDefault();var E=C(this);return"已踩"==E.text()?void alert("你已经踩过了!!!"):void J({url:D.thread,data:{passage_id:E.attr("data-passage_id"),type_id:E.attr("data-type_id")},callback:function(){"已赞"==B.text()&&B.text("赞"),E.text("已踩"),alert("踩+1")}})}function J(E){console.log(E.data),C.ajax({url:E.url,method:"POST",dataType:"json",data:E.data,success:function(F){if("object"!=typeof F){try{F=JSON.parse(F)}catch(G){alert("error数据错误!!!")}}F.success?E.callback(F):(console.log(F.err),alert(F.error?F.error:"操作失败!!!!"))},error:function(F){alert("操作失败!!!"),alert(F.responseText)}})}var B=C(".js-praise"),I=C(".js-thread");B.on("click",H),I.on("click",A)})});