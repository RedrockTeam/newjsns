!function(B){"function"==typeof define&&define.amd?define(["jquery"],B):B(window.jQuery)}(function(w){Array.prototype.reduce||(Array.prototype.reduce=function(M){var O,L=Object(this),P=L.length>>>0,N=0;if(2===arguments.length){O=arguments[1]}else{for(;P>N&&!(N in L);){N++}if(N>=P){throw new TypeError("Reduce of empty array with no initial value")}O=L[N++]}for(;P>N;N++){N in L&&(O=M(O,L[N],N,L))}return O}),"function"!=typeof Array.prototype.filter&&(Array.prototype.filter=function(L){for(var N=Object(this),O=N.length>>>0,P=[],Q=arguments.length>=2?arguments[1]:void 0,M=0;O>M;M++){if(M in N){var R=N[M];L.call(Q,R,M,N)&&P.push(R)}}return P});var p,y="function"==typeof define&&define.amd,E=function(O){var L="Comic Sans MS"===O?"Courier New":"Comic Sans MS",P=w("<div>").css({position:"absolute",left:"-9999px",top:"-9999px",fontSize:"200px"}).text("mmmmmmmmmwwwwwww").appendTo(document.body),N=P.css("fontFamily",L).width(),M=P.css("fontFamily",O+","+L).width();return P.remove(),N!==M},q={isMac:navigator.appVersion.indexOf("Mac")>-1,isMSIE:navigator.userAgent.indexOf("MSIE")>-1||navigator.userAgent.indexOf("Trident")>-1,isFF:navigator.userAgent.indexOf("Firefox")>-1,jqueryVersion:parseFloat(w.fn.jquery),isSupportAmd:y,hasCodeMirror:y?require.specified("CodeMirror"):!!window.CodeMirror,isFontInstalled:E,isW3CRangeSupport:!!document.createRange},x=function(){var M=function(X){return function(Y){return X===Y}},N=function(X,Y){return X===Y},V=function(X){return function(Y,Z){return Y[X]===Z[X]}},Q=function(){return !0},W=function(){return !1},L=function(X){return function(){return !X.apply(X,arguments)}},T=function(X,Y){return function(Z){return X(Z)&&Y(Z)}},U=function(X){return X},O=0,P=function(X){var Y=++O+"";return X?X+Y:Y},R=function(X){var Y=w(document);return{top:X.top+Y.scrollTop(),left:X.left+Y.scrollLeft(),width:X.right-X.left,height:X.bottom-X.top}},S=function(Z){var X={};for(var Y in Z){Z.hasOwnProperty(Y)&&(X[Z[Y]]=Y)}return X};return{eq:M,eq2:N,peq2:V,ok:Q,fail:W,self:U,not:L,and:T,uniqueId:P,rect2bnd:R,invertObject:S}}(),K=function(){var L=function(Z){return Z[0]},W=function(Z){return Z[Z.length-1]},O=function(Z){return Z.slice(0,Z.length-1)},R=function(Z){return Z.slice(1)},X=function(Ad,Aa){for(var Ac=0,Z=Ad.length;Z>Ac;Ac++){var Ab=Ad[Ac];if(Aa(Ab)){return Ab}}},V=function(Aa,Z){for(var Ab=0,Ac=Aa.length;Ac>Ab;Ab++){if(!Z(Aa[Ab])){return !1}}return !0},S=function(Z,Aa){return -1!==w.inArray(Aa,Z)},Q=function(Z,Aa){return Aa=Aa||x.self,Z.reduce(function(Ab,Ac){return Ab+Aa(Ac)},0)},U=function(Aa){for(var Z=[],Ab=-1,Ac=Aa.length;++Ab<Ac;){Z[Ab]=Aa[Ab]}return Z},N=function(Ab,Aa){if(!Ab.length){return[]}var Z=R(Ab);return Z.reduce(function(Ac,Ae){var Ad=W(Ac);return Aa(W(Ad),Ae)?Ad[Ad.length]=Ae:Ac[Ac.length]=[Ae],Ac},[[L(Ab)]])},Y=function(Aa){for(var Z=[],Ab=0,Ac=Aa.length;Ac>Ab;Ab++){Aa[Ab]&&Z.push(Aa[Ab])}return Z},T=function(Aa){for(var Z=[],Ab=0,Ac=Aa.length;Ac>Ab;Ab++){S(Z,Aa[Ab])||Z.push(Aa[Ab])}return Z},M=function(Z,Aa){var Ab=Z.indexOf(Aa);return -1===Ab?null:Z[Ab+1]},P=function(Z,Aa){var Ab=Z.indexOf(Aa);return -1===Ab?null:Z[Ab-1]};return{head:L,last:W,initial:O,tail:R,prev:P,next:M,find:X,contains:S,all:V,sum:Q,from:U,clusterBy:N,compact:Y,unique:T}}(),G=String.fromCharCode(160),H="\ufeff",l=function(){var Bs=function(Aw){return Aw&&w(Aw).hasClass("note-editable")},Br=function(Aw){return Aw&&w(Aw).hasClass("note-control-sizing")},AF=function(Aw){var Ax;if(Aw.hasClass("note-air-editor")){var Ay=K.last(Aw.attr("id").split("-"));return Ax=function(AB){return function(){return w(AB+Ay)}},{editor:function(){return Aw},holder:function(){return Aw.data("holder")},editable:function(){return Aw},popover:Ax("#note-popover-"),handle:Ax("#note-handle-"),dialog:Ax("#note-dialog-")}}return Ax=function(AB){return function(){return Aw.find(AB)}},{editor:function(){return Aw},holder:function(){return Aw.data("holder")},dropzone:Ax(".note-dropzone"),toolbar:Ax(".note-toolbar"),editable:Ax(".note-editable"),codable:Ax(".note-codable"),statusbar:Ax(".note-statusbar"),popover:Ax(".note-popover"),handle:Ax(".note-handle"),dialog:Ax(".note-dialog")}},At=function(Aw){var Ax=w(Aw).closest(".note-editor, .note-air-editor, .note-air-layout");if(!Ax.length){return null}var Ay;return Ay=Ax.is(".note-editor, .note-air-editor")?Ax:w("#note-editor-"+K.last(Ax.attr("id").split("-"))),AF(Ay)},Ak=function(Aw){return Aw=Aw.toUpperCase(),function(Ax){return Ax&&Ax.nodeName.toUpperCase()===Aw}},AW=function(Aw){return Aw&&3===Aw.nodeType},Aa=function(Aw){return Aw&&/^BR|^IMG|^HR/.test(Aw.nodeName.toUpperCase())},T=function(Aw){return Bs(Aw)?!1:Aw&&/^DIV|^P|^LI|^H[1-7]/.test(Aw.nodeName.toUpperCase())},Au=Ak("LI"),Q=function(Aw){return T(Aw)&&!Au(Aw)},Bt=Ak("TABLE"),Bw=function(Aw){return !(A6(Aw)||AE(Aw)||T(Aw)||Bt(Aw)||BB(Aw))},AE=function(Aw){return Aw&&/^UL|^OL/.test(Aw.nodeName.toUpperCase())},AS=function(Aw){return Aw&&/^TD|^TH/.test(Aw.nodeName.toUpperCase())},BB=Ak("BLOCKQUOTE"),A6=function(Aw){return AS(Aw)||BB(Aw)||Bs(Aw)},Ap=Ak("A"),BC=function(Aw){return Bw(Aw)&&!!AA(Aw,T)},O=function(Aw){return Bw(Aw)&&!AA(Aw,T)},L=Ak("BODY"),Ai=function(Aw,Ax){return Aw.nextSibling===Ax||Aw.previousSibling===Ax},Ac=function(Ax,Ay){Ay=Ay||x.ok;var Aw=[];return Ax.previousSibling&&Ay(Ax.previousSibling)&&Aw.push(Ax.previousSibling),Aw.push(Ax),Ax.nextSibling&&Ay(Ax.nextSibling)&&Aw.push(Ax.nextSibling),Aw},Al=q.isMSIE?"&nbsp;":"<br>",V=function(Aw){return AW(Aw)?Aw.nodeValue.length:Aw.childNodes.length},Bx=function(Aw){var Ax=V(Aw);return 0===Ax?!0:l.isText(Aw)||1!==Ax||Aw.innerHTML!==Al?!1:!0},Az=function(Aw){Aa(Aw)||V(Aw)||(Aw.innerHTML=Al)},AA=function(Aw,Ax){for(;Aw;){if(Ax(Aw)){return Aw}if(Bs(Aw)){break}Aw=Aw.parentNode}return null},Ae=function(Aw,Ax){for(Aw=Aw.parentNode;Aw&&1===V(Aw);){if(Ax(Aw)){return Aw}if(Bs(Aw)){break}Aw=Aw.parentNode}return null},N=function(Ax,Aw){Aw=Aw||x.fail;var Ay=[];return AA(Ax,function(AB){return Bs(AB)||Ay.push(AB),Aw(AB)}),Ay},A2=function(Ax,Ay){var Aw=N(Ax);return K.last(Aw.filter(Ay))},S=function(Ay,Aw){for(var AB=N(Ay),Ax=Aw;Ax;Ax=Ax.parentNode){if(w.inArray(Ax,AB)>-1){return Ax}}return null},Bv=function(Ax,Ay){Ay=Ay||x.fail;for(var Aw=[];Ax&&!Ay(Ax);){Aw.push(Ax),Ax=Ax.previousSibling}return Aw},X=function(Ax,Ay){Ay=Ay||x.fail;for(var Aw=[];Ax&&!Ay(Ax);){Aw.push(Ax),Ax=Ax.nextSibling}return Aw},AR=function(Aw,Ax){var Ay=[];return Ax=Ax||x.ok,function AB(AC){Aw!==AC&&Ax(AC)&&Ay.push(AC);for(var AD=0,AG=AC.childNodes.length;AG>AD;AD++){AB(AC.childNodes[AD])}}(Aw),Ay},Bz=function(Ay,Aw){var AB=Ay.parentNode,Ax=w("<"+Aw+">")[0];return AB.insertBefore(Ax,Ay),Ax.appendChild(Ay),Ax},AO=function(Aw,Ax){var Ay=Ax.nextSibling,AB=Ax.parentNode;return Ay?AB.insertBefore(Aw,Ay):AB.appendChild(Aw),Aw},Ag=function(Ax,Aw){return w.each(Aw,function(Ay,AB){Ax.appendChild(AB)}),Ax},BD=function(Aw){return 0===Aw.offset},AY=function(Aw){return Aw.offset===V(Aw.node)},U=function(Aw){return BD(Aw)||AY(Aw)},R=function(Aw,Ax){for(;Aw&&Aw!==Ax;){if(0!==Bu(Aw)){return !1}Aw=Aw.parentNode}return !0},Av=function(Aw,Ax){for(;Aw&&Aw!==Ax;){if(Bu(Aw)!==V(Aw.parentNode)-1){return !1}Aw=Aw.parentNode}return !0},Bu=function(Aw){for(var Ax=0;Aw=Aw.previousSibling;){Ax+=1}return Ax},Bd=function(Aw){return !!(Aw&&Aw.childNodes&&Aw.childNodes.length)},Aj=function(Aw,Ay){var AB,Ax;if(0===Aw.offset){if(Bs(Aw.node)){return null}AB=Aw.node.parentNode,Ax=Bu(Aw.node)}else{Bd(Aw.node)?(AB=Aw.node.childNodes[Aw.offset-1],Ax=V(AB)):(AB=Aw.node,Ax=Ay?0:Aw.offset-1)}return{node:AB,offset:Ax}},Z=function(Aw,Ay){var AB,Ax;if(V(Aw.node)===Aw.offset){if(Bs(Aw.node)){return null}AB=Aw.node.parentNode,Ax=Bu(Aw.node)+1}else{Bd(Aw.node)?(AB=Aw.node.childNodes[Aw.offset],Ax=0):(AB=Aw.node,Ax=Ay?V(Aw.node):Aw.offset+1)}return{node:AB,offset:Ax}},An=function(Aw,Ax){return Aw.node===Ax.node&&Aw.offset===Ax.offset},M=function(Ax){if(AW(Ax.node)||!Bd(Ax.node)||Bx(Ax.node)){return !0}var Ay=Ax.node.childNodes[Ax.offset-1],Aw=Ax.node.childNodes[Ax.offset];return Ay&&!Aa(Ay)||Aw&&!Aa(Aw)?!1:!0},Am=function(Aw,Ax){for(;Aw;){if(Ax(Aw)){return Aw}Aw=Aj(Aw)}return null},Af=function(Aw,Ax){for(;Aw;){if(Ax(Aw)){return Aw}Aw=Z(Aw)}return null},Ad=function(Ay,AC,Ax,AD){for(var AB=Ay;AB&&(Ax(AB),!An(AB,AC));){var Aw=AD&&Ay.node!==AB.node&&AC.node!==AB.node;AB=Z(AB,Aw)}},W=function(Aw,Ax){var Ay=N(Ax,x.eq(Aw));return w.map(Ay,Bu).reverse()},Bk=function(Ax,AB){for(var Aw=Ax,AC=0,Ay=AB.length;Ay>AC;AC++){Aw=Aw.childNodes.length<=AB[AC]?Aw.childNodes[Aw.childNodes.length-1]:Aw.childNodes[AB[AC]]}return Aw},Ab=function(Aw,Ax){if(AW(Aw.node)){return BD(Aw)?Aw.node:AY(Aw)?Aw.node.nextSibling:Aw.node.splitText(Aw.offset)}var Ay=Aw.node.childNodes[Aw.offset],AB=AO(Aw.node.cloneNode(!1),Aw.node);return Ag(AB,X(Ay)),Ax||(Az(Aw.node),Az(AB)),AB},Ar=function(Aw,Ax,Ay){var AB=N(Ax.node,x.eq(Aw));return AB.length?1===AB.length?Ab(Ax,Ay):AB.reduce(function(AD,AG){var AC=AO(AG.cloneNode(!1),AG);return AD===Ax.node&&(AD=Ab(Ax,Ay)),Ag(AC,X(AD)),Ay||(Az(AG),Az(AC)),AC}):null},As=function(AC,AG){var AH,Aw,AB=AG?T:A6,AD=N(AC.node,AB),Ax=K.last(AD)||AC.node;AB(Ax)?(AH=AD[AD.length-2],Aw=Ax):(AH=Ax,Aw=AH.parentNode);var Ay=AH&&Ar(AH,AC,AG);return{rightNode:Ay,container:Aw}},Aq=function(Aw){return document.createElement(Aw)},P=function(Aw){return document.createTextNode(Aw)},Ah=function(Ay,AC){if(Ay&&Ay.parentNode){if(Ay.removeNode){return Ay.removeNode(AC)}var Ax=Ay.parentNode;if(!AC){var AD,AB,Aw=[];for(AD=0,AB=Ay.childNodes.length;AB>AD;AD++){Aw.push(Ay.childNodes[AD])}for(AD=0,AB=Aw.length;AB>AD;AD++){Ax.insertBefore(Aw[AD],Ay)}}Ax.removeChild(Ay)}},Ao=function(Ax,Aw){for(;Ax&&!Bs(Ax)&&Aw(Ax);){var Ay=Ax.parentNode;Ah(Ax),Ax=Ay}},BA=function(Ax,Ay){if(Ax.nodeName.toUpperCase()===Ay.toUpperCase()){return Ax}var Aw=Aq(Ay);return Ax.style.cssText&&(Aw.style.cssText=Ax.style.cssText),Ag(Aw,K.from(Ax.childNodes)),AO(Aw,Ax),Ah(Ax),Aw},By=Ak("TEXTAREA"),A7=function(Ay,Aw){var AB=By(Ay[0])?Ay.val():Ay.html();if(Aw){var Ax=/<(\/?)(\b(?!!)[^>\s]*)(.*?)(\s*\/?>)/g;AB=AB.replace(Ax,function(AG,AD,AC){AC=AC.toUpperCase();var AH=/^DIV|^TD|^TH|^P|^LI|^H[1-7]/.test(AC)&&!!AD,AI=/^BLOCKQUOTE|^TABLE|^TBODY|^TR|^HR|^UL|^OL/.test(AC);return AG+(AH||AI?"\n":"")}),AB=w.trim(AB)}return AB},Y=function(Ax,Ay){var Aw=Ax.val();return Ay?Aw.replace(/[\n\r]/g,""):Aw};return{NBSP_CHAR:G,ZERO_WIDTH_NBSP_CHAR:H,blank:Al,emptyPara:"<p>"+Al+"</p>",makePredByNodeName:Ak,isEditable:Bs,isControlSizing:Br,buildLayoutInfo:AF,makeLayoutInfo:At,isText:AW,isVoid:Aa,isPara:T,isPurePara:Q,isInline:Bw,isBodyInline:O,isBody:L,isParaInline:BC,isList:AE,isTable:Bt,isCell:AS,isBlockquote:BB,isBodyContainer:A6,isAnchor:Ap,isDiv:Ak("DIV"),isLi:Au,isBR:Ak("BR"),isSpan:Ak("SPAN"),isB:Ak("B"),isU:Ak("U"),isS:Ak("S"),isI:Ak("I"),isImg:Ak("IMG"),isTextarea:By,isEmpty:Bx,isEmptyAnchor:x.and(Ap,Bx),isClosestSibling:Ai,withClosestSiblings:Ac,nodeLength:V,isLeftEdgePoint:BD,isRightEdgePoint:AY,isEdgePoint:U,isLeftEdgeOf:R,isRightEdgeOf:Av,prevPoint:Aj,nextPoint:Z,isSamePoint:An,isVisiblePoint:M,prevPointUntil:Am,nextPointUntil:Af,walkPoint:Ad,ancestor:AA,singleChildAncestor:Ae,listAncestor:N,lastAncestor:A2,listNext:X,listPrev:Bv,listDescendant:AR,commonAncestor:S,wrap:Bz,insertAfter:AO,appendChildNodes:Ag,position:Bu,hasChildren:Bd,makeOffsetPath:W,fromOffsetPath:Bk,splitTree:Ar,splitPoint:As,create:Aq,createText:P,remove:Ah,removeWhile:Ao,replace:BA,html:A7,value:Y}}(),I=function(){var L=function(X,Y){var O,T,U=X.parentElement(),R=document.body.createTextRange(),S=K.from(U.childNodes);for(O=0;O<S.length;O++){if(!l.isText(S[O])){if(R.moveToElementText(S[O]),R.compareEndPoints("StartToStart",X)>=0){break}T=S[O]}}if(0!==O&&l.isText(S[O-1])){var W=document.body.createTextRange(),V=null;W.moveToElementText(T||U),W.collapse(!T),V=T?T.nextSibling:U.firstChild;var P=X.duplicate();P.setEndPoint("StartToStart",W);for(var Q=P.text.replace(/[\r\n]/g,"").length;Q>V.nodeValue.length&&V.nextSibling;){Q-=V.nodeValue.length,V=V.nextSibling}V.nodeValue;Y&&V.nextSibling&&l.isText(V.nextSibling)&&Q===V.nodeValue.length&&(Q-=V.nodeValue.length,V=V.nextSibling),U=V,O=Q}return{cont:U,offset:O}},M=function(P){var R=function(X,V){var U,W;if(l.isText(X)){var T=l.listPrev(X,x.not(l.isText)),S=K.last(T).previousSibling;U=S||X.parentNode,V+=K.sum(K.tail(T),l.nodeLength),W=!S}else{if(U=X.childNodes[V]||X,l.isText(U)){return R(U,0)}V=0,W=!1}return{node:U,collapseToStart:W,offset:V}},O=document.body.createTextRange(),Q=R(P.node,P.offset);return O.moveToElementText(Q.node),O.collapse(Q.collapseToStart),O.moveStart("character",Q.offset),O},N=function(P,Q,R,O){this.sc=P,this.so=Q,this.ec=R,this.eo=O;var S=function(){if(q.isW3CRangeSupport){var U=document.createRange();return U.setStart(P,Q),U.setEnd(R,O),U}var V=M({node:P,offset:Q});return V.setEndPoint("EndToEnd",M({node:R,offset:O})),V};this.getPoints=function(){return{sc:P,so:Q,ec:R,eo:O}},this.getStartPoint=function(){return{node:P,offset:Q}},this.getEndPoint=function(){return{node:R,offset:O}},this.select=function(){var U=S();if(q.isW3CRangeSupport){var V=document.getSelection();V.rangeCount>0&&V.removeAllRanges(),V.addRange(U)}else{U.select()}},this.normalize=function(){var V=function(X){return l.isVisiblePoint(X)||(X=l.isLeftEdgePoint(X)?l.nextPointUntil(X,l.isVisiblePoint):l.prevPointUntil(X,l.isVisiblePoint)),X},W=V(this.getStartPoint()),U=V(this.getEndPoint());return new N(W.node,W.offset,U.node,U.offset)},this.nodes=function(Y,V){Y=Y||x.ok;var X=V&&V.includeAncestor,W=V&&V.fullyContains,Ab=this.getStartPoint(),Z=this.getEndPoint(),Aa=[],U=[];return l.walkPoint(Ab,Z,function(Ac){if(!l.isEditable(Ac.node)){var Ad;W?(l.isLeftEdgePoint(Ac)&&U.push(Ac.node),l.isRightEdgePoint(Ac)&&K.contains(U,Ac.node)&&(Ad=Ac.node)):Ad=X?l.ancestor(Ac.node,Y):Ac.node,Ad&&Y(Ad)&&Aa.push(Ad)}},!0),K.unique(Aa)},this.commonAncestor=function(){return l.commonAncestor(P,R)},this.expand=function(W){var U=l.ancestor(P,W),X=l.ancestor(R,W);if(!U&&!X){return new N(P,Q,R,O)}var V=this.getPoints();return U&&(V.sc=U,V.so=0),X&&(V.ec=X,V.eo=l.nodeLength(X)),new N(V.sc,V.so,V.ec,V.eo)},this.collapse=function(U){return U?new N(P,Q,P,Q):new N(R,O,R,O)},this.splitText=function(){var U=P===R,V=this.getPoints();return l.isText(R)&&!l.isEdgePoint(this.getEndPoint())&&R.splitText(O),l.isText(P)&&!l.isEdgePoint(this.getStartPoint())&&(V.sc=P.splitText(Q),V.so=0,U&&(V.ec=V.sc,V.eo=O-Q)),new N(V.sc,V.so,V.ec,V.eo)},this.deleteContents=function(){if(this.isCollapsed()){return this}var U=this.splitText(),W=U.nodes(null,{fullyContains:!0}),X=l.prevPointUntil(U.getStartPoint(),function(Y){return !K.contains(W,Y.node)}),V=[];return w.each(W,function(Y,Z){var Aa=Z.parentNode;X.node!==Aa&&1===l.nodeLength(Aa)&&V.push(Aa),l.remove(Z,!1)}),w.each(V,function(Y,Z){l.remove(Z,!1)}),new N(X.node,X.offset,X.node,X.offset).normalize()};var T=function(U){return function(){var V=l.ancestor(P,U);return !!V&&V===l.ancestor(R,U)}};this.isOnEditable=T(l.isEditable),this.isOnList=T(l.isList),this.isOnAnchor=T(l.isAnchor),this.isOnCell=T(l.isCell),this.isLeftEdgeOf=function(U){if(!l.isLeftEdgePoint(this.getStartPoint())){return !1}var V=l.ancestor(this.sc,U);return V&&l.isLeftEdgeOf(this.sc,V)},this.isCollapsed=function(){return P===R&&Q===O},this.wrapBodyInlineWithPara=function(){if(l.isBodyContainer(P)&&l.isEmpty(P)){return P.innerHTML=l.emptyPara,new N(P.firstChild,0,P.firstChild,0)}if(l.isParaInline(P)||l.isPara(P)){return this.normalize()}var V;if(l.isInline(P)){var W=l.listAncestor(P,x.not(l.isInline));V=K.last(W),l.isInline(V)||(V=W[W.length-2]||P.childNodes[Q])}else{V=P.childNodes[Q>0?Q-1:0]}var U=l.listPrev(V,l.isParaInline).reverse();if(U=U.concat(l.listNext(V.nextSibling,l.isParaInline)),U.length){var X=l.wrap(K.head(U),"p");l.appendChildNodes(X,K.tail(U))}return this.normalize()},this.insertNode=function(V){var W=this.wrapBodyInlineWithPara().deleteContents(),U=l.splitPoint(W.getStartPoint(),l.isInline(V));return U.rightNode?U.rightNode.parentNode.insertBefore(V,U.rightNode):U.container.appendChild(V),V},this.toString=function(){var U=S();return q.isW3CRangeSupport?U.toString():U.text},this.bookmark=function(U){return{s:{path:l.makeOffsetPath(U,P),offset:Q},e:{path:l.makeOffsetPath(U,R),offset:O}}},this.paraBookmark=function(U){return{s:{path:K.tail(l.makeOffsetPath(K.head(U),P)),offset:Q},e:{path:K.tail(l.makeOffsetPath(K.last(U),R)),offset:O}}},this.getClientRects=function(){var U=S();return U.getClientRects()}};return{create:function(X,Q,Y,O){if(arguments.length){2===arguments.length&&(Y=X,O=Q)}else{if(q.isW3CRangeSupport){var W=document.getSelection();if(0===W.rangeCount){return null}if(l.isBody(W.anchorNode)){return null}var T=W.getRangeAt(0);X=T.startContainer,Q=T.startOffset,Y=T.endContainer,O=T.endOffset}else{var V=document.selection.createRange(),S=V.duplicate();S.collapse(!1);var P=V;P.collapse(!0);var U=L(P,!0),R=L(S,!1);l.isText(U.node)&&l.isLeftEdgePoint(U)&&l.isTextNode(R.node)&&l.isRightEdgePoint(R)&&R.node.nextSibling===U.node&&(U=R),X=U.cont,Q=U.offset,Y=R.cont,O=R.offset}}return new N(X,Q,Y,O)},createFromNode:function(P){var O=P,Q=0,R=P,S=l.nodeLength(R);return l.isVoid(O)&&(Q=l.listPrev(O).length-1,O=O.parentNode),l.isBR(R)?(S=l.listPrev(R).length-1,R=R.parentNode):l.isVoid(R)&&(S=l.listPrev(R).length,R=R.parentNode),this.create(O,Q,R,S)},createFromBookmark:function(P,O){var Q=l.fromOffsetPath(P,O.s.path),R=O.s.offset,T=l.fromOffsetPath(P,O.e.path),S=O.e.offset;return new N(Q,R,T,S)},createFromParaBookmark:function(P,O){var Q=P.s.offset,R=P.e.offset,T=l.fromOffsetPath(K.head(O),P.s.path),S=l.fromOffsetPath(K.last(O),P.e.path);return new N(T,Q,S,R)}}}(),J={version:"0.6.4",options:{width:null,height:null,minHeight:null,maxHeight:null,focus:!1,tabsize:4,styleWithSpan:!0,disableLinkTarget:!1,disableDragAndDrop:!1,disableResizeEditor:!1,shortcuts:!0,placeholder:!1,prettifyHtml:!0,iconPrefix:"fa fa-",codemirror:{mode:"text/html",htmlMode:!0,lineNumbers:!0},lang:"en-US",direction:null,toolbar:[["style",["style"]],["font",["bold","italic","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["table",["table"]],["insert",["link","picture","hr"]],["view",["fullscreen","codeview"]],["help",["help"]]],airMode:!1,airPopover:[["color",["color"]],["font",["bold","underline","clear"]],["para",["ul","paragraph"]],["table",["table"]],["insert",["link","picture"]]],styleTags:["p","blockquote","pre","h1","h2","h3","h4","h5","h6"],defaultFontName:"Helvetica Neue",fontNames:["Arial","Arial Black","Comic Sans MS","Courier New","Helvetica Neue","Helvetica","Impact","Lucida Grande","Tahoma","Times New Roman","Verdana"],fontNamesIgnoreCheck:[],colors:[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]],lineHeights:["1.0","1.2","1.4","1.5","1.6","1.8","2.0","3.0"],insertTableMaxSize:{col:10,row:10},maximumImageFileSize:null,oninit:null,onfocus:null,onblur:null,onenter:null,onkeyup:null,onkeydown:null,onImageUpload:null,onImageUploadError:null,onMediaDelete:null,onToolbarClick:null,onsubmit:null,onCreateLink:function(L){return -1!==L.indexOf("@")&&-1===L.indexOf(":")?L="mailto:"+L:-1===L.indexOf("://")&&(L="http://"+L),L},keyMap:{pc:{ENTER:"insertParagraph","CTRL+Z":"undo","CTRL+Y":"redo",TAB:"tab","SHIFT+TAB":"untab","CTRL+B":"bold","CTRL+I":"italic","CTRL+U":"underline","CTRL+SHIFT+S":"strikethrough","CTRL+BACKSLASH":"removeFormat","CTRL+SHIFT+L":"justifyLeft","CTRL+SHIFT+E":"justifyCenter","CTRL+SHIFT+R":"justifyRight","CTRL+SHIFT+J":"justifyFull","CTRL+SHIFT+NUM7":"insertUnorderedList","CTRL+SHIFT+NUM8":"insertOrderedList","CTRL+LEFTBRACKET":"outdent","CTRL+RIGHTBRACKET":"indent","CTRL+NUM0":"formatPara","CTRL+NUM1":"formatH1","CTRL+NUM2":"formatH2","CTRL+NUM3":"formatH3","CTRL+NUM4":"formatH4","CTRL+NUM5":"formatH5","CTRL+NUM6":"formatH6","CTRL+ENTER":"insertHorizontalRule","CTRL+K":"showLinkDialog"},mac:{ENTER:"insertParagraph","CMD+Z":"undo","CMD+SHIFT+Z":"redo",TAB:"tab","SHIFT+TAB":"untab","CMD+B":"bold","CMD+I":"italic","CMD+U":"underline","CMD+SHIFT+S":"strikethrough","CMD+BACKSLASH":"removeFormat","CMD+SHIFT+L":"justifyLeft","CMD+SHIFT+E":"justifyCenter","CMD+SHIFT+R":"justifyRight","CMD+SHIFT+J":"justifyFull","CMD+SHIFT+NUM7":"insertUnorderedList","CMD+SHIFT+NUM8":"insertOrderedList","CMD+LEFTBRACKET":"outdent","CMD+RIGHTBRACKET":"indent","CMD+NUM0":"formatPara","CMD+NUM1":"formatH1","CMD+NUM2":"formatH2","CMD+NUM3":"formatH3","CMD+NUM4":"formatH4","CMD+NUM5":"formatH5","CMD+NUM6":"formatH6","CMD+ENTER":"insertHorizontalRule","CMD+K":"showLinkDialog"}}},lang:{"en-US":{font:{bold:"Bold",italic:"Italic",underline:"Underline",clear:"Remove Font Style",height:"Line Height",name:"Font Family"},image:{image:"Picture",insert:"Insert Image",resizeFull:"Resize Full",resizeHalf:"Resize Half",resizeQuarter:"Resize Quarter",floatLeft:"Float Left",floatRight:"Float Right",floatNone:"Float None",shapeRounded:"Shape: Rounded",shapeCircle:"Shape: Circle",shapeThumbnail:"Shape: Thumbnail",shapeNone:"Shape: None",dragImageHere:"Drag image or text here",dropImage:"Drop image or Text",selectFromFiles:"Select from files",maximumFileSize:"Maximum file size",maximumFileSizeError:"Maximum file size exceeded.",url:"Image URL",remove:"Remove Image"},link:{link:"Link",insert:"Insert Link",unlink:"Unlink",edit:"Edit",textToDisplay:"Text to display",url:"To what URL should this link go?",openInNewWindow:"Open in new window"},table:{table:"Table"},hr:{insert:"Insert Horizontal Rule"},style:{style:"Style",normal:"Normal",blockquote:"Quote",pre:"Code",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6"},lists:{unordered:"Unordered list",ordered:"Ordered list"},options:{help:"Help",fullscreen:"Full Screen",codeview:"Code View"},paragraph:{paragraph:"Paragraph",outdent:"Outdent",indent:"Indent",left:"Align left",center:"Align center",right:"Align right",justify:"Justify full"},color:{recent:"Recent Color",more:"More Color",background:"Background Color",foreground:"Foreground Color",transparent:"Transparent",setTransparent:"Set transparent",reset:"Reset",resetToDefault:"Reset to default"},shortcut:{shortcuts:"Keyboard shortcuts",close:"Close",textFormatting:"Text formatting",action:"Action",paragraphFormatting:"Paragraph formatting",documentStyle:"Document Style",extraKeys:"Extra keys"},history:{undo:"Undo",redo:"Redo"}}}},u=function(){var M=function(N){return w.Deferred(function(O){w.extend(new FileReader,{onload:function(P){var Q=P.target.result;O.resolve(Q)},onerror:function(){O.reject(this)}}).readAsDataURL(N)}).promise()},L=function(O,N){return w.Deferred(function(Q){var P=w("<img>");P.one("load",function(){P.off("error abort"),Q.resolve(P)}).one("error abort",function(){P.off("load").detach(),Q.reject(P)}).css({display:"none"}).appendTo(document.body).attr({src:O,"data-filename":N})}).promise()};return{readFileAsDataURL:M,createImage:L}}(),s={isEdit:function(L){return K.contains([8,9,13,32],L)},nameFromCode:{8:"BACKSPACE",9:"TAB",13:"ENTER",32:"SPACE",48:"NUM0",49:"NUM1",50:"NUM2",51:"NUM3",52:"NUM4",53:"NUM5",54:"NUM6",55:"NUM7",56:"NUM8",66:"B",69:"E",73:"I",74:"J",75:"K",76:"L",82:"R",83:"S",85:"U",89:"Y",90:"Z",191:"SLASH",219:"LEFTBRACKET",220:"BACKSLASH",221:"RIGHTBRACKET"}},b=function(N){var P=[],M=-1,Q=N[0],O=function(){var S=I.create(),R={s:{path:[],offset:0},e:{path:[],offset:0}};return{contents:N.html(),bookmark:S?S.bookmark(Q):R}},L=function(R){null!==R.contents&&N.html(R.contents),null!==R.bookmark&&I.createFromBookmark(Q,R.bookmark).select()};this.undo=function(){M>0&&(M--,L(P[M]))},this.redo=function(){P.length-1>M&&(M++,L(P[M]))},this.recordUndo=function(){M++,P.length>M&&(P=P.slice(0,M)),P.push(O())},this.recordUndo()},e=function(){var L=function(O,M){if(q.jqueryVersion<1.9){var N={};return w.each(M,function(P,Q){N[Q]=O.css(Q)}),N}return O.css.call(O,M)};this.stylePara=function(M,N){w.each(M.nodes(l.isPara,{includeAncestor:!0}),function(P,O){w(O).css(N)})},this.styleNodes=function(R,M){R=R.splitText();var N=M&&M.nodeName||"SPAN",O=!(!M||!M.expandClosestSibling),S=!(!M||!M.onlyPartialContains);if(R.isCollapsed()){return R.insertNode(l.create(N))}var T=l.makePredByNodeName(N),P=w.map(R.nodes(l.isText,{fullyContains:!0}),function(U){return l.singleChildAncestor(U,T)||l.wrap(U,N)});if(O){if(S){var Q=R.nodes();T=x.and(T,function(U){return K.contains(Q,U)})}return w.map(P,function(W){var X=l.withClosestSiblings(W,T),V=K.head(X),U=K.tail(X);return w.each(U,function(Y,Z){l.appendChildNodes(V,Z.childNodes),l.remove(Z)}),K.head(X)})}return P},this.current=function(R,U){var O=w(l.isText(R.sc)?R.sc.parentNode:R.sc),M=["font-family","font-size","text-align","list-style-type","line-height"],N=L(O,M)||{};if(N["font-size"]=parseInt(N["font-size"],10),N["font-bold"]=document.queryCommandState("bold")?"bold":"normal",N["font-italic"]=document.queryCommandState("italic")?"italic":"normal",N["font-underline"]=document.queryCommandState("underline")?"underline":"normal",N["font-strikethrough"]=document.queryCommandState("strikeThrough")?"strikethrough":"normal",N["font-superscript"]=document.queryCommandState("superscript")?"superscript":"normal",N["font-subscript"]=document.queryCommandState("subscript")?"subscript":"normal",R.isOnList()){var S=["circle","disc","disc-leading-zero","square"],T=w.inArray(N["list-style-type"],S)>-1;N["list-style"]=T?"unordered":"ordered"}else{N["list-style"]="none"}var P=l.ancestor(R.sc,l.isPara);if(P&&P.style["line-height"]){N["line-height"]=P.style.lineHeight}else{var Q=parseInt(N["line-height"],10)/parseInt(N["font-size"],10);N["line-height"]=Q.toFixed(1)}return N.image=l.isImg(U)&&U,N.anchor=R.isOnAnchor()&&l.ancestor(R.sc,l.isAnchor),N.ancestors=l.listAncestor(R.sc,l.isEditable),N.range=R,N}},D=function(){this.insertTab=function(L,M,N){var O=l.createText(new Array(N+1).join(l.NBSP_CHAR));M=M.deleteContents(),M.insertNode(O,!0),M=I.create(O,N),M.select()},this.insertParagraph=function(){var O=I.create();O=O.deleteContents(),O=O.wrapBodyInlineWithPara();var L,P=l.ancestor(O.sc,l.isPara);if(P){L=l.splitTree(P,O.getStartPoint());var N=l.listDescendant(P,l.isEmptyAnchor);N=N.concat(l.listDescendant(L,l.isEmptyAnchor)),w.each(N,function(R,Q){l.remove(Q)})}else{var M=O.sc.childNodes[O.so];L=w(l.emptyPara)[0],M?O.sc.insertBefore(L,M):O.sc.appendChild(L)}I.create(L,0).normalize().select()}},v=function(){this.tab=function(N,P){var M=l.ancestor(N.commonAncestor(),l.isCell),Q=l.ancestor(M,l.isTable),O=l.listDescendant(Q,l.isCell),L=K[P?"prev":"next"](O,M);L&&I.create(L,0).select()},this.createTable=function(R,S){for(var L,O=[],P=0;R>P;P++){O.push("<td>"+l.blank+"</td>")}L=O.join("");for(var Q,M=[],N=0;S>N;N++){M.push("<tr>"+L+"</tr>")}return Q=M.join(""),w('<table class="table table-bordered">'+Q+"</table>")[0]}},n=function(){this.insertOrderedList=function(){this.toggleList("OL")},this.insertUnorderedList=function(){this.toggleList("UL")},this.indent=function(){var N=this,L=I.create().wrapBodyInlineWithPara(),O=L.nodes(l.isPara,{includeAncestor:!0}),M=K.clusterBy(O,x.peq2("parentNode"));w.each(M,function(Q,R){var P=K.head(R);l.isLi(P)?N.wrapList(R,P.parentNode.nodeName):w.each(R,function(S,T){w(T).css("marginLeft",function(U,V){return(parseInt(V,10)||0)+25})})}),L.select()},this.outdent=function(){var N=this,L=I.create().wrapBodyInlineWithPara(),O=L.nodes(l.isPara,{includeAncestor:!0}),M=K.clusterBy(O,x.peq2("parentNode"));w.each(M,function(Q,R){var P=K.head(R);l.isLi(P)?N.releaseList([R]):w.each(R,function(S,T){w(T).css("marginLeft",function(U,V){return V=parseInt(V,10)||0,V>25?V-25:""})})}),L.select()},this.toggleList=function(P){var Q=this,L=I.create().wrapBodyInlineWithPara(),O=L.nodes(l.isPara,{includeAncestor:!0}),M=L.paraBookmark(O),N=K.clusterBy(O,x.peq2("parentNode"));if(K.find(O,l.isPurePara)){var R=[];w.each(N,function(U,T){R=R.concat(Q.wrapList(T,P))}),O=R}else{var S=L.nodes(l.isList,{includeAncestor:!0}).filter(function(T){return !w.nodeName(T,P)});S.length?w.each(S,function(U,T){l.replace(T,P)}):O=this.releaseList(N,!0)}I.createFromParaBookmark(M,O).select()},this.wrapList=function(O,L){var P=K.head(O),Q=K.last(O),M=l.isList(P.previousSibling)&&P.previousSibling,R=l.isList(Q.nextSibling)&&Q.nextSibling,N=M||l.insertAfter(l.create(L||"UL"),Q);return O=w.map(O,function(S){return l.isPurePara(S)?l.replace(S,"LI"):S}),l.appendChildNodes(N,O),R&&(l.appendChildNodes(N,K.from(R.childNodes)),l.remove(R)),O},this.releaseList=function(L,M){var N=[];return w.each(L,function(V,T){var O=K.head(T),R=K.last(T),S=M?l.lastAncestor(O,l.isList):O.parentNode,U=S.childNodes.length>1?l.splitTree(S,{node:R.parentNode,offset:l.position(R)+1},!0):null,P=l.splitTree(S,{node:O.parentNode,offset:l.position(O)},!0);T=M?l.listDescendant(P,l.isLi):K.from(P.childNodes).filter(l.isLi),(M||!l.isList(S.parentNode))&&(T=w.map(T,function(W){return l.replace(W,"P")})),w.each(K.from(T).reverse(),function(W,X){l.insertAfter(X,S)});var Q=K.compact([S,P,U]);w.each(Q,function(W,Y){var X=[Y].concat(l.listDescendant(Y,l.isList));w.each(X.reverse(),function(Z,Aa){l.nodeLength(Aa)||l.remove(Aa,!0)})}),N=N.concat(T)}),N}},o=function(){var M=new e,N=new v,L=new D,V=new n;this.createRange=function(W){return W.focus(),I.create()},this.saveRange=function(W,X){W.focus(),W.data("range",I.create()),X&&I.create().collapse().select()},this.saveNode=function(W){for(var Z=[],X=0,Y=W[0].childNodes.length;Y>X;X++){Z.push(W[0].childNodes[X])}W.data("childNodes",Z)},this.restoreRange=function(W){var X=W.data("range");X&&(X.select(),W.focus())},this.restoreNode=function(W){W.html("");for(var Z=W.data("childNodes"),X=0,Y=Z.length;Y>X;X++){W[0].appendChild(Z[X])}},this.currentStyle=function(W){var X=I.create();return X?X.isOnEditable()&&M.current(X,W):!1};var P=this.triggerOnBeforeChange=function(W){var X=W.data("callbacks").onBeforeChange;X&&X(W.html(),W)},T=this.triggerOnChange=function(W){var X=W.data("callbacks").onChange;X&&X(W.html(),W)};this.undo=function(W){P(W),W.data("NoteHistory").undo(),T(W)},this.redo=function(W){P(W),W.data("NoteHistory").redo(),T(W)};for(var S=this.beforeCommand=function(W){P(W)},U=this.afterCommand=function(W){W.data("NoteHistory").recordUndo(),T(W)},R=["bold","italic","underline","strikethrough","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","formatBlock","removeFormat","backColor","foreColor","insertHorizontalRule","fontName"],Q=0,O=R.length;O>Q;Q++){this[R[Q]]=function(W){return function(Y,X){S(Y),document.execCommand(W,!1,X),U(Y)}}(R[Q])}this.tab=function(Y,W){var X=I.create();X.isCollapsed()&&X.isOnCell()?N.tab(X):(S(Y),L.insertTab(Y,X,W.tabsize),U(Y))},this.untab=function(){var W=I.create();W.isCollapsed()&&W.isOnCell()&&N.tab(W,!0)},this.insertParagraph=function(W){S(W),L.insertParagraph(W),U(W)},this.insertOrderedList=function(W){S(W),V.insertOrderedList(W),U(W)},this.insertUnorderedList=function(W){S(W),V.insertUnorderedList(W),U(W)},this.indent=function(W){S(W),V.indent(W),U(W)},this.outdent=function(W){S(W),V.outdent(W),U(W)},this.insertImage=function(Y,W,X){u.createImage(W,X).then(function(Z){S(Y),Z.css({display:"",width:Math.min(Y.width(),Z.width())}),I.create().insertNode(Z[0]),I.createFromNode(Z[0]).collapse().select(),U(Y)}).fail(function(){var Z=Y.data("callbacks");Z.onImageUploadError&&Z.onImageUploadError()})},this.insertNode=function(Y,W){S(Y);var X=this.createRange(Y);X.insertNode(W),I.createFromNode(W).collapse().select(),U(Y)},this.insertText=function(W,Z){S(W);var X=this.createRange(W),Y=X.insertNode(l.createText(Z));I.create(Y,l.nodeLength(Y)).select(),U(W)},this.formatBlock=function(W,X){S(W),X=q.isMSIE?"<"+X+">":X,document.execCommand("FormatBlock",!1,X),U(W)},this.formatPara=function(W){S(W),this.formatBlock(W,"P"),U(W)};for(var Q=1;6>=Q;Q++){this["formatH"+Q]=function(W){return function(X){this.formatBlock(X,"H"+W)}}(Q)}this.fontSize=function(W,Z){S(W);var Y=this.createRange(W),X=M.styleNodes(Y);w.each(X,function(Aa,Ab){w(Ab).css({"font-size":Z+"px"})}),U(W)},this.lineHeight=function(W,X){S(W),M.stylePara(I.create(),{lineHeight:X}),U(W)},this.unlink=function(Y){var W=I.create();if(W.isOnAnchor()){var X=l.ancestor(W.sc,l.isAnchor);W=I.createFromNode(X),W.select(),S(Y),document.execCommand("unlink"),U(Y)}},this.createLink=function(Ae,W,Ai){var Ac=W.url,Y=W.text,Z=W.newWindow,Ah=W.range,Aj=Ah.toString()!==Y;S(Ae),Ai.onCreateLink&&(Ac=Ai.onCreateLink(Ac));var Ag;if(Aj){var X=Ah.insertNode(w("<A>"+Y+"</A>")[0]);Ag=[X]}else{Ag=M.styleNodes(Ah,{nodeName:"A",expandClosestSibling:!0,onlyPartialContains:!0})}w.each(Ag,function(Ak,Al){w(Al).attr("href",Ac),Z?w(Al).attr("target","_blank"):w(Al).removeAttr("target")});var Ab=I.createFromNode(K.head(Ag)).collapse(!0),Ad=Ab.getStartPoint(),Af=I.createFromNode(K.last(Ag)).collapse(),Aa=Af.getEndPoint();I.create(Ad.node,Ad.offset,Aa.node,Aa.offset).select(),U(Ae)},this.getLinkInfo=function(W){W.focus();var Y=I.create().expand(l.isAnchor),X=w(K.head(Y.nodes(l.isAnchor)));return{range:Y,text:Y.toString(),isNewWindow:X.length?"_blank"===X.attr("target"):!1,url:X.length?X.attr("href"):""}},this.color=function(Z,W){var X=JSON.parse(W),Aa=X.foreColor,Y=X.backColor;S(Z),Aa&&document.execCommand("foreColor",!1,Aa),Y&&document.execCommand("backColor",!1,Y),U(Z)},this.insertTable=function(W,X){var Y=X.split("x");S(W);var Z=I.create();Z=Z.deleteContents(),Z.insertNode(N.createTable(Y[0],Y[1])),U(W)},this.floatMe=function(Y,W,X){S(Y),X.css("float",W),U(Y)},this.imageShape=function(Y,W,X){S(Y),X.removeClass("img-rounded img-circle img-thumbnail"),W&&X.addClass(W),U(Y)},this.resize=function(Y,W,X){S(Y),X.css({width:100*W+"%",height:""}),U(Y)},this.resizeTo=function(Ab,X,Aa){var W;if(Aa){var Y=Ab.y/Ab.x,Z=X.data("ratio");W={width:Z>Y?Ab.x:Ab.y/Z,height:Z>Y?Ab.x*Z:Ab.y}}else{W={width:Ab.x,height:Ab.y}}X.css(W)},this.removeMedia=function(W,Z,X){S(W),X.detach();var Y=W.data("callbacks");Y&&Y.onMediaDelete&&Y.onMediaDelete(X,this,W),U(W)},this.focus=function(W){W.focus()}},A=function(){this.update=function(Y,N){var O=function(Z,Aa){Z.find(".dropdown-menu li a").each(function(){var Ab=w(this).data("value")+""==Aa+"";this.className=Ab?"checked":""})},X=function(Z,Ab){var Aa=Y.find(Z);Aa.toggleClass("active",Ab())};if(N.image){var L=w(N.image);X('button[data-event="imageShape"][data-value="img-rounded"]',function(){return L.hasClass("img-rounded")}),X('button[data-event="imageShape"][data-value="img-circle"]',function(){return L.hasClass("img-circle")}),X('button[data-event="imageShape"][data-value="img-thumbnail"]',function(){return L.hasClass("img-thumbnail")}),X('button[data-event="imageShape"]:not([data-value])',function(){return !L.is(".img-rounded, .img-circle, .img-thumbnail")});var V=L.css("float");X('button[data-event="floatMe"][data-value="left"]',function(){return"left"===V}),X('button[data-event="floatMe"][data-value="right"]',function(){return"right"===V}),X('button[data-event="floatMe"][data-value="none"]',function(){return"left"!==V&&"right"!==V});var W=L.attr("style");return X('button[data-event="resize"][data-value="1"]',function(){return !!/(^|\s)(max-)?width\s*:\s*100%/.test(W)}),X('button[data-event="resize"][data-value="0.5"]',function(){return !!/(^|\s)(max-)?width\s*:\s*50%/.test(W)}),void X('button[data-event="resize"][data-value="0.25"]',function(){return !!/(^|\s)(max-)?width\s*:\s*25%/.test(W)})}var Q=Y.find(".note-fontname");if(Q.length){var R=N["font-family"];if(R){for(var M=R.split(","),P=0,T=M.length;T>P&&(R=M[P].replace(/[\'\"]/g,"").replace(/\s+$/,"").replace(/^\s+/,""),!q.isFontInstalled(R));P++){}Q.find(".note-current-fontname").text(R),O(Q,R)}}var U=Y.find(".note-fontsize");U.find(".note-current-fontsize").text(N["font-size"]),O(U,parseFloat(N["font-size"]));var S=Y.find(".note-height");O(S,parseFloat(N["line-height"])),X('button[data-event="bold"]',function(){return"bold"===N["font-bold"]}),X('button[data-event="italic"]',function(){return"italic"===N["font-italic"]}),X('button[data-event="underline"]',function(){return"underline"===N["font-underline"]}),X('button[data-event="strikethrough"]',function(){return"strikethrough"===N["font-strikethrough"]}),X('button[data-event="superscript"]',function(){return"superscript"===N["font-superscript"]}),X('button[data-event="subscript"]',function(){return"subscript"===N["font-subscript"]}),X('button[data-event="justifyLeft"]',function(){return"left"===N["text-align"]||"start"===N["text-align"]}),X('button[data-event="justifyCenter"]',function(){return"center"===N["text-align"]}),X('button[data-event="justifyRight"]',function(){return"right"===N["text-align"]}),X('button[data-event="justifyFull"]',function(){return"justify"===N["text-align"]}),X('button[data-event="insertUnorderedList"]',function(){return"unordered"===N["list-style"]}),X('button[data-event="insertOrderedList"]',function(){return"ordered"===N["list-style"]})},this.updateRecentColor=function(O,L,P){var Q=w(O).closest(".note-color"),M=Q.find(".note-recent-color"),R=JSON.parse(M.attr("data-value"));R[L]=P,M.attr("data-value",JSON.stringify(R));var N="backColor"===L?"background-color":"color";M.find("i").css(N,P)}},z=function(){var L=new A;this.update=function(M,N){L.update(M,N)},this.updateRecentColor=function(O,M,N){L.updateRecentColor(O,M,N)},this.activate=function(M){M.find("button").not('button[data-event="codeview"]').removeClass("disabled")},this.deactivate=function(M){M.find("button").not('button[data-event="codeview"]').addClass("disabled")},this.updateFullscreen=function(M,N){var O=M.find('button[data-event="fullscreen"]');O.toggleClass("active",N)},this.updateCodeview=function(M,N){var O=M.find('button[data-event="codeview"]');O.toggleClass("active",N),N?this.deactivate(M):this.activate(M)},this.get=function(M,N){var O=l.makeLayoutInfo(M).toolbar();return O.find("[data-name="+N+"]")},this.setButtonState=function(N,P,M){M=M===!1?!1:!0;var O=this.get(N,P);O.toggleClass("active",M)}},t=24,d=function(){var M=w(document);this.attach=function(N,O){O.disableResizeEditor||N.statusbar().on("mousedown",L)};var L=function(N){N.preventDefault(),N.stopPropagation();var Q=l.makeLayoutInfo(N.target).editable(),R=Q.offset().top-M.scrollTop(),P=l.makeLayoutInfo(N.currentTarget||N.target),O=P.editor().data("options");M.on("mousemove",function(T){var S=T.clientY-(R+t);S=O.minHeight>0?Math.max(S,O.minHeight):S,S=O.maxHeight>0?Math.min(S,O.maxHeight):S,Q.height(S)}).one("mouseup",function(){M.off("mousemove")})}},a=function(){var N=new A,L=function(Q,P){var S=w(Q),R=P?S.offset():S.position(),T=S.outerHeight(!0);return{left:R.left,top:R.top+T}},O=function(P,Q){P.css({display:"block",left:Q.left,top:Q.top})},M=20;this.update=function(Z,P,Q){N.update(Z,P);var R=Z.find(".note-link-popover");if(P.anchor){var X=R.find("a"),S=w(P.anchor).attr("href"),Y=w(P.anchor).attr("target");X.attr("href",S).html(S),Y?X.attr("target","_blank"):X.removeAttr("target"),O(R,L(P.anchor,Q))}else{R.hide()}var W=Z.find(".note-image-popover");P.image?O(W,L(P.image,Q)):W.hide();var T=Z.find(".note-air-popover");if(Q&&!P.range.isCollapsed()){var U=K.last(P.range.getClientRects());if(U){var V=x.rect2bnd(U);O(T,{left:Math.max(V.left+V.width/2-M,0),top:V.top+V.height})}}else{T.hide()}},this.updateRecentColor=function(Q,R,P){Q.updateRecentColor(Q,R,P)},this.hide=function(P){P.children().hide()}},c=function(L){var M=w(document),N=function(W){if(l.isControlSizing(W.target)){W.preventDefault(),W.stopPropagation();var T=l.makeLayoutInfo(W.target),X=T.handle(),V=T.popover(),R=T.editable(),S=T.editor(),U=X.find(".note-control-selection").data("target"),Y=w(U),O=Y.offset(),P=M.scrollTop(),Q=S.data("options").airMode;M.on("mousemove",function(Z){L.invoke("editor.resizeTo",{x:Z.clientX-O.left,y:Z.clientY-(O.top-P)},Y,!Z.shiftKey),L.invoke("handle.update",X,{image:U},Q),L.invoke("popover.update",V,{image:U},Q)}).one("mouseup",function(){M.off("mousemove"),L.invoke("editor.afterCommand",R)}),Y.data("ratio")||Y.data("ratio",Y.height()/Y.width())}};this.attach=function(O){O.handle().on("mousedown",N)},this.update=function(S,P,O){var T=S.find(".note-control-selection");if(P.image){var Q=w(P.image),V=O?Q.offset():Q.position(),U={w:Q.outerWidth(!0),h:Q.outerHeight(!0)};T.css({display:"block",left:V.left,top:V.top,width:U.w,height:U.h}).data("target",P.image);var R=U.w+"x"+U.h;T.find(".note-control-selection-info").text(R)}else{T.hide()}},this.hide=function(O){O.children().hide()}},g=function(L){var M=w(window),N=w("html, body");this.toggle=function(Q){var O=Q.editor(),U=Q.toolbar(),R=Q.editable(),S=Q.codable(),P=function(V){R.css("height",V.h),S.css("height",V.h),S.data("cmeditor")&&S.data("cmeditor").setsize(null,V.h)};O.toggleClass("fullscreen");var T=O.hasClass("fullscreen");T?(R.data("orgheight",R.css("height")),M.on("resize",function(){P({h:M.height()-U.outerHeight()})}).trigger("resize"),N.css("overflow","hidden")):(M.off("resize"),P({h:R.data("orgheight")}),N.css("overflow","visible")),L.invoke("toolbar.updateFullscreen",U,T)}};q.hasCodeMirror&&(q.isSupportAmd?require(["CodeMirror"],function(L){p=L}):p=window.CodeMirror);var i=function(L){this.sync=function(M){var N=L.invoke("codeview.isActivated",M);N&&q.hasCodeMirror&&M.codable().data("cmEditor").save()},this.isActivated=function(N){var M=N.editor();return M.hasClass("codeview")},this.toggle=function(M){this.isActivated(M)?this.deactivate(M):this.activate(M)},this.activate=function(N){var M=N.editor(),O=N.toolbar(),V=N.editable(),Q=N.codable(),T=N.popover(),P=N.handle(),R=M.data("options");if(Q.val(l.html(V,R.prettifyHtml)),Q.height(V.height()),L.invoke("toolbar.updateCodeview",O,!0),L.invoke("popover.hide",T),L.invoke("handle.hide",P),M.addClass("codeview"),Q.focus(),q.hasCodeMirror){var S=p.fromTextArea(Q[0],R.codemirror);if(R.codemirror.tern){var U=new p.TernServer(R.codemirror.tern);S.ternServer=U,S.on("cursorActivity",function(W){U.updateArgHints(W)})}S.setSize(null,V.outerHeight()),Q.data("cmEditor",S)}},this.deactivate=function(M){var N=M.editor(),R=M.toolbar(),S=M.editable(),Q=M.codable(),O=N.data("options");if(q.hasCodeMirror){var P=Q.data("cmEditor");Q.val(P.getValue()),P.toTextArea()}S.html(l.value(Q,O.prettifyHtml)||l.emptyPara),S.height(O.height?Q.height():"auto"),N.removeClass("codeview"),S.focus(),L.invoke("toolbar.updateCodeview",R,!1)}},f=function(M){var L=w(document);this.attach=function(N,O){O.airMode||O.disableDragAndDrop?L.on("drop",function(P){P.preventDefault()}):this.attachDragAndDropEvent(N,O)},this.attachDragAndDropEvent=function(P,Q){var O=w(),S=P.editor(),N=P.dropzone(),R=N.find(".note-dropzone-message");L.on("dragenter",function(V){var U=M.invoke("codeview.isActivated",P),T=S.width()>0&&S.height()>0;U||O.length||!T||(S.addClass("dragover"),N.width(S.width()),N.height(S.height()),R.text(Q.langInfo.image.dragImageHere)),O=O.add(V.target)}).on("dragleave",function(T){O=O.not(T.target),O.length||S.removeClass("dragover")}).on("drop",function(){O=w(),S.removeClass("dragover")}),N.on("dragenter",function(){N.addClass("hover"),R.text(Q.langInfo.image.dropImage)}).on("dragleave",function(){N.removeClass("hover"),R.text(Q.langInfo.image.dragImageHere)}),N.on("drop",function(W){W.preventDefault();var X=W.originalEvent.dataTransfer,T=X.getData("text/html"),V=X.getData("text/plain"),U=l.makeLayoutInfo(W.currentTarget||W.target);X&&X.files&&X.files.length?(U.editable().focus(),M.insertImages(U,X.files)):T?w(T).each(function(){U.editable().focus(),M.invoke("editor.insertNode",U.editable(),this)}):V&&(U.editable().focus(),M.invoke("editor.insertText",U.editable(),V))}).on("dragover",!1)}},j=function(M){this.attach=function(N){N.editable().on("paste",L)};var L=function(O){var P=O.originalEvent.clipboardData,Q=l.makeLayoutInfo(O.currentTarget||O.target),N=Q.editable();if(!P||!P.items||!P.items.length){var T=N.data("callbacks");if(!T.onImageUpload){return}return M.invoke("editor.saveNode",N),M.invoke("editor.saveRange",N),N.html(""),void setTimeout(function(){var Aa=N.find("img");if(Aa.length&&-1!==Aa[0].src.indexOf("data:")){for(var W=Aa[0].src,X=atob(W.split(",")[1]),Z=new Uint8Array(X.length),Y=0;Y<X.length;Y++){Z[Y]=X.charCodeAt(Y)}var Ab=new Blob([Z],{type:"image/png"});Ab.name="clipboard.png",M.invoke("editor.restoreNode",N),M.invoke("editor.restoreRange",N),M.insertImages(Q,[Ab]),M.invoke("editor.afterCommand",N)}else{var U=N.html();M.invoke("editor.restoreNode",N),M.invoke("editor.restoreRange",N);try{w(U).each(function(){N.focus(),M.invoke("editor.insertNode",N,this)})}catch(V){N.focus(),M.invoke("editor.insertText",N,U)}}},0)}var R=K.head(P.items),S="file"===R.kind&&-1!==R.type.indexOf("image/");S&&M.insertImages(Q,[R.getAsFile()]),M.invoke("editor.afterCommand",N)}},k=function(M){var L=function(N,O){N.toggleClass("disabled",!O),N.attr("disabled",!O)};this.showLinkDialog=function(O,P,N){return w.Deferred(function(V){var S=P.find(".note-link-dialog"),Q=S.find(".note-link-text"),R=S.find(".note-link-url"),T=S.find(".note-link-btn"),U=S.find("input[type=checkbox]");S.one("shown.bs.modal",function(){Q.val(N.text),Q.on("input",function(){N.text=Q.val()}),N.url||(N.url=N.text,L(T,N.text)),R.on("input",function(){L(T,R.val()),N.text||Q.val(R.val())}).val(N.url).trigger("focus").trigger("select"),U.prop("checked",N.newWindow),T.one("click",function(W){W.preventDefault(),V.resolve({range:N.range,url:R.val(),text:Q.val(),newWindow:U.is(":checked")}),S.modal("hide")})}).one("hidden.bs.modal",function(){Q.off("input"),R.off("input"),T.off("click"),"pending"===V.state()&&V.reject()}).modal("show")}).promise()},this.show=function(O){var P=O.editor(),Q=O.dialog(),R=O.editable(),N=O.popover(),T=M.invoke("editor.getLinkInfo",R),S=P.data("options");M.invoke("editor.saveRange",R),this.showLinkDialog(R,Q,T).then(function(U){M.invoke("editor.restoreRange",R),M.invoke("editor.createLink",R,U,S),M.invoke("popover.hide",N)}).fail(function(){M.invoke("editor.restoreRange",R)})}},B=function(M){var L=function(N,O){N.toggleClass("disabled",!O),N.attr("disabled",!O)};this.show=function(O){var N=O.dialog(),P=O.editable();M.invoke("editor.saveRange",P),this.showImageDialog(P,N).then(function(Q){M.invoke("editor.restoreRange",P),"string"==typeof Q?M.invoke("editor.insertImage",P,Q):M.insertImages(O,Q)}).fail(function(){M.invoke("editor.restoreRange",P)})},this.showImageDialog=function(N,O){return w.Deferred(function(Q){var R=O.find(".note-image-dialog"),P=O.find(".note-image-input"),T=O.find(".note-image-url"),S=O.find(".note-image-btn");R.one("shown.bs.modal",function(){P.replaceWith(P.clone().on("change",function(){Q.resolve(this.files||this.value),R.modal("hide")}).val("")),S.click(function(U){U.preventDefault(),Q.resolve(T.val()),R.modal("hide")}),T.on("keyup paste",function(U){var V;V="paste"===U.type?U.originalEvent.clipboardData.getData("text"):T.val(),L(S,V)}).val("").trigger("focus")}).one("hidden.bs.modal",function(){P.off("change"),T.off("keyup paste"),S.off("click"),"pending"===Q.state()&&Q.reject()}).modal("show")})}},m=function(L){this.showHelpDialog=function(M,N){return w.Deferred(function(P){var O=N.find(".note-help-dialog");O.one("hidden.bs.modal",function(){P.resolve()}).modal("show")}).promise()},this.show=function(M){var O=M.dialog(),N=M.editable();L.invoke("editor.saveRange",N,!0),this.showHelpDialog(N,O).then(function(){L.invoke("editor.restoreRange",N)})}},r=function(){var R=this.modules={editor:new o(this),toolbar:new z(this),statusbar:new d(this),popover:new a(this),handle:new c(this),fullscreen:new g(this),codeview:new i(this),dragAndDrop:new f(this),clipboard:new j(this),linkDialog:new k(this),imageDialog:new B(this),helpDialog:new m(this)};this.invoke=function(){var Ab=K.head(K.from(arguments)),X=K.tail(K.from(arguments)),Aa=Ab.split("."),Z=Aa.length>1,V=Z&&K.head(Aa),Y=Z?K.last(Aa):K.head(Aa),Ac=this.getModule(V),W=Ac[Y];return W&&W.apply(Ac,X)},this.getModule=function(V){return this.modules[V]||this.modules.editor},this.insertImages=function(X,Aa){var Z=X.editor(),Y=X.editable(),V=X.holder(),Ab=Y.data("callbacks"),W=Z.data("options");Ab.onImageUpload?(Ab.onImageUpload(Aa,R.editor,Y),N(V,"image.upload")([Aa])):w.each(Aa,function(Ac,Ae){var Ad=Ae.name;W.maximumImageFileSize&&W.maximumImageFileSize<Ae.size?Ab.onImageUploadError?(Ab.onImageUploadError(W.langInfo.image.maximumFileSizeError),N(V,"image.upload.error")(W.langInfo.image.maximumFileSizeError)):alert(W.langInfo.image.maximumFileSizeError):u.readFileAsDataURL(Ae).then(function(Af){R.editor.insertImage(Y,Af,Ad)}).fail(function(){Ab.onImageUploadError&&(Ab.onImageUploadError(),N(V,"image.upload.error")(W.langInfo.image.maximumFileSizeError))})})};var L={showLinkDialog:function(V){R.linkDialog.show(V)},showImageDialog:function(V){R.imageDialog.show(V)},showHelpDialog:function(V){R.helpDialog.show(V)},fullscreen:function(V){R.fullscreen.toggle(V)},codeview:function(V){R.codeview.toggle(V)}},U=function(V){l.isImg(V.target)&&V.preventDefault()},M=function(V){setTimeout(function(){var Y=l.makeLayoutInfo(V.currentTarget||V.target),X=R.editor.currentStyle(V.target);if(X){var W=Y.editor().data("options").airMode;W||R.toolbar.update(Y.toolbar(),X),R.popover.update(Y.popover(),X,W),R.handle.update(Y.handle(),X,W)}},0)},S=function(W){var V=l.makeLayoutInfo(W.currentTarget||W.target);R.popover.hide(V.popover()),R.handle.hide(V.handle())},T=function(V){var W=w(V.target).closest("[data-event]");W.length&&V.preventDefault()},O=function(Z){var V=w(Z.target).closest("[data-event]");if(V.length){var Ae,Af=V.attr("data-event"),Ac=V.attr("data-value"),W=V.attr("data-hide"),Y=l.makeLayoutInfo(Z.target);if(-1!==w.inArray(Af,["resize","floatMe","removeMedia","imageShape"])){var Aa=Y.handle().find(".note-control-selection");Ae=w(Aa.data("target"))}if(W&&V.parents(".popover").hide(),w.isFunction(w.summernote.pluginEvents[Af])){w.summernote.pluginEvents[Af](Z,R.editor,Y,Ac)}else{if(R.editor[Af]){var X=Y.editable();X.focus(),R.editor[Af](X,Ac,Ae),Z.preventDefault()}else{L[Af]&&(L[Af].call(this,Y),Z.preventDefault())}}if(-1!==w.inArray(Af,["backColor","foreColor"])){var Ad=Y.editor().data("options",Ad),Ab=Ad.airMode?R.popover:R.toolbar;Ab.updateRecentColor(K.head(V),Af,Ac)}M(Z)}},Q=18,P=function(Ab,X){var W,Z=w(Ab.target.parentNode),Y=Z.next(),V=Z.find(".note-dimension-picker-mousecatcher"),Ad=Z.find(".note-dimension-picker-highlighted"),Aa=Z.find(".note-dimension-picker-unhighlighted");if(void 0===Ab.offsetX){var Ae=w(Ab.target).offset();W={x:Ab.pageX-Ae.left,y:Ab.pageY-Ae.top}}else{W={x:Ab.offsetX,y:Ab.offsetY}}var Ac={c:Math.ceil(W.x/Q)||1,r:Math.ceil(W.y/Q)||1};Ad.css({width:Ac.c+"em",height:Ac.r+"em"}),V.attr("data-value",Ac.c+"x"+Ac.r),3<Ac.c&&Ac.c<X.insertTableMaxSize.col&&Aa.css({width:Ac.c+1+"em"}),3<Ac.r&&Ac.r<X.insertTableMaxSize.row&&Aa.css({height:Ac.r+1+"em"}),Y.html(Ac.c+" x "+Ac.r)},N=function(W,V){return function(){return W.trigger("summernote."+V,arguments)}};this.bindKeyMap=function(Y,W){var X=Y.editor(),V=Y.editable();V.on("keydown",function(Aa){var Ab=[];Aa.metaKey&&Ab.push("CMD"),Aa.ctrlKey&&!Aa.altKey&&Ab.push("CTRL"),Aa.shiftKey&&Ab.push("SHIFT");var Z=s.nameFromCode[Aa.keyCode];Z&&Ab.push(Z);var Ac=W[Ab.join("+")];if(Ac){if(w.summernote.pluginEvents[Ac]){var Ad=w.summernote.pluginEvents[Ac];w.isFunction(Ad)&&Ad(Aa,R.editor,Y)}else{R.editor[Ac]?(R.editor[Ac](V,X.data("options")),Aa.preventDefault()):L[Ac]&&(L[Ac].call(this,Y),Aa.preventDefault())}}else{s.isEdit(Aa.keyCode)&&R.editor.afterCommand(V)}})},this.attach=function(V,X){X.shortcuts&&this.bindKeyMap(V,X.keyMap[q.isMac?"mac":"pc"]),V.editable().on("mousedown",U),V.editable().on("keyup mouseup",M),V.editable().on("scroll",S),R.clipboard.attach(V,X),R.handle.attach(V,X),V.popover().on("click",O),V.popover().on("mousedown",T),R.dragAndDrop.attach(V,X),X.airMode||(V.toolbar().on("click",O),V.toolbar().on("mousedown",T),R.statusbar.attach(V,X));var W=X.airMode?V.popover():V.toolbar(),Y=W.find(".note-dimension-picker-mousecatcher");Y.css({width:X.insertTableMaxSize.col+"em",height:X.insertTableMaxSize.row+"em"}).on("mousemove",function(Ac){P(Ac,X)}),V.editor().data("options",X),q.isMSIE||setTimeout(function(){document.execCommand("styleWithCSS",0,X.styleWithSpan)},0);var Ab=new b(V.editable());if(V.editable().data("NoteHistory",Ab),X.onenter&&V.editable().keypress(function(Ac){Ac.keyCode===s.ENTER&&X.onenter(Ac)}),X.onfocus&&V.editable().focus(X.onfocus),X.onblur&&V.editable().blur(X.onblur),X.onkeyup&&V.editable().keyup(X.onkeyup),X.onkeydown&&V.editable().keydown(X.onkeydown),X.onpaste&&V.editable().on("paste",X.onpaste),X.onToolbarClick&&V.toolbar().click(X.onToolbarClick),X.onChange){var Aa=function(){R.editor.triggerOnChange(V.editable())};if(q.isMSIE){var Z="DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted";V.editable().on(Z,Aa)}else{V.editable().on("input",Aa)}}V.editable().data("callbacks",{onBeforeChange:X.onBeforeChange,onChange:X.onChange,onAutoSave:X.onAutoSave,onImageUpload:X.onImageUpload,onImageUploadError:X.onImageUploadError,onFileUpload:X.onFileUpload,onFileUploadError:X.onFileUpload,onMediaDelete:X.onMediaDelete}),l.isTextarea(K.head(V.holder()))&&V.holder().closest("form").submit(function(){var Ac=V.holder().code();V.holder().val(Ac),X.onsubmit&&X.onsubmit(Ac)})},this.attachCustomEvent=function(Aa,X){var V=Aa.holder(),Y=Aa.editable();if(Y.on("mousedown",N(V,"mousedown")),Y.on("keyup mouseup",N(V,"update")),Y.on("scroll",N(V,"scroll")),Y.keypress(function(Ac){Ac.keyCode===s.ENTER&&N(V,"enter").call(this,Ac)}),Y.focus(N(V,"focus")),Y.blur(N(V,"blur")),Y.keyup(N(V,"keyup")),Y.keydown(N(V,"keydown")),Y.on("paste",N(V,"paste")),X.airMode||(Aa.toolbar().click(N(V,"toolbar.click")),Aa.popover().click(N(V,"popover.click"))),q.isMSIE){var Ab="DOMCharacterDataModified DOMSubtreeModified DOMNodeInserted";Y.on(Ab,N(V,"change"))}else{Y.on("input",N(V,"change"))}l.isTextarea(K.head(V))&&V.closest("form").submit(function(Ac){var Ad=V.code();N(V,"submit").call(this,Ac,Ad)}),N(V,"init")();for(var W=0,Z=w.summernote.plugins.length;Z>W;W++){w.isFunction(w.summernote.plugins[W].init)&&w.summernote.plugins[W].init(Aa)}},this.detach=function(W,V){W.holder().off(),W.editable().off(),W.popover().off(),W.handle().off(),W.dialog().off(),V.airMode||(W.dropzone().off(),W.toolbar().off(),W.statusbar().off())}},h=function(){var Af=function(Ak,Am){var An=Am.event,Ah=Am.value,Aj=Am.title,Al=Am.className,Ag=Am.dropdown,Ai=Am.hide;return'<button type="button" class="btn btn-default btn-sm btn-small'+(Al?" "+Al:"")+(Ag?" dropdown-toggle":"")+'"'+(Ag?' data-toggle="dropdown"':"")+(Aj?' title="'+Aj+'"':"")+(An?' data-event="'+An+'"':"")+(Ah?" data-value='"+Ah+"'":"")+(Ai?" data-hide='"+Ai+"'":"")+' tabindex="-1">'+Ak+(Ag?' <span class="caret"></span>':"")+"</button>"+(Ag||"")},M=function(Ag,Ah){var Ai='<i class="'+Ag+'"></i>';return Af(Ai,Ah)},L=function(Ag,Ah){var Ai=w('<div class="'+Ag+' popover bottom in" style="display: none;"><div class="arrow"></div><div class="popover-content"></div></div>');return Ai.find(".popover-content").append(Ah),Ai},V=function(Aj,Ag,Ah,Ai){return'<div class="'+Aj+' modal" aria-hidden="false"><div class="modal-dialog"><div class="modal-content">'+(Ag?'<div class="modal-header"><button type="button" class="close" aria-hidden="true" tabindex="-1">&times;</button><h4 class="modal-title">'+Ag+"</h4></div>":"")+'<form class="note-modal-form"><div class="modal-body">'+Ah+"</div>"+(Ai?'<div class="modal-footer">'+Ai+"</div>":"")+"</form></div></div></div>"},T={picture:function(Ag,Ah){return M(Ah.iconPrefix+"picture-o",{event:"showImageDialog",title:Ag.image.image,hide:!0})},link:function(Ag,Ah){return M(Ah.iconPrefix+"link",{event:"showLinkDialog",title:Ag.link.link,hide:!0})},table:function(Ag,Ah){var Ai='<ul class="note-table dropdown-menu"><div class="note-dimension-picker"><div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div><div class="note-dimension-picker-highlighted"></div><div class="note-dimension-picker-unhighlighted"></div></div><div class="note-dimension-display"> 1 x 1 </div></ul>';return M(Ah.iconPrefix+"table",{title:Ag.table.table,dropdown:Ai})},style:function(Ag,Ah){var Ai=Ah.styleTags.reduce(function(Al,Ak){var Aj=Ag.style["p"===Ak?"normal":Ak];return Al+'<li><a data-event="formatBlock" href="#" data-value="'+Ak+'">'+("p"===Ak||"pre"===Ak?Aj:"<"+Ak+">"+Aj+"</"+Ak+">")+"</a></li>"},"");return M(Ah.iconPrefix+"magic",{title:Ag.style.style,dropdown:'<ul class="dropdown-menu">'+Ai+"</ul>"})},fontname:function(Ah,Ag){var Am=[],Ai=Ag.fontNames.reduce(function(An,Ao){return q.isFontInstalled(Ao)||-1!==Ag.fontNamesIgnoreCheck.indexOf(Ao)?(Am.push(Ao),An+'<li><a data-event="fontName" href="#" data-value="'+Ao+'" style="font-family:\''+Ao+'\'"><i class="'+Ag.iconPrefix+'check"></i> '+Ao+"</a></li>"):An},""),Ak=q.isFontInstalled(Ag.defaultFontName),Aj=Ak?Ag.defaultFontName:Am[0],Al='<span class="note-current-fontname">'+Aj+"</span>";return Af(Al,{title:Ah.font.name,dropdown:'<ul class="dropdown-menu">'+Ai+"</ul>"})},color:function(Ai,Al){var Ag='<i class="'+Al.iconPrefix+'font" style="color:black;background-color:yellow;"></i>',Ah=Af(Ag,{className:"note-recent-color",title:Ai.color.recent,event:"color",value:'{"backColor":"yellow"}'}),Aj='<ul class="dropdown-menu"><li><div class="btn-group"><div class="note-palette-title">'+Ai.color.background+'</div><div class="note-color-reset" data-event="backColor" data-value="inherit" title="'+Ai.color.transparent+'">'+Ai.color.setTransparent+'</div><div class="note-color-palette" data-target-event="backColor"></div></div><div class="btn-group"><div class="note-palette-title">'+Ai.color.foreground+'</div><div class="note-color-reset" data-event="foreColor" data-value="inherit" title="'+Ai.color.reset+'">'+Ai.color.resetToDefault+'</div><div class="note-color-palette" data-target-event="foreColor"></div></div></li></ul>',Ak=Af("",{title:Ai.color.more,dropdown:Aj});return Ah+Ak},bold:function(Ag,Ah){return M(Ah.iconPrefix+"bold",{event:"bold",title:Ag.font.bold})},italic:function(Ag,Ah){return M(Ah.iconPrefix+"italic",{event:"italic",title:Ag.font.italic})},underline:function(Ag,Ah){return M(Ah.iconPrefix+"underline",{event:"underline",title:Ag.font.underline})},clear:function(Ag,Ah){return M(Ah.iconPrefix+"eraser",{event:"removeFormat",title:Ag.font.clear})},ul:function(Ag,Ah){return M(Ah.iconPrefix+"list-ul",{event:"insertUnorderedList",title:Ag.lists.unordered})},ol:function(Ag,Ah){return M(Ah.iconPrefix+"list-ol",{event:"insertOrderedList",title:Ag.lists.ordered})},paragraph:function(Al,Ak){var Ag=M(Ak.iconPrefix+"align-left",{title:Al.paragraph.left,event:"justifyLeft"}),Ao=M(Ak.iconPrefix+"align-center",{title:Al.paragraph.center,event:"justifyCenter"}),Ah=M(Ak.iconPrefix+"align-right",{title:Al.paragraph.right,event:"justifyRight"}),Ai=M(Ak.iconPrefix+"align-justify",{title:Al.paragraph.justify,event:"justifyFull"}),Am=M(Ak.iconPrefix+"outdent",{title:Al.paragraph.outdent,event:"outdent"}),An=M(Ak.iconPrefix+"indent",{title:Al.paragraph.indent,event:"indent"}),Aj='<div class="dropdown-menu"><div class="note-align btn-group">'+Ag+Ao+Ah+Ai+'</div><div class="note-list btn-group">'+An+Am+"</div></div>";return M(Ak.iconPrefix+"align-left",{title:Al.paragraph.paragraph,dropdown:Aj})},height:function(Ag,Ah){var Ai=Ah.lineHeights.reduce(function(Aj,Ak){return Aj+'<li><a data-event="lineHeight" href="#" data-value="'+parseFloat(Ak)+'"><i class="'+Ah.iconPrefix+'check"></i> '+Ak+"</a></li>"},"");return M(Ah.iconPrefix+"text-height",{title:Ag.font.height,dropdown:'<ul class="dropdown-menu">'+Ai+"</ul>"})},help:function(Ag,Ah){return M(Ah.iconPrefix+"question",{event:"showHelpDialog",title:Ag.options.help,hide:!0})},fullscreen:function(Ag,Ah){return M(Ah.iconPrefix+"arrows-alt",{event:"fullscreen",title:Ag.options.fullscreen})},codeview:function(Ag,Ah){return M(Ah.iconPrefix+"code",{event:"codeview",title:Ag.options.codeview})},undo:function(Ag,Ah){return M(Ah.iconPrefix+"undo",{event:"undo",title:Ag.history.undo})},redo:function(Ag,Ah){return M(Ah.iconPrefix+"repeat",{event:"redo",title:Ag.history.redo})},hr:function(Ag,Ah){return M(Ah.iconPrefix+"minus",{event:"insertHorizontalRule",title:Ag.hr.insert})}},U=function(Ah,Aj){var Ak=function(){var An=M(Aj.iconPrefix+"edit",{title:Ah.link.edit,event:"showLinkDialog",hide:!0}),Ao=M(Aj.iconPrefix+"unlink",{title:Ah.link.unlink,event:"unlink"}),Am='<a href="http://www.google.com" target="_blank">www.google.com</a>&nbsp;&nbsp;<div class="note-insert btn-group">'+An+Ao+"</div>";return L("note-link-popover",Am)},Al=function(){var As=Af('<span class="note-fontsize-10">100%</span>',{title:Ah.image.resizeFull,event:"resize",value:"1"}),Av=Af('<span class="note-fontsize-10">50%</span>',{title:Ah.image.resizeHalf,event:"resize",value:"0.5"}),Ao=Af('<span class="note-fontsize-10">25%</span>',{title:Ah.image.resizeQuarter,event:"resize",value:"0.25"}),Ap=M(Aj.iconPrefix+"align-left",{title:Ah.image.floatLeft,event:"floatMe",value:"left"}),Aq=M(Aj.iconPrefix+"align-right",{title:Ah.image.floatRight,event:"floatMe",value:"right"}),Ar=M(Aj.iconPrefix+"align-justify",{title:Ah.image.floatNone,event:"floatMe",value:"none"}),At=M(Aj.iconPrefix+"square",{title:Ah.image.shapeRounded,event:"imageShape",value:"img-rounded"}),Aw=M(Aj.iconPrefix+"circle-o",{title:Ah.image.shapeCircle,event:"imageShape",value:"img-circle"}),Au=M(Aj.iconPrefix+"picture-o",{title:Ah.image.shapeThumbnail,event:"imageShape",value:"img-thumbnail"}),Ax=M(Aj.iconPrefix+"times",{title:Ah.image.shapeNone,event:"imageShape",value:""}),Am=M(Aj.iconPrefix+"trash-o",{title:Ah.image.remove,event:"removeMedia",value:"none"}),An='<div class="btn-group">'+As+Av+Ao+'</div><div class="btn-group">'+Ap+Aq+Ar+'</div><div class="btn-group">'+At+Aw+Au+Ax+'</div><div class="btn-group">'+Am+"</div>";return L("note-image-popover",An)},Ai=function(){for(var An=w("<div />"),Aq=0,Ar=Aj.airPopover.length;Ar>Aq;Aq++){for(var Ao=Aj.airPopover[Aq],As=w('<div class="note-'+Ao[0]+' btn-group">'),At=0,Ap=Ao[1].length;Ap>At;At++){var Am=w(T[Ao[1][At]](Ah,Aj));Am.attr("data-name",Ao[1][At]),As.append(Am)}An.append(As)}return L("note-air-popover",An.children())},Ag=w('<div class="note-popover" />');return Ag.append(Ak()),Ag.append(Al()),Aj.airMode&&Ag.append(Ai()),Ag},W=function(){return'<div class="note-handle"><div class="note-control-selection"><div class="note-control-selection-bg"></div><div class="note-control-holder note-control-nw"></div><div class="note-control-holder note-control-ne"></div><div class="note-control-holder note-control-sw"></div><div class="note-control-sizing note-control-se"></div><div class="note-control-selection-info"></div></div></div>'},S=function(Aj,Ah){var Ak="note-shortcut-col col-xs-6 note-shortcut-",Ag=[];for(var Ai in Ah){Ah.hasOwnProperty(Ai)&&Ag.push('<div class="'+Ak+'key">'+Ah[Ai].kbd+'</div><div class="'+Ak+'name">'+Ah[Ai].text+"</div>")}return'<div class="note-shortcut-row row"><div class="'+Ak+'title col-xs-offset-6">'+Aj+'</div></div><div class="note-shortcut-row row">'+Ag.join('</div><div class="note-shortcut-row row">')+"</div>"},O=function(Ag){var Ah=[{kbd:" + B",text:Ag.font.bold},{kbd:" + I",text:Ag.font.italic},{kbd:" + U",text:Ag.font.underline},{kbd:" + \\",text:Ag.font.clear}];return S(Ag.shortcut.textFormatting,Ah)},R=function(Ag){var Ah=[{kbd:" + Z",text:Ag.history.undo},{kbd:" +  + Z",text:Ag.history.redo},{kbd:" + ]",text:Ag.paragraph.indent},{kbd:" + [",text:Ag.paragraph.outdent},{kbd:" + ENTER",text:Ag.hr.insert}];return S(Ag.shortcut.action,Ah)},N=function(Ag){var Ah=[{kbd:" +  + L",text:Ag.paragraph.left},{kbd:" +  + E",text:Ag.paragraph.center},{kbd:" +  + R",text:Ag.paragraph.right},{kbd:" +  + J",text:Ag.paragraph.justify},{kbd:" +  + NUM7",text:Ag.lists.ordered},{kbd:" +  + NUM8",text:Ag.lists.unordered}];return S(Ag.shortcut.paragraphFormatting,Ah)},Z=function(Ag){var Ah=[{kbd:" + NUM0",text:Ag.style.normal},{kbd:" + NUM1",text:Ag.style.h1},{kbd:" + NUM2",text:Ag.style.h2},{kbd:" + NUM3",text:Ag.style.h3},{kbd:" + NUM4",text:Ag.style.h4},{kbd:" + NUM5",text:Ag.style.h5},{kbd:" + NUM6",text:Ag.style.h6}];return S(Ag.shortcut.documentStyle,Ah)},Ad=function(Aj,Ah){var Ak=Ah.extraKeys,Ag=[];for(var Ai in Ak){Ak.hasOwnProperty(Ai)&&Ag.push({kbd:Ai,text:Ak[Ai]})}return S(Aj.shortcut.extraKeys,Ag)},Aa=function(Aj,Ag){var Ah='class="note-shortcut note-shortcut-col col-sm-6 col-xs-12"',Ai=["<div "+Ah+">"+R(Aj,Ag)+"</div><div "+Ah+">"+O(Aj,Ag)+"</div>","<div "+Ah+">"+Z(Aj,Ag)+"</div><div "+Ah+">"+N(Aj,Ag)+"</div>"];return Ag.extraKeys&&Ai.push("<div "+Ah+">"+Ad(Aj,Ag)+"</div>"),'<div class="note-shortcut-row row">'+Ai.join('</div><div class="note-shortcut-row row">')+"</div>"},Y=function(Ag){return Ag.replace(//g,"Ctrl").replace(//g,"Shift")},Ac={image:function(Ai,Ak){var Al="";if(Ak.maximumImageFileSize){var Ah=Math.floor(Math.log(Ak.maximumImageFileSize)/Math.log(1024)),Am=1*(Ak.maximumImageFileSize/Math.pow(1024,Ah)).toFixed(2)+"  KMGTP"[Ah]+"B";Al="<small>"+Ai.image.maximumFileSize+" : "+Am+"</small>"}var Aj='<div class="form-group row-fluid note-group-select-from-files"><label>'+Ai.image.selectFromFiles+'</label><input class="note-image-input" type="file" name="files" accept="image/*" multiple="multiple" />'+Al+'</div><div class="form-group row-fluid"><label>'+Ai.image.url+'</label><input class="note-image-url form-control span12" type="text" /></div>',Ag='<button href="#" class="btn btn-primary note-image-btn disabled" disabled>'+Ai.image.insert+"</button>";return V("note-image-dialog",Ai.image.insert,Aj,Ag)},link:function(Aj,Ag){var Ah='<div class="form-group row-fluid"><label>'+Aj.link.textToDisplay+'</label><input class="note-link-text form-control span12" type="text" /></div><div class="form-group row-fluid"><label>'+Aj.link.url+'</label><input class="note-link-url form-control span12" type="text" /></div>'+(Ag.disableLinkTarget?"":'<div class="checkbox"><label><input type="checkbox" checked> '+Aj.link.openInNewWindow+"</label></div>"),Ai='<button href="#" class="btn btn-primary note-link-btn disabled" disabled>'+Aj.link.insert+"</button>";return V("note-link-dialog",Aj.link.insert,Ah,Ai)},help:function(Ag,Ah){var Ai='<a class="modal-close pull-right" aria-hidden="true" tabindex="-1">'+Ag.shortcut.close+'</a><div class="title">'+Ag.shortcut.shortcuts+"</div>"+(q.isMac?Aa(Ag,Ah):Y(Aa(Ag,Ah)))+'<p class="text-center"><a href="//summernote.org/" target="_blank">Summernote 0.6.4</a>  <a href="//github.com/summernote/summernote" target="_blank">Project</a>  <a href="//github.com/summernote/summernote/issues" target="_blank">Issues</a></p>';return V("note-help-dialog","",Ai,"")}},P=function(Ag,Ah){var Ai="";return w.each(Ac,function(Ak,Aj){Ai+=Aj(Ag,Ah)}),'<div class="note-dialog">'+Ai+"</div>"},Ae=function(){return'<div class="note-resizebar"><div class="note-icon-bar"></div><div class="note-icon-bar"></div><div class="note-icon-bar"></div></div>'},Ab=function(Ag){return q.isMac&&(Ag=Ag.replace("CMD","").replace("SHIFT","")),Ag.replace("BACKSLASH","\\").replace("SLASH","/").replace("LEFTBRACKET","[").replace("RIGHTBRACKET","]")},X=function(Ai,Aj,Ah){var Ak=x.invertObject(Aj),Ag=Ai.find("button");Ag.each(function(Am,An){var Al=w(An),Ao=Ak[Al.data("event")];Ao&&Al.attr("title",function(Ap,Aq){return Aq+" ("+Ab(Ao)+")"})}).tooltip({container:"body",trigger:"hover",placement:Ah||"top"}).on("click",function(){w(this).tooltip("hide")})},Q=function(Ag,Ah){var Ai=Ah.colors;Ag.find(".note-color-palette").each(function(){for(var Aj=w(this),Ak=Aj.attr("data-target-event"),As=[],An=0,Ao=Ai.length;Ao>An;An++){for(var Aq=Ai[An],Al=[],Ar=0,Ap=Aq.length;Ap>Ar;Ar++){var Am=Aq[Ar];Al.push(['<button type="button" class="note-color-btn" style="background-color:',Am,';" data-event="',Ak,'" data-value="',Am,'" title="',Am,'" data-toggle="button" tabindex="-1"></button>'].join(""))}As.push('<div class="note-color-row">'+Al.join("")+"</div>")}Aj.html(As.join(""))})};this.createLayoutByAirMode=function(Ag,Ah){var Al=Ah.langInfo,Ak=Ah.keyMap[q.isMac?"mac":"pc"],Am=x.uniqueId();Ag.addClass("note-air-editor note-editable"),Ag.attr({id:"note-editor-"+Am,contentEditable:!0});var An=document.body,Ai=w(U(Al,Ah));Ai.addClass("note-air-layout"),Ai.attr("id","note-popover-"+Am),Ai.appendTo(An),X(Ai,Ak),Q(Ai,Ah);var Aj=w(W());Aj.addClass("note-air-layout"),Aj.attr("id","note-handle-"+Am),Aj.appendTo(An);var Ao=w(P(Al,Ah));Ao.addClass("note-air-layout"),Ao.attr("id","note-dialog-"+Am),Ao.find("button.close, a.modal-close").click(function(){w(this).closest(".modal").modal("hide")}),Ao.appendTo(An)},this.createLayoutByFrame=function(At,Ax){var Au=Ax.langInfo,Av=w('<div class="note-editor"></div>');Ax.width&&Av.width(Ax.width),Ax.height>0&&w('<div class="note-statusbar">'+(Ax.disableResizeEditor?"":Ae())+"</div>").prependTo(Av);var Am=!At.is(":disabled"),Ao=w('<div class="note-editable" contentEditable="'+Am+'"></div>').prependTo(Av);Ax.height&&Ao.height(Ax.height),Ax.direction&&Ao.attr("dir",Ax.direction);var Ak=At.attr("placeholder")||Ax.placeholder;Ak&&Ao.attr("data-placeholder",Ak),Ao.html(l.html(At)),w('<textarea class="note-codable"></textarea>').prependTo(Av);for(var Az=w('<div class="note-toolbar btn-toolbar" />'),Aq=0,Aw=Ax.toolbar.length;Aw>Aq;Aq++){for(var Ai=Ax.toolbar[Aq][0],Ap=Ax.toolbar[Aq][1],Al=w('<div class="note-'+Ai+' btn-group" />'),Ay=0,Ah=Ap.length;Ah>Ay;Ay++){var Aj=T[Ap[Ay]];if(w.isFunction(Aj)){var As=w(Aj(Au,Ax));As.attr("data-name",Ap[Ay]),Al.append(As)}}Az.append(Al)}Az.prependTo(Av);var Ar=Ax.keyMap[q.isMac?"mac":"pc"];Q(Az,Ax),X(Az,Ar,"bottom");var An=w(U(Au,Ax)).prependTo(Av);Q(An,Ax),X(An,Ar),w(W()).prependTo(Av);var Ag=w(P(Au,Ax)).prependTo(Av);Ag.find("button.close, a.modal-close").click(function(){w(this).closest(".modal").modal("hide")}),w('<div class="note-dropzone"><div class="note-dropzone-message"></div></div>').prependTo(Av),Av.insertAfter(At),At.hide()},this.hasNoteEditor=function(Ag){return this.noteEditorFromHolder(Ag).length>0},this.noteEditorFromHolder=function(Ag){return Ag.hasClass("note-air-editor")?Ag:Ag.next().hasClass("note-editor")?Ag.next():w()},this.createLayout=function(Ag,Ah){Ah.airMode?this.createLayoutByAirMode(Ag,Ah):this.createLayoutByFrame(Ag,Ah)},this.layoutInfoFromHolder=function(Ag){var Ah=this.noteEditorFromHolder(Ag);if(Ah.length){return Ah.data("holder",Ag),l.buildLayoutInfo(Ah)}},this.removeLayout=function(Ag,Ah,Ai){Ai.airMode?(Ag.removeClass("note-air-editor note-editable").removeAttr("id contentEditable"),Ah.popover().remove(),Ah.handle().remove(),Ah.dialog().remove()):(Ag.html(Ah.editable().html()),Ah.editor().remove(),Ag.show())},this.getTemplate=function(){return{button:Af,iconButton:M,dialog:V}},this.addButtonInfo=function(Ag,Ah){T[Ag]=Ah},this.addDialogInfo=function(Ag,Ah){Ac[Ag]=Ah}};w.summernote=w.summernote||{},w.extend(w.summernote,J);var F=new h,C=new r;w.extend(w.summernote,{renderer:F,eventHandler:C,core:{agent:q,dom:l,range:I},pluginEvents:{},plugins:[]}),w.summernote.addPlugin=function(L){w.summernote.plugins.push(L),L.buttons&&w.each(L.buttons,function(N,M){F.addButtonInfo(N,M)}),L.dialogs&&w.each(L.dialogs,function(N,M){F.addDialogInfo(N,M)}),L.events&&w.each(L.events,function(M,N){w.summernote.pluginEvents[M]=N}),L.langs&&w.each(L.langs,function(M,N){w.summernote.lang[M]&&w.extend(w.summernote.lang[M],N)}),L.options&&w.extend(w.summernote.options,L.options)},w.fn.extend({summernote:function(){var Q=w.type(K.head(arguments)),R="string"===Q,M="object"===Q,P=M?K.head(arguments):{};P=w.extend({},w.summernote.options,P),P.langInfo=w.extend(!0,{},w.summernote.lang["en-US"],w.summernote.lang[P.lang]),this.each(function(U,W){var X=w(W);if(!F.hasNoteEditor(X)){F.createLayout(X,P);var V=F.layoutInfoFromHolder(X);C.attach(V,P),C.attachCustomEvent(V,P)}}),!R&&this.length&&P.oninit&&P.oninit();var L=this.first();if(L.length){var S=F.layoutInfoFromHolder(L);if(R){var T=K.head(K.from(arguments)),N=K.tail(K.from(arguments)),O=[T,S.editable()].concat(N);return C.invoke.apply(C,O)}P.focus&&S.editable().focus()}return this},code:function(O){if(void 0===O){var L=this.first();if(!L.length){return}var P=F.layoutInfoFromHolder(L),N=P&&P.editable();if(N&&N.length){var M=C.invoke("codeview.isActivated",P);return C.invoke("codeview.sync",P),M?P.codable().val():P.editable().html()}return l.isTextarea(L[0])?L.val():L.html()}return this.each(function(R,Q){var S=F.layoutInfoFromHolder(w(Q)),T=S&&S.editable();T&&T.html(O)}),this},destroy:function(){return this.each(function(O,L){var P=w(L);if(F.hasNoteEditor(P)){var N=F.layoutInfoFromHolder(P),M=N.editor().data("options");C.detach(N,M),F.removeLayout(P,N,M)}}),this}})});