!function(As){function Af(){var B=Ac.scrollLeft(),A=Ac.width();As([w,s]).css("left",B+A/2),y&&As(Av).css({left:B,top:Ac.scrollTop(),width:A,height:Ac.height()})}function n(B){if(B){As("object").add(Aa?"select":"embed").each(function(D,C){Ah[D]=[C,C.style.visibility],C.style.visibility="hidden"})}else{As.each(Ah,function(D,C){C[0].style.visibility=C[1]}),Ah=[]}var A=B?"bind":"unbind";Ac[A]("scroll resize",Af),As(document)[A]("keydown",l)}function l(A){var B=A.which,C=As.inArray;return C(B,Aj.closeKeys)>=0?x():C(B,Aj.nextKeys)>=0?Ag():C(B,Aj.previousKeys)>=0?Ai():null}function Ai(){return v(An)}function Ag(){return v(m)}function v(A){return A>=0&&(z=A,u=p[z][0],An=(z||(Aj.loop?p.length:0))-1,m=(z+1)%p.length||(Aj.loop?0:-1),At(),w.className="lbLoading",Aq=new Image(),Aq.onload=Ad,Aq.src=u),!1}function Ad(){w.className="",As(Ae).css({backgroundImage:"url("+u+")",visibility:"hidden",display:""}),As(Ar).width(Aq.width),As([Ar,o,t]).height(Aq.height),As(Ak).html(p[z][1]||""),As(Am).html((p.length>1&&Aj.counterText||"").replace(/{x}/,z+1).replace(/{y}/,p.length)),An>=0&&(Ab.src=p[An][0]),m>=0&&(Au.src=p[m][0]),Al=Ae.offsetWidth,r=Ae.offsetHeight;var A=Math.max(0,Ao-r/2);w.offsetHeight!=r&&As(w).animate({height:r,top:A},Aj.resizeDuration,Aj.resizeEasing),w.offsetWidth!=Al&&As(w).animate({width:Al,marginLeft:-Al/2},Aj.resizeDuration,Aj.resizeEasing),As(w).queue(function(){As(s).css({width:Al,top:A+r,marginLeft:-Al/2,visibility:"hidden",display:""}),As(Ae).css({display:"none",visibility:"",opacity:""}).fadeIn(Aj.imageFadeDuration,q)})}function q(){An>=0&&As(o).show(),m>=0&&As(t).show(),As(Ap).css("marginTop",-Ap.offsetHeight).animate({marginTop:0},Aj.captionAnimationDuration),s.style.visibility=""}function At(){Aq.onload=null,Aq.src=Ab.src=Au.src=u,As([w,Ae,Ap]).stop(!0),As([o,t,Ae,s]).hide()}function x(){return z>=0&&(At(),z=An=m=-1,As(w).hide(),As(Av).stop().fadeOut(Aj.overlayFadeDuration,n)),!1}var Aj,p,u,An,m,y,Ao,Al,r,Av,w,Ae,Ar,o,t,s,Ap,Ak,Am,Ac=As(window),z=-1,Aa=!window.XMLHttpRequest,Ah=[],Aq=(document.documentElement,{}),Ab=new Image(),Au=new Image();As(function(){As("body").append(As([Av=As('<div id="lbOverlay" />').click(x)[0],w=As('<div id="lbCenter" />')[0],s=As('<div id="lbBottomContainer" />')[0]]).css("display","none")),Ae=As('<div id="lbImage" />').appendTo(w).append(Ar=As('<div style="position: relative;" />').append([o=As('<a id="lbPrevLink" href="#" />').click(Ai)[0],t=As('<a id="lbNextLink" href="#" />').click(Ag)[0]])[0])[0],Ap=As('<div id="lbBottom" />').appendTo(s).append([As('<a id="lbCloseLink" href="#" />').click(x)[0],Ak=As('<div id="lbCaption" />')[0],Am=As('<div id="lbNumber" />')[0],As('<div style="clear: both;" />')[0]])[0]}),As.slimbox=function(C,B,A){return Aj=As.extend({loop:!1,overlayOpacity:0.8,overlayFadeDuration:400,resizeDuration:400,resizeEasing:"swing",initialWidth:250,initialHeight:250,imageFadeDuration:400,captionAnimationDuration:400,counterText:"Image {x} of {y}",closeKeys:[27,88,67],previousKeys:[37,80],nextKeys:[39,78]},A),"string"==typeof C&&(C=[[C,B]],B=0),Ao=Ac.scrollTop()+Ac.height()/2,Al=Aj.initialWidth,r=Aj.initialHeight,As(w).css({top:Math.max(0,Ao-r/2),width:Al,height:r,marginLeft:-Al/2}).show(),y=Aa||Av.currentStyle&&"fixed"!=Av.currentStyle.position,y&&(Av.style.position="absolute"),As(Av).css("opacity",Aj.overlayOpacity).fadeIn(Aj.overlayFadeDuration),Af(),n(1),p=C,Aj.loop=Aj.loop&&p.length>1,v(B)},As.fn.slimbox=function(C,A,D){A=A||function(F){return[F.href,As(F).attr("data-content")||F.title]},D=D||function(){return !0};var B,E=this;return E.on("click",".js-open_box",function(I){I.preventDefault(),B=E.find(".js-link");var J,H,G=this,K=0,F=0;for(J=As.grep(B,function(L,M){return D.call(G,L,M)}),H=J.length;H>F;++F){J[F]==G&&(K=F),J[F]=A(J[F],F)}return As.slimbox(J,K,C)})}}(jQuery);