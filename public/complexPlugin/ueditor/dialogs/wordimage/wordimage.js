var wordImage={};var g=baidu.g,flashObj,flashContainer;wordImage.init=function(A,B){showLocalPath("localPath");createFlashUploader(A,B);addUploadListener();addOkListener()};function hideFlash(){flashObj=null;flashContainer.innerHTML=""}function addOkListener(){dialog.onok=function(){if(!imageUrls.length){return}var A=editor.getOpt("imageUrlPrefix"),F=domUtils.getElementsByTagName(editor.document,"img");editor.fireEvent("saveScene");for(var B=0,C;C=F[B++];){var E=C.getAttribute("word_img");if(!E){continue}for(var G=0,D;D=imageUrls[G++];){if(E.indexOf(D.original.replace(" ",""))!=-1){C.src=A+D.url;C.setAttribute("_src",A+D.url);C.setAttribute("title",D.title);domUtils.removeAttributes(C,["word_img","style","width","height"]);editor.fireEvent("selectionchange");break}}}editor.fireEvent("saveScene");hideFlash()};dialog.oncancel=function(){hideFlash()}}function addUploadListener(){g("upload").onclick=function(){flashObj.upload();this.style.display="none"}}function showLocalPath(G){var F=editor.selection.getRange().getClosedNode();var A=editor.execCommand("wordimage");if(A.length==1||F&&F.tagName=="IMG"){g(G).value=A[0];return}var B=A[0];var C=B.lastIndexOf("/")||0,D=B.lastIndexOf("\\")||0,E=C>D?"/":"\\";B=B.substring(0,B.lastIndexOf(E)+1);g(G).value=B}function createFlashUploader(B,E){var D=utils.extend({},lang.flashI18n);for(var A in D){if(!(A in {"lang":1,"uploadingTF":1,"imageTF":1,"textEncoding":1})&&D[A]){D[A]=encodeURIComponent(editor.options.langPath+editor.options.lang+"/images/"+D[A])}}B=utils.extend(B,D,false);var C={createOptions:{id:"flash",url:B.flashUrl,width:B.width,height:B.height,errorMessage:lang.flashError,wmode:browser.safari?"transparent":"window",ver:"10.0.0",vars:B,container:B.container}};C=extendProperty(E,C);flashObj=new baidu.flash.imageUploader(C);flashContainer=$G(B.container)}function extendProperty(B,C){for(var A in B){if(!C[A]){C[A]=B[A]}}return C}function getPasteData(A){baidu.g("msg").innerHTML=lang.copySuccess+"</br>";setTimeout(function(){baidu.g("msg").innerHTML=""},5000);return baidu.g(A).value}function createCopyButton(D,A){baidu.swf.create({id:"copyFlash",url:"fClipboard_ueditor.swf",width:"58",height:"25",errorMessage:"",bgColor:"#CBCBCB",wmode:"transparent",ver:"10.0.0",vars:{tid:A}},D);var B=baidu.swf.getMovie("copyFlash");var C=setInterval(function(){if(B&&B.flashInit){clearInterval(C);B.setHandCursor(true);B.setContentFuncName("getPasteData")}},500)}createCopyButton("clipboard","localPath");