(function(A){function C(N,P,O){return"rgba("+[Math.round(N[0]+(P[0]-N[0])*O),Math.round(N[1]+(P[1]-N[1])*O),Math.round(N[2]+(P[2]-N[2])*O),N[3]+(P[3]-N[3])*O].join(",")+")"}var L=function(){},E=A.getOptions(),M=A.each,I=A.extend,J=A.wrap,G=A.Chart,H=A.seriesTypes,F=H.pie,K=H.column,D=HighchartsAdapter.fireEvent;I(E.lang,{drillUpText:"‚óÅ Back to {series.name}"});E.drilldown={activeAxisLabelStyle:{cursor:"pointer",color:"#039",fontWeight:"bold",textDecoration:"underline"},activeDataLabelStyle:{cursor:"pointer",color:"#039",fontWeight:"bold",textDecoration:"underline"},animation:{duration:500},drillUpButton:{position:{align:"right",x:-10,y:10}}};A.SVGRenderer.prototype.Element.prototype.fadeIn=function(){this.attr({opacity:0.1,visibility:"visible"}).animate({opacity:1},{duration:250})};G.prototype.drilldownLevels=[];G.prototype.addSeriesAsDrilldown=function(Q,S){var R=Q.series,O=R.xAxis,T=R.yAxis,P;P=Q.color||R.color;var N,S=I({color:P},S);N=HighchartsAdapter.inArray(this,R.points);this.drilldownLevels.push({seriesOptions:R.userOptions,shapeArgs:Q.shapeArgs,bBox:Q.graphic.getBBox(),color:P,newSeries:S,pointOptions:R.options.data[N],pointIndex:N,oldExtremes:{xMin:O&&O.userMin,xMax:O&&O.userMax,yMin:T&&T.userMin,yMax:T&&T.userMax}});P=this.addSeries(S,!1);if(O){O.oldPos=O.pos,O.userMin=O.userMax=null,T.userMin=T.userMax=null}if(R.type===P.type){P.animate=P.animateDrilldown||L,P.options.animation=!0}R.remove(!1);this.redraw();this.showDrillUpButton()};G.prototype.getDrilldownBackText=function(){return this.options.lang.drillUpText.replace("{series.name}",this.drilldownLevels[this.drilldownLevels.length-1].seriesOptions.name)};G.prototype.showDrillUpButton=function(){var N=this,P=this.getDrilldownBackText(),O=N.options.drilldown.drillUpButton;this.drillUpButton?this.drillUpButton.attr({text:P}).align():this.drillUpButton=this.renderer.button(P,null,null,function(){N.drillUp()}).attr(I({align:O.position.align,zIndex:9},O.theme)).add().align(O.position,!1,O.relativeTo||"plotBox")};G.prototype.drillUp=function(){var O=this.drilldownLevels.pop(),Q=this.series[0],P=O.oldExtremes,N=this.addSeries(O.seriesOptions,!1);D(this,"drillup",{seriesOptions:O.seriesOptions});if(N.type===Q.type){N.drilldownLevel=O,N.animate=N.animateDrillupTo||L,N.options.animation=!0,Q.animateDrillupFrom&&Q.animateDrillupFrom(O)}Q.remove(!1);N.xAxis&&(N.xAxis.setExtremes(P.xMin,P.xMax,!1),N.yAxis.setExtremes(P.yMin,P.yMax,!1));this.redraw();this.drilldownLevels.length===0?this.drillUpButton=this.drillUpButton.destroy():this.drillUpButton.attr({text:this.getDrilldownBackText()}).align()};F.prototype.animateDrilldown=function(Q){var S=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],R=this.chart.options.drilldown.animation,O=S.shapeArgs,T=O.start,P=(O.end-T)/this.points.length,N=A.Color(S.color).rgba;Q||M(this.points,function(W,V){var U=A.Color(W.color).rgba;W.graphic.attr(A.merge(O,{start:T+V*P,end:T+(V+1)*P})).animate(W.shapeArgs,A.merge(R,{step:function(Y,X){X.prop==="start"&&this.attr({fill:C(N,U,X.pos)})}}))})};F.prototype.animateDrillupTo=K.prototype.animateDrillupTo=function(N){if(!N){var P=this,O=P.drilldownLevel;M(this.points,function(Q){Q.graphic.hide();Q.dataLabel&&Q.dataLabel.hide();Q.connector&&Q.connector.hide()});setTimeout(function(){M(P.points,function(S,R){var Q=R===O.pointIndex?"show":"fadeIn";S.graphic[Q]();if(S.dataLabel){S.dataLabel[Q]()}if(S.connector){S.connector[Q]()}})},Math.max(this.chart.options.drilldown.animation.duration-50,0));this.animate=L}};K.prototype.animateDrilldown=function(N){var P=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1].shapeArgs,O=this.chart.options.drilldown.animation;N||(P.x+=this.xAxis.oldPos-this.xAxis.pos,M(this.points,function(Q){Q.graphic.attr(P).animate(Q.shapeArgs,O)}))};K.prototype.animateDrillupFrom=F.prototype.animateDrillupFrom=function(N){var P=this.chart.options.drilldown.animation,O=this.group;delete this.group;M(this.points,function(R){var S=R.graphic,Q=A.Color(R.color).rgba;delete R.graphic;S.animate(N.shapeArgs,A.merge(P,{step:function(U,T){T.prop==="start"&&this.attr({fill:C(Q,A.Color(N.color).rgba,T.pos)})},complete:function(){S.destroy();O&&(O=O.destroy())}}))})};A.Point.prototype.doDrilldown=function(){for(var O=this.series.chart,Q=O.options.drilldown,P=Q.series.length,N;P--&&!N;){Q.series[P].id===this.drilldown&&(N=Q.series[P])}D(O,"drilldown",{point:this,seriesOptions:N});N&&O.addSeriesAsDrilldown(this,N)};J(A.Point.prototype,"init",function(O,Q,P,N){var R=O.call(this,Q,P,N),O=Q.chart,Q=(Q=Q.xAxis&&Q.xAxis.ticks[N])&&Q.label;if(R.drilldown){if(A.addEvent(R,"click",function(){R.doDrilldown()}),Q){if(!Q._basicStyle){Q._basicStyle=Q.element.getAttribute("style")}Q.addClass("highcharts-drilldown-axis-label").css(O.options.drilldown.activeAxisLabelStyle).on("click",function(){R.doDrilldown&&R.doDrilldown()})}}else{Q&&Q._basicStyle&&Q.element.setAttribute("style",Q._basicStyle)}return R});J(A.Series.prototype,"drawDataLabels",function(N){var O=this.chart.options.drilldown.activeDataLabelStyle;N.call(this);M(this.points,function(P){if(P.drilldown&&P.dataLabel){P.dataLabel.attr({"class":"highcharts-drilldown-data-label"}).css(O).on("click",function(){P.doDrilldown()})}})});K.prototype.supportsDrilldown=!0;F.prototype.supportsDrilldown=!0;var B,E=function(N){N.call(this);M(this.points,function(O){O.drilldown&&O.graphic&&O.graphic.attr({"class":"highcharts-drilldown-point"}).css({cursor:"pointer"})})};for(B in H){H[B].prototype.supportsDrilldown&&J(H[B].prototype,"drawTracker",E)}})(Highcharts);