define(["../core","../var/indexOf","./var/rneedsContext","../selector"],function(D,C,E){var A=/^.[^:#\[\.,]*$/;function B(F,H,G){if(D.isFunction(H)){return D.grep(F,function(J,I){return !!H.call(J,I,J)!==G})}if(H.nodeType){return D.grep(F,function(I){return(I===H)!==G})}if(typeof H==="string"){if(A.test(H)){return D.filter(H,F,G)}H=D.filter(H,F)}return D.grep(F,function(I){return(C.call(H,I)>=0)!==G})}D.filter=function(F,G,I){var H=G[0];if(I){F=":not("+F+")"}return G.length===1&&H.nodeType===1?D.find.matchesSelector(H,F)?[H]:[]:D.find.matches(F,D.grep(G,function(J){return J.nodeType===1}))};D.fn.extend({find:function(I){var F,H=this.length,J=[],G=this;if(typeof I!=="string"){return this.pushStack(D(I).filter(function(){for(F=0;F<H;F++){if(D.contains(G[F],this)){return true}}}))}for(F=0;F<H;F++){D.find(I,G[F],J)}J=this.pushStack(H>1?D.unique(J):J);J.selector=this.selector?this.selector+" "+I:I;return J},filter:function(F){return this.pushStack(B(this,F||[],false))},not:function(F){return this.pushStack(B(this,F||[],true))},is:function(F){return !!B(this,typeof F==="string"&&E.test(F)?D(F):F||[],false).length}})});