define(["../core","../core/init","../deferred"],function(C){var B;C.fn.ready=function(D){C.ready.promise().done(D);return this};C.extend({isReady:false,readyWait:1,holdReady:function(D){if(D){C.readyWait++}else{C.ready(true)}},ready:function(D){if(D===true?--C.readyWait:C.isReady){return}C.isReady=true;if(D!==true&&--C.readyWait>0){return}B.resolveWith(document,[C]);if(C.fn.triggerHandler){C(document).triggerHandler("ready");C(document).off("ready")}}});function A(){document.removeEventListener("DOMContentLoaded",A,false);window.removeEventListener("load",A,false);C.ready()}C.ready.promise=function(D){if(!B){B=C.Deferred();if(document.readyState==="complete"){setTimeout(C.ready)}else{document.addEventListener("DOMContentLoaded",A,false);window.addEventListener("load",A,false)}}return B.promise(D)};C.ready.promise()});