define(["./core","./var/indexOf","./traversing/var/rneedsContext","./core/init","./traversing/findFilter","./selector"],function(E,D,F){var B=/^(?:parents|prev(?:Until|All))/,A={children:true,contents:true,next:true,prev:true};E.extend({dir:function(J,G,K){var I=[],H=K!==undefined;while((J=J[G])&&J.nodeType!==9){if(J.nodeType===1){if(H&&E(J).is(K)){break}I.push(J)}}return I},sibling:function(G,I){var H=[];for(;G;G=G.nextSibling){if(G.nodeType===1&&G!==I){H.push(G)}}return H}});E.fn.extend({has:function(I){var G=E(I,this),H=G.length;return this.filter(function(){var J=0;for(;J<H;J++){if(E.contains(this,G[J])){return true}}})},closest:function(J,H){var G,I=0,K=this.length,L=[],M=F.test(J)||typeof J!=="string"?E(J,H||this.context):0;for(;I<K;I++){for(G=this[I];G&&G!==H;G=G.parentNode){if(G.nodeType<11&&(M?M.index(G)>-1:G.nodeType===1&&E.find.matchesSelector(G,J))){L.push(G);break}}}return this.pushStack(L.length>1?E.unique(L):L)},index:function(G){if(!G){return(this[0]&&this[0].parentNode)?this.first().prevAll().length:-1}if(typeof G==="string"){return D.call(E(G),this[0])}return D.call(this,G.jquery?G[0]:G)},add:function(H,G){return this.pushStack(E.unique(E.merge(this.get(),E(H,G))))},addBack:function(G){return this.add(G==null?this.prevObject:this.prevObject.filter(G))}});function C(G,H){while((G=G[H])&&G.nodeType!==1){}return G}E.each({parent:function(G){var H=G.parentNode;return H&&H.nodeType!==11?H:null},parents:function(G){return E.dir(G,"parentNode")},parentsUntil:function(H,G,I){return E.dir(H,"parentNode",I)},next:function(G){return C(G,"nextSibling")},prev:function(G){return C(G,"previousSibling")},nextAll:function(G){return E.dir(G,"nextSibling")},prevAll:function(G){return E.dir(G,"previousSibling")},nextUntil:function(H,G,I){return E.dir(H,"nextSibling",I)},prevUntil:function(H,G,I){return E.dir(H,"previousSibling",I)},siblings:function(G){return E.sibling((G.parentNode||{}).firstChild,G)},children:function(G){return E.sibling(G.firstChild)},contents:function(G){return G.contentDocument||E.merge([],G.childNodes)}},function(H,G){E.fn[H]=function(K,J){var I=E.map(this,G,K);if(H.slice(-5)!=="Until"){J=K}if(J&&typeof J==="string"){I=E.filter(J,I)}if(this.length>1){if(!A[H]){E.unique(I)}if(B.test(H)){I.reverse()}}return this.pushStack(I)}});return E});