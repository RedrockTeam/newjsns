define(["../core","../var/rnotwhite","./accepts"],function(C,B){function A(){Object.defineProperty(this.cache={},0,{get:function(){return{}}});this.expando=C.expando+A.uid++}A.uid=1;A.accepts=C.acceptData;A.prototype={key:function(G){if(!A.accepts(G)){return 0}var F={},E=G[this.expando];if(!E){E=A.uid++;try{F[this.expando]={value:E};Object.defineProperties(G,F)}catch(D){F[this.expando]=E;C.extend(G,F)}}if(!this.cache[E]){this.cache[E]={}}return E},set:function(H,I,G){var F,E=this.key(H),D=this.cache[E];if(typeof I==="string"){D[I]=G}else{if(C.isEmptyObject(D)){C.extend(this.cache[E],I)}else{for(F in I){D[F]=I[F]}}}return D},get:function(F,D){var E=this.cache[this.key(F)];return D===undefined?E:E[D]},access:function(G,D,F){var E;if(D===undefined||((D&&typeof D==="string")&&F===undefined)){E=this.get(G,D);return E!==undefined?E:this.get(G,C.camelCase(D))}this.set(G,D,F);return F!==undefined?F:D},remove:function(J,D){var E,G,I,F=this.key(J),H=this.cache[F];if(D===undefined){this.cache[F]={}}else{if(C.isArray(D)){G=D.concat(D.map(C.camelCase))}else{I=C.camelCase(D);if(D in H){G=[D,I]}else{G=I;G=G in H?[G]:(G.match(B)||[])}}E=G.length;while(E--){delete H[G[E]]}}},hasData:function(D){return !C.isEmptyObject(this.cache[D[this.expando]]||{})},discard:function(D){if(D[this.expando]){delete this.cache[D[this.expando]]}}};return A});