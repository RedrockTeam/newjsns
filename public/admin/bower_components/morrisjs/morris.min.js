(function(){var F,D,E,I,A=[].slice,G=function(K,J){return function(){return K.apply(J,arguments)}},H={}.hasOwnProperty,B=function(M,K){function L(){this.constructor=M}for(var J in K){H.call(K,J)&&(M[J]=K[J])}return L.prototype=K.prototype,M.prototype=new L,M.__super__=K.prototype,M},C=[].indexOf||function(L){for(var J=0,K=this.length;K>J;J++){if(J in this&&this[J]===L){return J}}return -1};D=window.Morris={},F=jQuery,D.EventEmitter=function(){function J(){}return J.prototype.on=function(L,K){return null==this.handlers&&(this.handlers={}),null==this.handlers[L]&&(this.handlers[L]=[]),this.handlers[L].push(K),this},J.prototype.fire=function(){var P,N,O,L,Q,K,M;if(O=arguments[0],P=2<=arguments.length?A.call(arguments,1):[],null!=this.handlers&&null!=this.handlers[O]){for(K=this.handlers[O],M=[],L=0,Q=K.length;Q>L;L++){N=K[L],M.push(N.apply(null,P))}return M}},J}(),D.commas=function(N){var L,M,J,K;return null!=N?(J=0>N?"-":"",L=Math.abs(N),M=Math.floor(L).toFixed(0),J+=M.replace(/(?=(?:\d{3})+$)(?!^)/g,","),K=L.toString(),K.length>M.length&&(J+=K.slice(M.length)),J):"-"},D.pad2=function(J){return(10>J?"0":"")+J},D.Grid=function(K){function J(L){this.resizeHandler=G(this.resizeHandler,this);var M=this;if(this.el="string"==typeof L.element?F(document.getElementById(L.element)):F(L.element),null==this.el||0===this.el.length){throw new Error("Graph container element not found")}"static"===this.el.css("position")&&this.el.css("position","relative"),this.options=F.extend({},this.gridDefaults,this.defaults||{},L),"string"==typeof this.options.units&&(this.options.postUnits=L.units),this.raphael=new Raphael(this.el[0]),this.elementWidth=null,this.elementHeight=null,this.dirty=!1,this.selectFrom=null,this.init&&this.init(),this.setData(this.options.data),this.el.bind("mousemove",function(R){var Q,O,P,S,N;return O=M.el.offset(),N=R.pageX-O.left,M.selectFrom?(Q=M.data[M.hitTest(Math.min(N,M.selectFrom))]._x,P=M.data[M.hitTest(Math.max(N,M.selectFrom))]._x,S=P-Q,M.selectionRect.attr({x:Q,width:S})):M.fire("hovermove",N,R.pageY-O.top)}),this.el.bind("mouseleave",function(){return M.selectFrom&&(M.selectionRect.hide(),M.selectFrom=null),M.fire("hoverout")}),this.el.bind("touchstart touchmove touchend",function(P){var O,N;return N=P.originalEvent.touches[0]||P.originalEvent.changedTouches[0],O=M.el.offset(),M.fire("hovermove",N.pageX-O.left,N.pageY-O.top)}),this.el.bind("click",function(O){var N;return N=M.el.offset(),M.fire("gridclick",O.pageX-N.left,O.pageY-N.top)}),this.options.rangeSelect&&(this.selectionRect=this.raphael.rect(0,0,0,this.el.innerHeight()).attr({fill:this.options.rangeSelectColor,stroke:!1}).toBack().hide(),this.el.bind("mousedown",function(O){var N;return N=M.el.offset(),M.startRange(O.pageX-N.left)}),this.el.bind("mouseup",function(O){var N;return N=M.el.offset(),M.endRange(O.pageX-N.left),M.fire("hovermove",O.pageX-N.left,O.pageY-N.top)})),this.options.resize&&F(window).bind("resize",function(){return null!=M.timeoutId&&window.clearTimeout(M.timeoutId),M.timeoutId=window.setTimeout(M.resizeHandler,100)}),this.el.css("-webkit-tap-highlight-color","rgba(0,0,0,0)"),this.postInit&&this.postInit()}return B(J,K),J.prototype.gridDefaults={dateFormat:null,axes:!0,grid:!0,gridLineColor:"#aaa",gridStrokeWidth:0.5,gridTextColor:"#888",gridTextSize:12,gridTextFamily:"sans-serif",gridTextWeight:"normal",hideHover:!1,yLabelFormat:null,xLabelAngle:0,numLines:5,padding:25,parseTime:!0,postUnits:"",preUnits:"",ymax:"auto",ymin:"auto 0",goals:[],goalStrokeWidth:1,goalLineColors:["#666633","#999966","#cc6666","#663333"],events:[],eventStrokeWidth:1,eventLineColors:["#005a04","#ccffbb","#3a5f0b","#005502"],rangeSelect:null,rangeSelectColor:"#eef",resize:!1},J.prototype.setData=function(X,W){var b,s,Y,Z,Q,R,O,P,U,V,S,T,M,N,L;return null==W&&(W=!0),this.options.data=X,null==X||0===X.length?(this.data=[],this.raphael.clear(),null!=this.hover&&this.hover.hide(),void 0):(T=this.cumulative?0:null,M=this.cumulative?0:null,this.options.goals.length>0&&(Q=Math.min.apply(Math,this.options.goals),Z=Math.max.apply(Math,this.options.goals),M=null!=M?Math.min(M,Q):Q,T=null!=T?Math.max(T,Z):Z),this.data=function(){var f,e,a;for(a=[],Y=f=0,e=X.length;e>f;Y=++f){O=X[Y],R={src:O},R.label=O[this.options.xkey],this.options.parseTime?(R.x=D.parseDate(R.label),this.options.dateFormat?R.label=this.options.dateFormat(R.x):"number"==typeof R.label&&(R.label=new Date(R.label).toString())):(R.x=Y,this.options.xLabelFormat&&(R.label=this.options.xLabelFormat(R))),U=0,R.y=function(){var j,h,i,g;for(i=this.options.ykeys,g=[],s=j=0,h=i.length;h>j;s=++j){S=i[s],N=O[S],"string"==typeof N&&(N=parseFloat(N)),null!=N&&"number"!=typeof N&&(N=null),null!=N&&(this.cumulative?U+=N:null!=T?(T=Math.max(N,T),M=Math.min(N,M)):T=M=N),this.cumulative&&null!=U&&(T=Math.max(U,T),M=Math.min(U,M)),g.push(N)}return g}.call(this),a.push(R)}return a}.call(this),this.options.parseTime&&(this.data=this.data.sort(function(d,c){return(d.x>c.x)-(c.x>d.x)})),this.xmin=this.data[0].x,this.xmax=this.data[this.data.length-1].x,this.events=[],this.options.events.length>0&&(this.events=this.options.parseTime?function(){var h,g,d,i;for(d=this.options.events,i=[],h=0,g=d.length;g>h;h++){b=d[h],i.push(D.parseDate(b))}return i}.call(this):this.options.events,this.xmax=Math.max(this.xmax,Math.max.apply(Math,this.events)),this.xmin=Math.min(this.xmin,Math.min.apply(Math,this.events))),this.xmin===this.xmax&&(this.xmin-=1,this.xmax+=1),this.ymin=this.yboundary("min",M),this.ymax=this.yboundary("max",T),this.ymin===this.ymax&&(M&&(this.ymin-=1),this.ymax+=1),((L=this.options.axes)===!0||"both"===L||"y"===L||this.options.grid===!0)&&(this.options.ymax===this.gridDefaults.ymax&&this.options.ymin===this.gridDefaults.ymin?(this.grid=this.autoGridLines(this.ymin,this.ymax,this.options.numLines),this.ymin=Math.min(this.ymin,this.grid[0]),this.ymax=Math.max(this.ymax,this.grid[this.grid.length-1])):(P=(this.ymax-this.ymin)/(this.options.numLines-1),this.grid=function(){var h,f,g,e;for(e=[],V=h=f=this.ymin,g=this.ymax;P>0?g>=h:h>=g;V=h+=P){e.push(V)}return e}.call(this))),this.dirty=!0,W?this.redraw():void 0)},J.prototype.yboundary=function(O,M){var N,L;return N=this.options["y"+O],"string"==typeof N?"auto"===N.slice(0,4)?N.length>5?(L=parseInt(N.slice(5),10),null==M?L:Math[O](M,L)):null!=M?M:0:parseInt(N,10):N},J.prototype.autoGridLines=function(T,R,S){var W,L,U,V,O,P,M,N,Q;return O=R-T,Q=Math.floor(Math.log(O)/Math.log(10)),M=Math.pow(10,Q),L=Math.floor(T/M)*M,W=Math.ceil(R/M)*M,P=(W-L)/(S-1),1===M&&P>1&&Math.ceil(P)!==P&&(P=Math.ceil(P),W=L+P*(S-1)),0>L&&W>0&&(L=Math.floor(T/P)*P,W=Math.ceil(R/P)*P),1>P?(V=Math.floor(Math.log(P)/Math.log(10)),U=function(){var Y,X;for(X=[],N=Y=L;P>0?W>=Y:Y>=W;N=Y+=P){X.push(parseFloat(N.toFixed(1-V)))}return X}()):U=function(){var Y,X;for(X=[],N=Y=L;P>0?W>=Y:Y>=W;N=Y+=P){X.push(N)}return X}(),U},J.prototype._calc=function(){var P,N,O,S,L,Q,R,M;return L=this.el.width(),O=this.el.height(),(this.elementWidth!==L||this.elementHeight!==O||this.dirty)&&(this.elementWidth=L,this.elementHeight=O,this.dirty=!1,this.left=this.options.padding,this.right=this.elementWidth-this.options.padding,this.top=this.options.padding,this.bottom=this.elementHeight-this.options.padding,((R=this.options.axes)===!0||"both"===R||"y"===R)&&(Q=function(){var W,V,T,U;for(T=this.grid,U=[],W=0,V=T.length;V>W;W++){N=T[W],U.push(this.measureText(this.yAxisFormat(N)).width)}return U}.call(this),this.left+=Math.max.apply(Math,Q)),((M=this.options.axes)===!0||"both"===M||"x"===M)&&(P=function(){var V,T,U;for(U=[],S=V=0,T=this.data.length;T>=0?T>V:V>T;S=T>=0?++V:--V){U.push(this.measureText(this.data[S].text,-this.options.xLabelAngle).height)}return U}.call(this),this.bottom-=Math.max.apply(Math,P)),this.width=Math.max(1,this.right-this.left),this.height=Math.max(1,this.bottom-this.top),this.dx=this.width/(this.xmax-this.xmin),this.dy=this.height/(this.ymax-this.ymin),this.calc)?this.calc():void 0},J.prototype.transY=function(L){return this.bottom-(L-this.ymin)*this.dy},J.prototype.transX=function(L){return 1===this.data.length?(this.left+this.right)/2:this.left+(L-this.xmin)*this.dx},J.prototype.redraw=function(){return this.raphael.clear(),this._calc(),this.drawGrid(),this.drawGoals(),this.drawEvents(),this.draw?this.draw():void 0},J.prototype.measureText=function(O,M){var N,L;return null==M&&(M=0),L=this.raphael.text(100,100,O).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).rotate(M),N=L.getBBox(),L.remove(),N},J.prototype.yAxisFormat=function(L){return this.yLabelFormat(L)},J.prototype.yLabelFormat=function(L){return"function"==typeof this.options.yLabelFormat?this.options.yLabelFormat(L):""+this.options.preUnits+D.commas(L)+this.options.postUnits},J.prototype.drawGrid=function(){var P,N,O,S,L,Q,R,M;if(this.options.grid!==!1||(L=this.options.axes)===!0||"both"===L||"y"===L){for(Q=this.grid,M=[],O=0,S=Q.length;S>O;O++){P=Q[O],N=this.transY(P),((R=this.options.axes)===!0||"both"===R||"y"===R)&&this.drawYAxisLabel(this.left-this.options.padding/2,N,this.yAxisFormat(P)),this.options.grid?M.push(this.drawGridLine("M"+this.left+","+N+"H"+(this.left+this.width))):M.push(void 0)}return M}},J.prototype.drawGoals=function(){var Q,O,P,M,N,R,L;for(R=this.options.goals,L=[],P=M=0,N=R.length;N>M;P=++M){O=R[P],Q=this.options.goalLineColors[P%this.options.goalLineColors.length],L.push(this.drawGoal(O,Q))}return L},J.prototype.drawEvents=function(){var Q,O,P,M,N,R,L;for(R=this.events,L=[],P=M=0,N=R.length;N>M;P=++M){O=R[P],Q=this.options.eventLineColors[P%this.options.eventLineColors.length],L.push(this.drawEvent(O,Q))}return L},J.prototype.drawGoal=function(M,L){return this.raphael.path("M"+this.left+","+this.transY(M)+"H"+this.right).attr("stroke",L).attr("stroke-width",this.options.goalStrokeWidth)},J.prototype.drawEvent=function(M,L){return this.raphael.path("M"+this.transX(M)+","+this.bottom+"V"+this.top).attr("stroke",L).attr("stroke-width",this.options.eventStrokeWidth)},J.prototype.drawYAxisLabel=function(N,L,M){return this.raphael.text(N,L,M).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor).attr("text-anchor","end")},J.prototype.drawGridLine=function(L){return this.raphael.path(L).attr("stroke",this.options.gridLineColor).attr("stroke-width",this.options.gridStrokeWidth)},J.prototype.startRange=function(L){return this.hover.hide(),this.selectFrom=L,this.selectionRect.attr({x:L,width:0}).show()},J.prototype.endRange=function(N){var L,M;return this.selectFrom?(M=Math.min(this.selectFrom,N),L=Math.max(this.selectFrom,N),this.options.rangeSelect.call(this.el,{start:this.data[this.hitTest(M)].x,end:this.data[this.hitTest(L)].x}),this.selectFrom=null):void 0},J.prototype.resizeHandler=function(){return this.timeoutId=null,this.raphael.setSize(this.el.width(),this.el.height()),this.redraw()},J}(D.EventEmitter),D.parseDate=function(R){var P,Q,U,J,S,T,M,N,K,L,O;return"number"==typeof R?R:(Q=R.match(/^(\d+) Q(\d)$/),J=R.match(/^(\d+)-(\d+)$/),S=R.match(/^(\d+)-(\d+)-(\d+)$/),M=R.match(/^(\d+) W(\d+)$/),N=R.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+)(Z|([+-])(\d\d):?(\d\d))?$/),K=R.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+):(\d+(\.\d+)?)(Z|([+-])(\d\d):?(\d\d))?$/),Q?new Date(parseInt(Q[1],10),3*parseInt(Q[2],10)-1,1).getTime():J?new Date(parseInt(J[1],10),parseInt(J[2],10)-1,1).getTime():S?new Date(parseInt(S[1],10),parseInt(S[2],10)-1,parseInt(S[3],10)).getTime():M?(L=new Date(parseInt(M[1],10),0,1),4!==L.getDay()&&L.setMonth(0,1+(4-L.getDay()+7)%7),L.getTime()+604800000*parseInt(M[2],10)):N?N[6]?(T=0,"Z"!==N[6]&&(T=60*parseInt(N[8],10)+parseInt(N[9],10),"+"===N[7]&&(T=0-T)),Date.UTC(parseInt(N[1],10),parseInt(N[2],10)-1,parseInt(N[3],10),parseInt(N[4],10),parseInt(N[5],10)+T)):new Date(parseInt(N[1],10),parseInt(N[2],10)-1,parseInt(N[3],10),parseInt(N[4],10),parseInt(N[5],10)).getTime():K?(O=parseFloat(K[6]),P=Math.floor(O),U=Math.round(1000*(O-P)),K[8]?(T=0,"Z"!==K[8]&&(T=60*parseInt(K[10],10)+parseInt(K[11],10),"+"===K[9]&&(T=0-T)),Date.UTC(parseInt(K[1],10),parseInt(K[2],10)-1,parseInt(K[3],10),parseInt(K[4],10),parseInt(K[5],10)+T,P,U)):new Date(parseInt(K[1],10),parseInt(K[2],10)-1,parseInt(K[3],10),parseInt(K[4],10),parseInt(K[5],10),P,U).getTime()):new Date(parseInt(R,10),0,1).getTime())},D.Hover=function(){function J(K){null==K&&(K={}),this.options=F.extend({},D.Hover.defaults,K),this.el=F("<div class='"+this.options["class"]+"'></div>"),this.el.hide(),this.options.parent.append(this.el)}return J.defaults={"class":"morris-hover morris-default-style"},J.prototype.update=function(M,K,L){return M?(this.html(M),this.show(),this.moveTo(K,L)):this.hide()},J.prototype.html=function(K){return this.el.html(K)},J.prototype.moveTo=function(O,M){var N,R,K,P,Q,L;return Q=this.options.parent.innerWidth(),P=this.options.parent.innerHeight(),R=this.el.outerWidth(),N=this.el.outerHeight(),K=Math.min(Math.max(0,O-R/2),Q-R),null!=M?(L=M-N-10,0>L&&(L=M+10,L+N>P&&(L=P/2-N/2))):L=P/2-N/2,this.el.css({left:K+"px",top:parseInt(L)+"px"})},J.prototype.show=function(){return this.el.show()},J.prototype.hide=function(){return this.el.hide()},J}(),D.Line=function(K){function J(L){return this.hilight=G(this.hilight,this),this.onHoverOut=G(this.onHoverOut,this),this.onHoverMove=G(this.onHoverMove,this),this.onGridClick=G(this.onGridClick,this),this instanceof D.Line?(J.__super__.constructor.call(this,L),void 0):new D.Line(L)}return B(J,K),J.prototype.init=function(){return"always"!==this.options.hideHover?(this.hover=new D.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)):void 0},J.prototype.defaults={lineWidth:3,pointSize:4,lineColors:["#0b62a4","#7A92A3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],pointStrokeWidths:[1],pointStrokeColors:["#ffffff"],pointFillColors:[],smooth:!0,xLabels:"auto",xLabelFormat:null,xLabelMargin:24,hideHover:!1},J.prototype.calc=function(){return this.calcPoints(),this.generatePaths()},J.prototype.calcPoints=function(){var P,N,O,L,M,Q;for(M=this.data,Q=[],O=0,L=M.length;L>O;O++){P=M[O],P._x=this.transX(P.x),P._y=function(){var T,R,S,U;for(S=P.y,U=[],T=0,R=S.length;R>T;T++){N=S[T],null!=N?U.push(this.transY(N)):U.push(N)}return U}.call(this),Q.push(P._ymax=Math.min.apply(Math,[this.bottom].concat(function(){var T,R,S,U;for(S=P._y,U=[],T=0,R=S.length;R>T;T++){N=S[T],null!=N&&U.push(N)}return U}())))}return Q},J.prototype.hitTest=function(P){var N,O,L,M,Q;if(0===this.data.length){return null}for(Q=this.data.slice(1),N=L=0,M=Q.length;M>L&&(O=Q[N],!(P<(O._x+this.data[N]._x)/2));N=++L){}return N},J.prototype.onGridClick=function(N,L){var M;return M=this.hitTest(N),this.fire("click",M,this.data[M].src,N,L)},J.prototype.onHoverMove=function(M){var L;return L=this.hitTest(M),this.displayHoverForRow(L)},J.prototype.onHoverOut=function(){return this.options.hideHover!==!1?this.displayHoverForRow(null):void 0},J.prototype.displayHoverForRow=function(M){var L;return null!=M?((L=this.hover).update.apply(L,this.hoverContentForRow(M)),this.hilight(M)):(this.hover.hide(),this.hilight())},J.prototype.hoverContentForRow=function(P){var N,O,S,L,Q,R,M;for(S=this.data[P],N="<div class='morris-hover-row-label'>"+S.label+"</div>",M=S.y,O=Q=0,R=M.length;R>Q;O=++Q){L=M[O],N+="<div class='morris-hover-point' style='color: "+this.colorFor(S,O,"label")+"'>\n  "+this.options.labels[O]+":\n  "+this.yLabelFormat(L)+"\n</div>"}return"function"==typeof this.options.hoverCallback&&(N=this.options.hoverCallback(P,this.options,N,S.src)),[N,S._x,S._ymax]},J.prototype.generatePaths=function(){var O,N,L,M;return this.paths=function(){var S,P,Q,R;for(R=[],N=S=0,P=this.options.ykeys.length;P>=0?P>S:S>P;N=P>=0?++S:--S){M="boolean"==typeof this.options.smooth?this.options.smooth:(Q=this.options.ykeys[N],C.call(this.options.smooth,Q)>=0),O=function(){var V,U,T,W;for(T=this.data,W=[],V=0,U=T.length;U>V;V++){L=T[V],void 0!==L._y[N]&&W.push({x:L._x,y:L._y[N]})}return W}.call(this),O.length>1?R.push(D.Line.createPath(O,M,this.bottom)):R.push(null)}return R}.call(this)},J.prototype.draw=function(){var L;return((L=this.options.axes)===!0||"both"===L||"x"===L)&&this.drawXAxis(),this.drawSeries(),this.options.hideHover===!1?this.displayHoverForRow(this.data.length-1):void 0},J.prototype.drawXAxis=function(){var S,R,V,L,T,U,O,P,M,N,Q=this;for(O=this.bottom+this.options.padding/2,T=null,L=null,S=function(f,Z){var e,X,W,Y,h;return e=Q.drawXAxisLabel(Q.transX(Z),O,f),h=e.getBBox(),e.transform("r"+-Q.options.xLabelAngle),X=e.getBBox(),e.transform("t0,"+X.height/2+"..."),0!==Q.options.xLabelAngle&&(Y=-0.5*h.width*Math.cos(Q.options.xLabelAngle*Math.PI/180),e.transform("t"+Y+",0...")),X=e.getBBox(),(null==T||T>=X.x+X.width||null!=L&&L>=X.x)&&X.x>=0&&X.x+X.width<Q.el.width()?(0!==Q.options.xLabelAngle&&(W=1.25*Q.options.gridTextSize/Math.sin(Q.options.xLabelAngle*Math.PI/180),L=X.x-W),T=X.x-Q.options.xLabelMargin):e.remove()},V=this.options.parseTime?1===this.data.length&&"auto"===this.options.xLabels?[[this.data[0].label,this.data[0].x]]:D.labelSeries(this.xmin,this.xmax,this.width,this.options.xLabels,this.options.xLabelFormat):function(){var Z,X,Y,W;for(Y=this.data,W=[],Z=0,X=Y.length;X>Z;Z++){U=Y[Z],W.push([U.label,U.x])}return W}.call(this),V.reverse(),N=[],P=0,M=V.length;M>P;P++){R=V[P],N.push(S(R[0],R[1]))}return N},J.prototype.drawSeries=function(){var P,N,O,L,M,Q;for(this.seriesPoints=[],P=N=L=this.options.ykeys.length-1;0>=L?0>=N:N>=0;P=0>=L?++N:--N){this._drawLineFor(P)}for(Q=[],P=O=M=this.options.ykeys.length-1;0>=M?0>=O:O>=0;P=0>=M?++O:--O){Q.push(this._drawPointFor(P))}return Q},J.prototype._drawPointFor=function(Q){var O,P,M,N,R,L;for(this.seriesPoints[Q]=[],R=this.data,L=[],M=0,N=R.length;N>M;M++){P=R[M],O=null,null!=P._y[Q]&&(O=this.drawLinePoint(P._x,P._y[Q],this.colorFor(P,Q,"point"),Q)),L.push(this.seriesPoints[Q].push(O))}return L},J.prototype._drawLineFor=function(M){var L;return L=this.paths[M],null!==L?this.drawLinePath(L,this.colorFor(null,M,"line"),M):void 0},J.createPath=function(X,W,b){var s,Y,Z,Q,R,O,P,U,V,S,T,M,N,L;for(P="",W&&(Z=D.Line.gradients(X)),U={y:null},Q=N=0,L=X.length;L>N;Q=++N){s=X[Q],null!=s.y&&(null!=U.y?W?(Y=Z[Q],O=Z[Q-1],R=(s.x-U.x)/4,V=U.x+R,T=Math.min(b,U.y+R*O),S=s.x-R,M=Math.min(b,s.y-R*Y),P+="C"+V+","+T+","+S+","+M+","+s.x+","+s.y):P+="L"+s.x+","+s.y:W&&null==Z[Q]||(P+="M"+s.x+","+s.y)),U=s}return P},J.gradients=function(Q){var O,P,T,L,R,S,M,N;for(P=function(V,U){return(V.y-U.y)/(V.x-U.x)},N=[],T=S=0,M=Q.length;M>S;T=++S){O=Q[T],null!=O.y?(L=Q[T+1]||{y:null},R=Q[T-1]||{y:null},null!=R.y&&null!=L.y?N.push(P(R,L)):null!=R.y?N.push(P(R,O)):null!=L.y?N.push(P(O,L)):N.push(null)):N.push(null)}return N},J.prototype.hilight=function(P){var N,O,L,M,Q;if(null!==this.prevHilight&&this.prevHilight!==P){for(N=O=0,M=this.seriesPoints.length-1;M>=0?M>=O:O>=M;N=M>=0?++O:--O){this.seriesPoints[N][this.prevHilight]&&this.seriesPoints[N][this.prevHilight].animate(this.pointShrinkSeries(N))}}if(null!==P&&this.prevHilight!==P){for(N=L=0,Q=this.seriesPoints.length-1;Q>=0?Q>=L:L>=Q;N=Q>=0?++L:--L){this.seriesPoints[N][P]&&this.seriesPoints[N][P].animate(this.pointGrowSeries(N))}}return this.prevHilight=P},J.prototype.colorFor=function(N,L,M){return"function"==typeof this.options.lineColors?this.options.lineColors.call(this,N,L,M):"point"===M?this.options.pointFillColors[L%this.options.pointFillColors.length]||this.options.lineColors[L%this.options.lineColors.length]:this.options.lineColors[L%this.options.lineColors.length]},J.prototype.drawXAxisLabel=function(N,L,M){return this.raphael.text(N,L,M).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},J.prototype.drawLinePath=function(N,L,M){return this.raphael.path(N).attr("stroke",L).attr("stroke-width",this.lineWidthForSeries(M))},J.prototype.drawLinePoint=function(O,M,N,L){return this.raphael.circle(O,M,this.pointSizeForSeries(L)).attr("fill",N).attr("stroke-width",this.pointStrokeWidthForSeries(L)).attr("stroke",this.pointStrokeColorForSeries(L))},J.prototype.pointStrokeWidthForSeries=function(L){return this.options.pointStrokeWidths[L%this.options.pointStrokeWidths.length]},J.prototype.pointStrokeColorForSeries=function(L){return this.options.pointStrokeColors[L%this.options.pointStrokeColors.length]},J.prototype.lineWidthForSeries=function(L){return this.options.lineWidth instanceof Array?this.options.lineWidth[L%this.options.lineWidth.length]:this.options.lineWidth},J.prototype.pointSizeForSeries=function(L){return this.options.pointSize instanceof Array?this.options.pointSize[L%this.options.pointSize.length]:this.options.pointSize},J.prototype.pointGrowSeries=function(L){return Raphael.animation({r:this.pointSizeForSeries(L)+3},25,"linear")},J.prototype.pointShrinkSeries=function(L){return Raphael.animation({r:this.pointSizeForSeries(L)},25,"linear")},J}(D.Grid),D.labelSeries=function(V,Y,J,W,X){var P,Q,N,O,T,U,R,S,K,L,M;if(N=200*(Y-V)/J,Q=new Date(V),R=D.LABEL_SPECS[W],void 0===R){for(M=D.AUTO_LABEL_ORDER,K=0,L=M.length;L>K;K++){if(O=M[K],U=D.LABEL_SPECS[O],N>=U.span){R=U;break}}}for(void 0===R&&(R=D.LABEL_SPECS.second),X&&(R=F.extend({},R,{fmt:X})),P=R.start(Q),T=[];(S=P.getTime())<=Y;){S>=V&&T.push([R.fmt(P),S]),R.incr(P)}return T},E=function(J){return{span:60*J*1000,start:function(K){return new Date(K.getFullYear(),K.getMonth(),K.getDate(),K.getHours())},fmt:function(K){return""+D.pad2(K.getHours())+":"+D.pad2(K.getMinutes())},incr:function(K){return K.setUTCMinutes(K.getUTCMinutes()+J)}}},I=function(J){return{span:1000*J,start:function(K){return new Date(K.getFullYear(),K.getMonth(),K.getDate(),K.getHours(),K.getMinutes())},fmt:function(K){return""+D.pad2(K.getHours())+":"+D.pad2(K.getMinutes())+":"+D.pad2(K.getSeconds())},incr:function(K){return K.setUTCSeconds(K.getUTCSeconds()+J)}}},D.LABEL_SPECS={decade:{span:172800000000,start:function(J){return new Date(J.getFullYear()-J.getFullYear()%10,0,1)},fmt:function(J){return""+J.getFullYear()},incr:function(J){return J.setFullYear(J.getFullYear()+10)}},year:{span:17280000000,start:function(J){return new Date(J.getFullYear(),0,1)},fmt:function(J){return""+J.getFullYear()},incr:function(J){return J.setFullYear(J.getFullYear()+1)}},month:{span:2419200000,start:function(J){return new Date(J.getFullYear(),J.getMonth(),1)},fmt:function(J){return""+J.getFullYear()+"-"+D.pad2(J.getMonth()+1)},incr:function(J){return J.setMonth(J.getMonth()+1)}},week:{span:604800000,start:function(J){return new Date(J.getFullYear(),J.getMonth(),J.getDate())},fmt:function(J){return""+J.getFullYear()+"-"+D.pad2(J.getMonth()+1)+"-"+D.pad2(J.getDate())},incr:function(J){return J.setDate(J.getDate()+7)}},day:{span:86400000,start:function(J){return new Date(J.getFullYear(),J.getMonth(),J.getDate())},fmt:function(J){return""+J.getFullYear()+"-"+D.pad2(J.getMonth()+1)+"-"+D.pad2(J.getDate())},incr:function(J){return J.setDate(J.getDate()+1)}},hour:E(60),"30min":E(30),"15min":E(15),"10min":E(10),"5min":E(5),minute:E(1),"30sec":I(30),"15sec":I(15),"10sec":I(10),"5sec":I(5),second:I(1)},D.AUTO_LABEL_ORDER=["decade","year","month","week","day","hour","30min","15min","10min","5min","minute","30sec","15sec","10sec","5sec","second"],D.Area=function(L){function J(M){var N;return this instanceof D.Area?(N=F.extend({},K,M),this.cumulative=!N.behaveLikeLine,"auto"===N.fillOpacity&&(N.fillOpacity=N.behaveLikeLine?0.8:1),J.__super__.constructor.call(this,N),void 0):new D.Area(M)}var K;return B(J,L),K={fillOpacity:"auto",behaveLikeLine:!1},J.prototype.calcPoints=function(){var R,P,Q,N,O,S,M;for(S=this.data,M=[],N=0,O=S.length;O>N;N++){R=S[N],R._x=this.transX(R.x),P=0,R._y=function(){var U,V,W,T;for(W=R.y,T=[],U=0,V=W.length;V>U;U++){Q=W[U],this.options.behaveLikeLine?T.push(this.transY(Q)):(P+=Q||0,T.push(this.transY(P)))}return T}.call(this),M.push(R._ymax=Math.max.apply(Math,R._y))}return M},J.prototype.drawSeries=function(){var Q,O,P,T,M,R,S,N;for(this.seriesPoints=[],O=this.options.behaveLikeLine?function(){R=[];for(var V=0,U=this.options.ykeys.length-1;U>=0?U>=V:V>=U;U>=0?V++:V--){R.push(V)}return R}.apply(this):function(){S=[];for(var U=M=this.options.ykeys.length-1;0>=M?0>=U:U>=0;0>=M?U++:U--){S.push(U)}return S}.apply(this),N=[],P=0,T=O.length;T>P;P++){Q=O[P],this._drawFillFor(Q),this._drawLineFor(Q),N.push(this._drawPointFor(Q))}return N},J.prototype._drawFillFor=function(N){var M;return M=this.paths[N],null!==M?(M+="L"+this.transX(this.xmax)+","+this.bottom+"L"+this.transX(this.xmin)+","+this.bottom+"Z",this.drawFilledPath(M,this.fillForSeries(N))):void 0},J.prototype.fillForSeries=function(N){var M;return M=Raphael.rgb2hsl(this.colorFor(this.data[N],N,"line")),Raphael.hsl(M.h,this.options.behaveLikeLine?0.9*M.s:0.75*M.s,Math.min(0.98,this.options.behaveLikeLine?1.2*M.l:1.25*M.l))},J.prototype.drawFilledPath=function(N,M){return this.raphael.path(N).attr("fill",M).attr("fill-opacity",this.options.fillOpacity).attr("stroke","none")},J}(D.Line),D.Bar=function(K){function J(L){return this.onHoverOut=G(this.onHoverOut,this),this.onHoverMove=G(this.onHoverMove,this),this.onGridClick=G(this.onGridClick,this),this instanceof D.Bar?(J.__super__.constructor.call(this,F.extend({},L,{parseTime:!1})),void 0):new D.Bar(L)}return B(J,K),J.prototype.init=function(){return this.cumulative=this.options.stacked,"always"!==this.options.hideHover?(this.hover=new D.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut),this.on("gridclick",this.onGridClick)):void 0},J.prototype.defaults={barSizeRatio:0.75,barGap:3,barColors:["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],barOpacity:1,barRadius:[0,0,0,0],xLabelMargin:50},J.prototype.calc=function(){var L;return this.calcBars(),this.options.hideHover===!1?(L=this.hover).update.apply(L,this.hoverContentForRow(this.data.length-1)):void 0},J.prototype.calcBars=function(){var Q,O,P,M,N,R,L;for(R=this.data,L=[],Q=M=0,N=R.length;N>M;Q=++M){O=R[Q],O._x=this.left+this.width*(Q+0.5)/this.data.length,L.push(O._y=function(){var U,S,T,V;for(T=O.y,V=[],U=0,S=T.length;S>U;U++){P=T[U],null!=P?V.push(this.transY(P)):V.push(null)}return V}.call(this))}return L},J.prototype.draw=function(){var L;return((L=this.options.axes)===!0||"both"===L||"x"===L)&&this.drawXAxis(),this.drawSeries()},J.prototype.drawXAxis=function(){var U,S,T,X,L,V,W,O,P,M,N,Q,R;for(M=this.bottom+(this.options.xAxisLabelTopPadding||this.options.padding/2),W=null,V=null,R=[],U=N=0,Q=this.data.length;Q>=0?Q>N:N>Q;U=Q>=0?++N:--N){O=this.data[this.data.length-1-U],S=this.drawXAxisLabel(O._x,M,O.label),P=S.getBBox(),S.transform("r"+-this.options.xLabelAngle),T=S.getBBox(),S.transform("t0,"+T.height/2+"..."),0!==this.options.xLabelAngle&&(L=-0.5*P.width*Math.cos(this.options.xLabelAngle*Math.PI/180),S.transform("t"+L+",0...")),(null==W||W>=T.x+T.width||null!=V&&V>=T.x)&&T.x>=0&&T.x+T.width<this.el.width()?(0!==this.options.xLabelAngle&&(X=1.25*this.options.gridTextSize/Math.sin(this.options.xLabelAngle*Math.PI/180),V=T.x-X),R.push(W=T.x-this.options.xLabelMargin)):R.push(S.remove())}return R},J.prototype.drawSeries=function(){var W,U,V,Z,L,X,Y,O,P,M,N,S,T,Q,R;return V=this.width/this.options.data.length,O=this.options.stacked?1:this.options.ykeys.length,W=(V*this.options.barSizeRatio-this.options.barGap*(O-1))/O,this.options.barSize&&(W=Math.min(W,this.options.barSize)),S=V-W*O-this.options.barGap*(O-1),Y=S/2,R=this.ymin<=0&&this.ymax>=0?this.transY(0):null,this.bars=function(){var a,c,b,d;for(b=this.data,d=[],Z=a=0,c=b.length;c>a;Z=++a){P=b[Z],L=0,d.push(function(){var e,g,f,i;for(f=P._y,i=[],M=e=0,g=f.length;g>e;M=++e){Q=f[M],null!==Q?(R?(T=Math.min(Q,R),U=Math.max(Q,R)):(T=Q,U=this.bottom),X=this.left+Z*V+Y,this.options.stacked||(X+=M*(W+this.options.barGap)),N=U-T,this.options.verticalGridCondition&&this.options.verticalGridCondition(P.x)&&this.drawBar(this.left+Z*V,this.top,V,Math.abs(this.top-this.bottom),this.options.verticalGridColor,this.options.verticalGridOpacity,this.options.barRadius),this.options.stacked&&(T-=L),this.drawBar(X,T,W,N,this.colorFor(P,M,"bar"),this.options.barOpacity,this.options.barRadius),i.push(L+=N)):i.push(null)}return i}.call(this))}return d}.call(this)},J.prototype.colorFor=function(P,N,O){var L,M;return"function"==typeof this.options.barColors?(L={x:P.x,y:P.y[N],label:P.label},M={index:N,key:this.options.ykeys[N],label:this.options.labels[N]},this.options.barColors.call(this,L,M,O)):this.options.barColors[N%this.options.barColors.length]},J.prototype.hitTest=function(L){return 0===this.data.length?null:(L=Math.max(Math.min(L,this.right),this.left),Math.min(this.data.length-1,Math.floor((L-this.left)/(this.width/this.data.length))))},J.prototype.onGridClick=function(N,L){var M;return M=this.hitTest(N),this.fire("click",M,this.data[M].src,N,L)},J.prototype.onHoverMove=function(N){var L,M;return L=this.hitTest(N),(M=this.hover).update.apply(M,this.hoverContentForRow(L))},J.prototype.onHoverOut=function(){return this.options.hideHover!==!1?this.hover.hide():void 0},J.prototype.hoverContentForRow=function(Q){var O,P,T,L,R,S,M,N;for(T=this.data[Q],O="<div class='morris-hover-row-label'>"+T.label+"</div>",N=T.y,P=S=0,M=N.length;M>S;P=++S){R=N[P],O+="<div class='morris-hover-point' style='color: "+this.colorFor(T,P,"label")+"'>\n  "+this.options.labels[P]+":\n  "+this.yLabelFormat(R)+"\n</div>"}return"function"==typeof this.options.hoverCallback&&(O=this.options.hoverCallback(Q,this.options,O,T.src)),L=this.left+(Q+0.5)*this.width/this.data.length,[O,L]},J.prototype.drawXAxisLabel=function(O,M,N){var L;return L=this.raphael.text(O,M,N).attr("font-size",this.options.gridTextSize).attr("font-family",this.options.gridTextFamily).attr("font-weight",this.options.gridTextWeight).attr("fill",this.options.gridTextColor)},J.prototype.drawBar=function(Q,O,P,T,L,R,S){var M,N;return M=Math.max.apply(Math,S),N=0===M||M>T?this.raphael.rect(Q,O,P,T):this.raphael.path(this.roundedRect(Q,O,P,T,S)),N.attr("fill",L).attr("fill-opacity",R).attr("stroke","none")},J.prototype.roundedRect=function(P,N,O,L,M){return null==M&&(M=[0,0,0,0]),["M",P,M[0]+N,"Q",P,N,P+M[0],N,"L",P+O-M[1],N,"Q",P+O,N,P+O,N+M[1],"L",P+O,N+L-M[2],"Q",P+O,N+L,P+O-M[2],N+L,"L",P+M[3],N+L,"Q",P,N+L,P,N+L-M[3],"Z"]},J}(D.Grid),D.Donut=function(K){function J(M){this.resizeHandler=G(this.resizeHandler,this),this.select=G(this.select,this),this.click=G(this.click,this);var L=this;if(!(this instanceof D.Donut)){return new D.Donut(M)}if(this.options=F.extend({},this.defaults,M),this.el="string"==typeof M.element?F(document.getElementById(M.element)):F(M.element),null===this.el||0===this.el.length){throw new Error("Graph placeholder not found.")}void 0!==M.data&&0!==M.data.length&&(this.raphael=new Raphael(this.el[0]),this.options.resize&&F(window).bind("resize",function(){return null!=L.timeoutId&&window.clearTimeout(L.timeoutId),L.timeoutId=window.setTimeout(L.resizeHandler,100)}),this.setData(M.data))}return B(J,K),J.prototype.defaults={colors:["#0B62A4","#3980B5","#679DC6","#95BBD7","#B0CCE1","#095791","#095085","#083E67","#052C48","#042135"],backgroundColor:"#FFFFFF",labelColor:"#000000",formatter:D.commas,resize:!1},J.prototype.redraw=function(){var z,y,Ac,Ad,Aa,Ab,V,W,T,U,Z,b,X,Y,N,O,L,M,R,S,P,Q,Ae;for(this.raphael.clear(),y=this.el.width()/2,Ac=this.el.height()/2,X=(Math.min(y,Ac)-10)/3,Z=0,S=this.values,Y=0,L=S.length;L>Y;Y++){b=S[Y],Z+=b}for(W=5/(2*X),z=1.9999*Math.PI-W*this.data.length,Ab=0,Aa=0,this.segments=[],P=this.values,Ad=N=0,M=P.length;M>N;Ad=++N){b=P[Ad],T=Ab+W+z*(b/Z),U=new D.DonutSegment(y,Ac,2*X,X,Ab,T,this.data[Ad].color||this.options.colors[Aa%this.options.colors.length],this.options.backgroundColor,Aa,this.raphael),U.render(),this.segments.push(U),U.on("hover",this.select),U.on("click",this.click),Ab=T,Aa+=1}for(this.text1=this.drawEmptyDonutLabel(y,Ac-10,this.options.labelColor,15,800),this.text2=this.drawEmptyDonutLabel(y,Ac+10,this.options.labelColor,14),V=Math.max.apply(Math,this.values),Aa=0,Q=this.values,Ae=[],O=0,R=Q.length;R>O;O++){if(b=Q[O],b===V){this.select(Aa);break}Ae.push(Aa+=1)}return Ae},J.prototype.setData=function(M){var L;return this.data=M,this.values=function(){var Q,P,N,O;for(N=this.data,O=[],Q=0,P=N.length;P>Q;Q++){L=N[Q],O.push(parseFloat(L.value))}return O}.call(this),this.redraw()},J.prototype.click=function(L){return this.fire("click",L,this.data[L])},J.prototype.select=function(Q){var O,P,M,N,R,L;for(L=this.segments,N=0,R=L.length;R>N;N++){P=L[N],P.deselect()}return M=this.segments[Q],M.select(),O=this.data[Q],this.setLabels(O.label,this.options.formatter(O.value,O))},J.prototype.setLabels=function(R,P){var Q,U,L,S,T,N,O,M;return Q=2*(Math.min(this.el.width()/2,this.el.height()/2)-10)/3,S=1.8*Q,L=Q/2,U=Q/3,this.text1.attr({text:R,transform:""}),T=this.text1.getBBox(),N=Math.min(S/T.width,L/T.height),this.text1.attr({transform:"S"+N+","+N+","+(T.x+T.width/2)+","+(T.y+T.height)}),this.text2.attr({text:P,transform:""}),O=this.text2.getBBox(),M=Math.min(S/O.width,U/O.height),this.text2.attr({transform:"S"+M+","+M+","+(O.x+O.width/2)+","+O.y})},J.prototype.drawEmptyDonutLabel=function(P,N,O,L,M){var Q;return Q=this.raphael.text(P,N,"").attr("font-size",L).attr("fill",O),null!=M&&Q.attr("font-weight",M),Q},J.prototype.resizeHandler=function(){return this.timeoutId=null,this.raphael.setSize(this.el.width(),this.el.height()),this.redraw()},J}(D.EventEmitter),D.DonutSegment=function(K){function J(S,Q,R,U,L,T,O,P,M,N){this.cx=S,this.cy=Q,this.inner=R,this.outer=U,this.color=O,this.backgroundColor=P,this.index=M,this.raphael=N,this.deselect=G(this.deselect,this),this.select=G(this.select,this),this.sin_p0=Math.sin(L),this.cos_p0=Math.cos(L),this.sin_p1=Math.sin(T),this.cos_p1=Math.cos(T),this.is_long=T-L>Math.PI?1:0,this.path=this.calcSegment(this.inner+3,this.inner+this.outer-5),this.selectedPath=this.calcSegment(this.inner+3,this.inner+this.outer),this.hilight=this.calcArc(this.inner)}return B(J,K),J.prototype.calcArcPoints=function(L){return[this.cx+L*this.sin_p0,this.cy+L*this.cos_p0,this.cx+L*this.sin_p1,this.cy+L*this.cos_p1]},J.prototype.calcSegment=function(T,R){var S,W,L,U,V,O,P,M,N,Q;return N=this.calcArcPoints(T),S=N[0],L=N[1],W=N[2],U=N[3],Q=this.calcArcPoints(R),V=Q[0],P=Q[1],O=Q[2],M=Q[3],"M"+S+","+L+("A"+T+","+T+",0,"+this.is_long+",0,"+W+","+U)+("L"+O+","+M)+("A"+R+","+R+",0,"+this.is_long+",1,"+V+","+P)+"Z"},J.prototype.calcArc=function(P){var N,O,L,M,Q;return Q=this.calcArcPoints(P),N=Q[0],L=Q[1],O=Q[2],M=Q[3],"M"+N+","+L+("A"+P+","+P+",0,"+this.is_long+",0,"+O+","+M)},J.prototype.render=function(){var L=this;return this.arc=this.drawDonutArc(this.hilight,this.color),this.seg=this.drawDonutSegment(this.path,this.color,this.backgroundColor,function(){return L.fire("hover",L.index)},function(){return L.fire("click",L.index)})},J.prototype.drawDonutArc=function(M,L){return this.raphael.path(M).attr({stroke:L,"stroke-width":2,opacity:0})},J.prototype.drawDonutSegment=function(P,N,O,L,M){return this.raphael.path(P).attr({fill:N,stroke:O,"stroke-width":3}).hover(L).click(M)},J.prototype.select=function(){return this.selected?void 0:(this.seg.animate({path:this.selectedPath},150,"<>"),this.arc.animate({opacity:1},150,"<>"),this.selected=!0)},J.prototype.deselect=function(){return this.selected?(this.seg.animate({path:this.path},150,"<>"),this.arc.animate({opacity:0},150,"<>"),this.selected=!1):void 0},J}(D.EventEmitter)}).call(this);